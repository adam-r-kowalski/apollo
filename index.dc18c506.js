let e;var r;(r=e||(e={}))[r.NUMBER=0]="NUMBER";const n={numbers:{xs:[],ys:[],literals:[]},calls:{xs:[],ys:[],names:[],arguments:[]},cursor:{x:50*Math.round(window.innerWidth/2/50),y:50*Math.round(window.innerHeight/2/50)},grid:50,repeat:""},t=document.querySelector("#gl");t.width=window.innerWidth,t.height=window.innerHeight;const i=t.getContext("webgl2");i.enable(i.BLEND),i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA);const a=document.querySelector("#text");a.width=window.innerWidth,a.height=window.innerHeight;const o=a.getContext("2d"),s=(e,r,n)=>{const t=e.createShader(r);e.shaderSource(t,n),e.compileShader(t);if(e.getShaderParameter(t,e.COMPILE_STATUS))return t;console.log(e.getShaderInfoLog(t)),e.deleteShader(t)},c=s(i,i.VERTEX_SHADER,"#version 300 es\n\nin vec2 a_position;\n\nuniform vec2 u_resolution;\n\nvoid main() {\n  vec2 zeroToOne = a_position / u_resolution;\n  vec2 zeroToTwo = zeroToOne * 2.0;\n  vec2 clipSpace = zeroToTwo - 1.0;\n  gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n}\n"),l=s(i,i.FRAGMENT_SHADER,"#version 300 es\n\nprecision highp float;\n\nuniform vec4 u_color;\n\nout vec4 outColor;\n\nvoid main() {\n  outColor = u_color;\n}\n"),d=((e,r,n)=>{const t=e.createProgram();e.attachShader(t,r),e.attachShader(t,n),e.linkProgram(t);if(e.getProgramParameter(t,e.LINK_STATUS))return t;console.log(e.getProgramInfoLog(t)),e.deleteProgram(t)})(i,c,l),u=i.getAttribLocation(d,"a_position"),h=i.createBuffer(),f=i.createVertexArray();i.bindVertexArray(f),i.enableVertexAttribArray(u),i.bindBuffer(i.ARRAY_BUFFER,h);{const e=2,r=i.FLOAT,n=!1,t=0,a=0;i.vertexAttribPointer(u,e,r,n,t,a)}const g=e=>{const r=window.devicePixelRatio,{width:n,height:t}=e.getBoundingClientRect(),i=Math.round(n*r),a=Math.round(t*r),o=e.width!=i||e.height!=a;return o&&(e.width=i,e.height=a),o},m=i.getUniformLocation(d,"u_resolution");g(i.canvas),i.viewport(0,0,i.canvas.width,i.canvas.height),i.clearColor(.27,.35,.39,1),i.useProgram(d),i.uniform2f(m,i.canvas.width,i.canvas.height),i.bindVertexArray(f);const w=(e,r,n,t,i)=>{const a=r,o=r+t,s=n,c=n+i;e.bufferData(e.ARRAY_BUFFER,new Float32Array([a,s,o,s,a,c,a,c,o,s,o,c]),e.STATIC_DRAW)},A=i.getUniformLocation(d,"u_color"),y=i.TRIANGLES;i.clear(i.COLOR_BUFFER_BIT);const x=()=>{i.clear(i.COLOR_BUFFER_BIT),o.clearRect(0,0,a.width,a.height);for(let e=n.grid;e<a.width;e+=n.grid)w(i,e,0,1,a.height),i.uniform4f(A,1,1,1,.1),i.drawArrays(y,0,6);for(let e=n.grid;e<a.height;e+=n.grid)w(i,0,e,a.width,1),i.uniform4f(A,1,1,1,.1),i.drawArrays(y,0,6);var e,r;(e=n).numbers.xs.map(((r,n)=>{const t=e.numbers.ys[n];if(w(i,r,t,200,40),i.uniform4f(A,.1,.46,.82,1),i.drawArrays(y,0,6),o.font="22px sans-serif",o.fillStyle="white",o.fillText("Number",r+5,t+28),w(i,r,t+40,200,60),i.uniform4f(A,.11,.19,.23,1),i.drawArrays(y,0,6),e.editing&&e.editing.index==n){w(i,r+10,t+50,150,40),i.uniform4f(A,1,1,1,1),i.drawArrays(y,0,6);const a=e.numbers.literals[n];a.length>0&&(o.font="20px sans-serif",o.fillStyle="black",o.fillText(parseInt(a).toLocaleString(),r+15,t+75))}else{const i=e.numbers.literals[n];i.length>0&&(o.font="20px sans-serif",o.fillStyle="white",o.fillText(parseInt(i).toLocaleString(),r+15,t+75))}w(i,r+175,t+65,15,15),i.uniform4f(A,.39,.64,1,1),i.drawArrays(y,0,6)})),(r=n.calls).xs.map(((e,n)=>{const t=r.ys[n];w(i,e,t,200,40),i.uniform4f(A,.1,.46,.82,1),i.drawArrays(y,0,6),o.font="22px sans-serif",o.fillStyle="white",o.fillText("Add",e+5,t+28),w(i,e,t+40,200,65),i.uniform4f(A,.11,.19,.23,1),i.drawArrays(y,0,6),w(i,e+10,t+55,10,10),i.uniform4f(A,.39,.64,1,1),i.drawArrays(y,0,6),o.font="18px sans-serif",o.fillStyle="white",o.fillText("x",e+30,t+65),w(i,e+10,t+80,10,10),i.uniform4f(A,.39,.64,1,1),i.drawArrays(y,0,6),o.font="18px sans-serif",o.fillStyle="white",o.fillText("y",e+30,t+90),w(i,e+180,t+55,10,10),i.uniform4f(A,.39,.64,1,1),i.drawArrays(y,0,6),o.font="18px sans-serif",o.fillStyle="white",o.fillText("result",e+125,t+65)}));const t=n.cursor.x-100,s=n.cursor.y-52.5;w(i,t+100-15,s+52.5-1,30,2),i.uniform4f(A,1,1,1,1),i.drawArrays(y,0,6),w(i,t+100-1,s+52.5-15,2,30),i.uniform4f(A,1,1,1,1),i.drawArrays(y,0,6)};requestAnimationFrame(x),document.addEventListener("mousemove",(e=>{n.cursor.x=Math.round(e.clientX/n.grid)*n.grid,n.cursor.y=Math.round(e.clientY/n.grid)*n.grid,requestAnimationFrame(x)}));const p=e=>{if(e.repeat.length>0){const r=parseInt(e.repeat);return e.repeat="",r}return 1};document.addEventListener("keypress",(r=>{switch(r.key){case"n":(t=n).editing={kind:e.NUMBER,index:t.numbers.xs.length},t.numbers.xs.push(t.cursor.x),t.numbers.ys.push(t.cursor.y),t.numbers.literals.push(""),requestAnimationFrame(x);break;case"c":(e=>{e.calls.xs.push(e.cursor.x),e.calls.ys.push(e.cursor.y),e.calls.names.push("Add"),e.calls.arguments.push(["x","y"])})(n),requestAnimationFrame(x);break;case"h":n.cursor.x-=n.grid*p(n),n.editing=null,requestAnimationFrame(x);break;case"j":n.cursor.y+=n.grid*p(n),n.editing=null,requestAnimationFrame(x);break;case"k":n.cursor.y-=n.grid*p(n),n.editing=null,requestAnimationFrame(x);break;case"l":n.cursor.x+=n.grid*p(n),n.editing=null,requestAnimationFrame(x);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.editing?(n.numbers.literals[n.editing.index]+=r.key,requestAnimationFrame(x)):n.repeat+=r.key;break;default:console.log(r.key)}var t})),window.addEventListener("resize",(()=>{i.canvas.width=window.innerWidth,i.canvas.height=window.innerHeight,g(i.canvas),i.viewport(0,0,i.canvas.width,i.canvas.height),i.uniform2f(m,i.canvas.width,i.canvas.height),a.width=window.innerWidth,a.height=window.innerHeight}));
//# sourceMappingURL=index.dc18c506.js.map

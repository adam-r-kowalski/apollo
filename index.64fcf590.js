function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}const t=({haystack:e,needle:t})=>{let n=0,r=0;for(;r<t.length;){const i=t[r].toLowerCase();for(;n<e.length&&i!==e[n].toLowerCase();)++n;if(n===e.length)return!1;++r}return!0},n=({width:e,height:t})=>[2/e,0,-1,0,-2/t,1,0,0,1],r=(e,t)=>[1,0,e,0,1,t,0,0,1],i=(e,t)=>[e,0,0,0,t,0,0,0,1],s=(...e)=>{const[t,...n]=e;return n.reduce(((e,t)=>{const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],d=e[6],u=e[7],c=e[8],l=t[0],h=t[1],p=t[2],g=t[3],E=t[4],f=t[5],x=t[6],m=t[7],A=t[8];return[n*l+r*g+i*x,n*h+r*E+i*m,n*p+r*f+i*A,s*l+o*g+a*x,s*h+o*E+a*m,s*p+o*f+a*A,d*l+u*g+c*x,d*h+u*E+c*m,d*p+u*f+c*A]}),t)},o=(e,t)=>{const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],d=e[6],u=e[7],c=e[8],l=t[0],h=t[1],p=t[2];return[n*l+r*h+i*p,s*l+o*h+a*p,d*l+u*h+c*p]},a=e=>{const t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],d=e[7],u=e[8],c=n*o-r*s,l=t*o-r*i,h=t*s-n*i,p=1/(a*c-d*l+u*h);return[p*(s*u-o*d),p*-(n*u-r*d),p*c,p*-(i*u-o*a),p*(t*u-r*a),p*-l,p*(i*d-s*a),p*-(t*d-n*a),p*h]},d=([e,t,n])=>Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2));let u;var c;let l;var h;(c=u||(u={}))[c.ALPHABETIC=0]="ALPHABETIC",c[c.NUMERIC=1]="NUMERIC",(h=l||(l={}))[h.FINDER=0]="FINDER",h[h.NUMBER=1]="NUMBER",h[h.NONE=2]="NONE";let p;var g;(g=p||(p={}))[g.POINTER_MOVE=0]="POINTER_MOVE",g[g.POINTER_DOWN=1]="POINTER_DOWN",g[g.POINTER_UP=2]="POINTER_UP",g[g.CLICKED_NODE=3]="CLICKED_NODE",g[g.WHEEL=4]="WHEEL",g[g.CLICKED_INPUT=5]="CLICKED_INPUT",g[g.CLICKED_OUTPUT=6]="CLICKED_OUTPUT",g[g.DOUBLE_CLICK_TIMEOUT=7]="DOUBLE_CLICK_TIMEOUT",g[g.DOUBLE_CLICK=8]="DOUBLE_CLICK",g[g.KEYDOWN=9]="KEYDOWN",g[g.VIRTUAL_KEYDOWN=10]="VIRTUAL_KEYDOWN",g[g.CLICKED_FINDER_OPTION=11]="CLICKED_FINDER_OPTION",g[g.CLICKED_NUMBER=12]="CLICKED_NUMBER",g[g.CLICKED_BACKGROUND=13]="CLICKED_BACKGROUND";const E=e=>(e.finder.options=Object.keys(e.operations).filter((n=>t({haystack:n,needle:e.finder.search}))),e),f=e=>(e.finder.show=!0,e.finder.search="",e.virtualKeyboard={show:!0,kind:u.ALPHABETIC},e.inputTarget={kind:l.FINDER},e.potentialDoubleClick=!1,e=E(e)),x=e=>(e.finder.show=!1,e.finder.search="",e.virtualKeyboard={show:!1,kind:u.ALPHABETIC},e.inputTarget={kind:l.NONE},e),m=(e,t,n)=>{const r=(e=x(e)).operations[t],[i,s,a]=o(e.camera,[e.nodePlacementLocation.x,e.nodePlacementLocation.y,1]),d=n();return e.graph.nodes[d]={uuid:d,name:t,inputs:r.inputs.map((e=>({name:e,selected:!1,edgeUUIDs:[]}))),outputs:r.outputs.map((e=>({name:e,selected:!1,edgeUUIDs:[]}))),x:i,y:s,body:void 0!==r.body?{value:r.body,editing:!1}:void 0},e.graph.nodeOrder.push(d),e},A=(e,{nodeUUID:t})=>(e.inputTarget.kind===l.NUMBER&&(e.graph.nodes[e.inputTarget.nodeUUID].body.editing=!1),e=((e,t)=>(e.virtualKeyboard={show:!0,kind:u.NUMERIC},e.inputTarget={kind:l.NUMBER,nodeUUID:t},e.graph.nodes[t].body.editing=!0,e))(e=x(e),t),{state:e,render:!0}),I=(e,t,n)=>{switch(n.kind){case p.POINTER_DOWN:return((e,t)=>e.inputTarget.kind!==l.NONE?{state:e}:(e.pointers.push(t.pointer),e.pointers.length>1?(e.potentialDoubleClick=!1,e.dragging=!1,e.zooming=2===e.pointers.length,{state:e}):e.potentialDoubleClick?(e.potentialDoubleClick=!1,{state:e,dispatch:[{kind:p.DOUBLE_CLICK,pointer:t.pointer}]}):(e.dragging=!0,e.potentialDoubleClick=!0,{state:e,schedule:[{after:{milliseconds:300},event:{kind:p.DOUBLE_CLICK_TIMEOUT}}]})))(t,n);case p.POINTER_UP:return((e,t)=>{const n=e.pointers.findIndex((e=>e.id===t.pointer.id));return e.pointers.splice(n,1),1===e.pointers.length?(e.zooming=!1,e.dragging=!0,e.pointerDistance=0):0===e.pointers.length&&(e.dragging=!1,e.pointerDistance=0),{state:e}})(t,n);case p.POINTER_MOVE:return((e,t)=>{if(!e.dragging&&!e.zooming)return e.finder.show||(e.nodePlacementLocation={x:t.pointer.x,y:t.pointer.y}),{state:e,rerender:!1};const n=e.pointers.findIndex((e=>e.id===t.pointer.id)),a=e.pointers[n];if(e.pointers[n]=t.pointer,e.dragging){const n=t.pointer.x-a.x,i=t.pointer.y-a.y;if(null!==e.selectedNode){const t=d(o(e.camera,[0,1,0])),r=e.graph.nodes[e.selectedNode];r.x+=n*t,r.y+=i*t}else e.camera=s(e.camera,r(-n,-i));return{state:e,render:!0}}const[u,c]=[e.pointers[0],e.pointers[1]],[l,h]=[u.x,u.y],[p,g]=[c.x,c.y],E=Math.sqrt(Math.pow(p-l,2)+Math.pow(g-h,2)),f=e.pointerDistance,x=e.pointerCenter;e.pointerDistance=E;const m=(u.x+c.x)/2,A=(u.y+c.y)/2;if(e.pointerCenter=[m,A],f>0){const t=r(m,A),n=Math.pow(2,.01*(f-E)),o=r(-m,-A),a=m-x[0],d=A-x[1];return e.camera=s(e.camera,t,i(n,n),o,r(-a,-d)),{state:e,render:!0}}return{state:e}})(t,n);case p.CLICKED_NODE:return((e,t)=>{e.selectedNode=t.nodeUUID;const n=e.graph.nodeOrder.filter((e=>e!==t.nodeUUID));return n.push(t.nodeUUID),e.graph.nodeOrder=n,{state:e,render:!0}})(t,n);case p.WHEEL:return((e,t)=>{const n=r(t.x,t.y),o=Math.pow(2,.01*t.deltaY),a=r(-t.x,-t.y);return e.camera=s(e.camera,n,i(o,o),a),{state:e,render:!0}})(t,n);case p.CLICKED_INPUT:return((e,t,n)=>{e.selectedNode=t.inputPath.nodeUUID;const r=e.graph.nodeOrder.filter((e=>e!==t.inputPath.nodeUUID));if(r.push(t.inputPath.nodeUUID),e.graph.nodeOrder=r,e.selectedOutput){const r={uuid:n(),input:t.inputPath,output:e.selectedOutput};e.graph.edges[r.uuid]=r;{const{nodeUUID:t,outputIndex:n}=e.selectedOutput,i=e.graph.nodes[t].outputs[n];i.edgeUUIDs.push(r.uuid),i.selected=!1}{const{nodeUUID:n,inputIndex:i}=t.inputPath;e.graph.nodes[n].inputs[i].edgeUUIDs.push(r.uuid)}return e.selectedOutput=null,e.selectedNode=null,{state:e,render:!0}}if(e.selectedInput){const{nodeUUID:t,inputIndex:n}=e.selectedInput;e.graph.nodes[t].inputs[n].selected=!1}const{nodeUUID:i,inputIndex:s}=t.inputPath;return e.graph.nodes[i].inputs[s].selected=!0,e.selectedInput=t.inputPath,{state:e,render:!0}})(t,n,e);case p.CLICKED_OUTPUT:return((e,t,n)=>{e.selectedNode=t.outputPath.nodeUUID;const r=e.graph.nodeOrder.filter((e=>e!==t.outputPath.nodeUUID));if(r.push(t.outputPath.nodeUUID),e.graph.nodeOrder=r,e.selectedInput){const r={uuid:n(),input:e.selectedInput,output:t.outputPath};e.graph.edges[r.uuid]=r;{const{nodeUUID:t,inputIndex:n}=e.selectedInput,i=e.graph.nodes[t].inputs[n];i.edgeUUIDs.push(r.uuid),i.selected=!1}{const{nodeUUID:n,outputIndex:i}=t.outputPath;e.graph.nodes[n].outputs[i].edgeUUIDs.push(r.uuid)}return e.selectedInput=null,e.selectedNode=null,{state:e,render:!0}}if(e.selectedOutput){const{nodeUUID:t,outputIndex:n}=e.selectedOutput;e.graph.nodes[t].outputs[n].selected=!1}const{nodeUUID:i,outputIndex:s}=t.outputPath;return e.graph.nodes[i].outputs[s].selected=!0,e.selectedOutput=t.outputPath,{state:e,render:!0}})(t,n,e);case p.DOUBLE_CLICK_TIMEOUT:return((e,t)=>(e.potentialDoubleClick&&(e.potentialDoubleClick=!1),{state:e}))(t);case p.DOUBLE_CLICK:return((e,{pointer:t})=>((e=f(e)).nodePlacementLocation={x:t.x,y:t.y},{state:e,render:!0}))(t,n);case p.KEYDOWN:return((e,{key:t},n)=>{switch(e.inputTarget.kind){case l.FINDER:switch(t){case"Backspace":e.finder.search=e.finder.search.slice(0,-1);break;case"Shift":case"Alt":case"Control":case"Meta":case"Tab":break;case"Enter":if(e.finder.options.length>0){const t=e.finder.options[0];e=m(e,t,n)}else e=x(e);break;case"Escape":e=x(e);break;default:e.finder.search+=t}return{state:E(e),render:!0};case l.NUMBER:const r=e.graph.nodes[e.inputTarget.nodeUUID];let i=r.body.value.toString();switch(t){case"Backspace":let n=i.slice(0,-1);return""===n&&(n="0"),r.body.value=parseFloat(n),{state:e,render:!0};case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"0":return i+=t,r.body.value=parseFloat(i),{state:e,render:!0};case"Enter":return r.body.editing=!1,e.virtualKeyboard={show:!1,kind:u.ALPHABETIC},e.inputTarget={kind:l.NONE},{state:e,render:!0};default:return{state:e}}case l.NONE:switch(t){case"f":return{state:f(e),render:!0};case"d":const t=e.selectedNode;if(null===t)return{state:e};const n=e.graph.nodes[t],r=[];n.inputs.forEach((e=>{e.edgeUUIDs.forEach((e=>r.push(e)))})),n.outputs.forEach((e=>{e.edgeUUIDs.forEach((e=>r.push(e)))}));for(const n of r){const r=e.graph.edges[n];{const{nodeUUID:i,inputIndex:s}=r.input;if(i!==t){const t=e.graph.nodes[i].inputs[s];t.edgeUUIDs=t.edgeUUIDs.filter((e=>e!==n))}}{const{nodeUUID:i,outputIndex:s}=r.output;if(i!==t){const t=e.graph.nodes[i].outputs[s];t.edgeUUIDs=t.edgeUUIDs.filter((e=>e!==n))}}delete e.graph.edges[n]}return delete e.graph.nodes[t],e.graph.nodeOrder=e.graph.nodeOrder.filter((e=>e!==t)),e.selectedNode=null,{state:e,render:!0};default:return{state:e}}}})(t,n,e);case p.VIRTUAL_KEYDOWN:return((e,{key:t},n)=>{switch(e.inputTarget.kind){case l.FINDER:switch(t){case"del":e.finder.search=e.finder.search.slice(0,-1);break;case"sft":break;case"space":e.finder.search+=" ";break;case"ret":if(e.finder.options.length>0){const t=e.finder.options[0];e=m(e,t,n)}else e=x(e);break;default:e.finder.search+=t}return{state:E(e),render:!0};case l.NUMBER:const r=e.graph.nodes[e.inputTarget.nodeUUID];let i=r.body.value.toString();switch(t){case"del":let n=i.slice(0,-1);return""===n&&(n="0"),r.body.value=parseFloat(n),{state:e,render:!0};case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"0":case".":return i+=t,r.body.value=parseFloat(i),{state:e,render:!0};case"ret":return r.body.editing=!1,e.virtualKeyboard={show:!1,kind:u.ALPHABETIC},e.inputTarget={kind:l.NONE},{state:e,render:!0};default:return{state:e}}case l.NONE:return{state:e}}})(t,n,e);case p.CLICKED_FINDER_OPTION:return((e,{option:t},n)=>({state:m(e,t,n),render:!0}))(t,n,e);case p.CLICKED_NUMBER:return A(t,n);case p.CLICKED_BACKGROUND:return(e=>{if(e.inputTarget.kind===l.NUMBER&&(e.graph.nodes[e.inputTarget.nodeUUID].body.editing=!1),e.selectedNode=null,null!==e.selectedInput){const{nodeUUID:t,inputIndex:n}=e.selectedInput;e.graph.nodes[t].inputs[n].selected=!1,e.selectedInput=null}if(null!==e.selectedOutput){const{nodeUUID:t,outputIndex:n}=e.selectedOutput;e.graph.nodes[t].outputs[n].selected=!1,e.selectedOutput=null}return{state:x(e),render:!0}})(t)}},T=({x0:e,y0:t,x1:n,y1:r},i)=>e<=i.x&&i.x<=n&&t<=i.y&&i.y<=r,U=(e,t)=>{for(let n=e.clickHandlers.length;n>0;--n)for(const{onClick:r,worldSpace:i}of e.clickHandlers[n-1])if(T(i,t))return e.dispatch(r),e;return e},C=e=>({triangles:{vertices:[],colors:[],vertexIndices:[],textureIndex:e,textureCoordinates:[],cameraIndex:[]},lines:{vertices:[],colors:[]}});function*y(e,t,n,r){const i=(t.x0+t.x1)/2,s=(t.y0+t.y1)/2,o=i+r,a=s,d=(n.x0+n.x1)/2,u=(n.y0+n.y1)/2,c=d-r,l=u;let h=0,p=0,g=!0;for(const t of e){const e=t*t,n=e*t,r=1-t,E=r*r,f=E*r,x=3*E*t,m=3*r*e,A=f*i+x*o+m*c+n*d,I=f*s+x*a+m*l+n*u;g?(yield A,yield I,g=!1):(yield h,yield p),yield A,yield I,h=A,p=I}}const R=(e,t,n)=>{const r=((e,t,n)=>{const r=(t-e)/(n-1);return Array.from({length:n},((t,n)=>e+r*n))})(0,1,20),i=[];let s=C(0),o=s.triangles.textureIndex.toString();return e.forEach(((e,a)=>{for(const[t,n]of Object.entries(e)){o!==t&&(0!==s.triangles.vertices.length&&i.push(s),s=C(parseInt(t)),o=t);for(const e of n){const t=s.triangles.vertices.length/2;s.triangles.vertices.push(...e.vertices),s.triangles.colors.push(...e.colors);for(const n of e.vertexIndices)s.triangles.vertexIndices.push(n+t);s.triangles.textureCoordinates.push(...e.textureCoordinates),s.triangles.cameraIndex.push(...e.cameraIndex)}}if(t.length>a){for(const{connections:e,scale:i}of t[a]){const t=50*i;for(const{from:i,to:o,color:a}of e){for(const e of y(r,n[i],n[o],t))s.lines.vertices.push(e);const{red:e,green:d,blue:u,alpha:c}=a;for(let t=0;t<40;++t)s.lines.colors.push(e,d,u,c)}}0!==s.lines.vertices.length&&(i.push(s),s=C(0))}})),0!==s.triangles.vertices.length&&i.push(s),i},D=(e,t)=>{const n=e.cameras.length;e.cameras.push(t),e.stack.push(n),e.transform=a(t)},N=e=>e.stack.slice(-1)[0],_=e=>{e.stack.pop(),e.transform=a(e.cameras[N(e)])},w=(e,t)=>{const[n,r,i]=o(e.transform,[t.x0,t.y0,1]),[s,a,d]=o(e.transform,[t.x1,t.y1,1]);return{x0:n,y0:r,x1:s,y1:a}},b=(e,t,n)=>{const r=he(e.child,t,n);return{size:{width:t.maxWidth,height:t.maxHeight},child:r}},v=(e,t,n,r)=>{const i=w(r,{x0:n.x,y0:n.y,x1:n.x+t.size.width,y1:n.y+t.size.height}),s=t.child,o={x:n.x+t.size.width/2-s.size.width/2,y:n.y+t.size.height/2-s.size.height/2};return{worldSpace:i,child:pe(e.child,s,o,r)}};function*O(e,t,n,r){yield*ge(e.child,t.child,n.child,r+1)}let k;var L;let S;var P;function B(...e){const[t,n]=e[0]instanceof Array?[{},e[0]]:[e[0],e[1]];return{kind:ce.COLUMN,mainAxisAlignment:t.mainAxisAlignment??k.START,crossAxisAlignment:t.crossAxisAlignment??S.START,children:n}}(L=k||(k={}))[L.START=0]="START",L[L.CENTER=1]="CENTER",L[L.END=2]="END",L[L.SPACE_EVENLY=3]="SPACE_EVENLY",L[L.SPACE_BETWEEN=4]="SPACE_BETWEEN",(P=S||(S={}))[P.START=0]="START",P[P.CENTER=1]="CENTER",P[P.END=2]="END";const z=(e,t,n)=>{const r={children:[],width:0,totalChildHeight:0},i=e.children.reduce(((e,r)=>{const i=he(r,t,n);return e.children.push(i),e.totalChildHeight+=i.size.height,e.width=Math.max(e.width,i.size.width),e}),r),{children:s,width:o,totalChildHeight:a}=i;return{size:{width:o,height:e.mainAxisAlignment==k.START?a:t.maxHeight},totalChildHeight:a,children:s}},F=(e,t,n,r)=>{const i=t.size.height-t.totalChildHeight,s={children:[],y:(()=>{switch(e.mainAxisAlignment){case k.START:return n.y;case k.CENTER:return n.y+i/2;case k.END:return n.y+i;case k.SPACE_EVENLY:return n.y+i/(e.children.length+1);case k.SPACE_BETWEEN:return n.y}})()},o=e=>e.size.height,a=e=>e.size.height,d=e=>e.size.height,u=t=>t.size.height+i/(e.children.length+1),c=t=>t.size.height+i/(e.children.length-1),l=(()=>{switch(e.mainAxisAlignment){case k.START:return o;case k.CENTER:return a;case k.END:return d;case k.SPACE_EVENLY:return u;case k.SPACE_BETWEEN:return c}})(),h=e=>n.x,p=e=>n.x+t.size.width/2-e.size.width/2,g=e=>n.x+t.size.width-e.size.width,E=(()=>{switch(e.crossAxisAlignment){case S.START:return h;case S.CENTER:return p;case S.END:return g}})(),f=e.children.reduce(((e,n,i)=>{const s=t.children[i],o={x:E(s),y:e.y},a=pe(n,s,o,r);return e.children.push(a),e.y+=l(s),e}),s);return{worldSpace:w(r,{x0:n.x,y0:n.y,x1:n.x+t.size.width,y1:n.y+t.size.height}),children:f.children}};function*M(e,t,n,r){yield{ui:e,layout:t,geometry:n,z:r};const i=r+1;let s=0;for(const r of e.children)yield*ge(r,t.children[s],n.children[s],i),s+=1}const K=e=>e?{top:e,right:e,bottom:e,left:e}:{top:0,right:0,bottom:0,left:0},W=({padding:e,width:t,height:n,color:r,x:i,y:s,onClick:o,id:a},d)=>({kind:ce.CONTAINER,padding:K(e),width:t,height:n,x:i,y:s,color:r,onClick:o,id:a,child:d}),Y=(e,t,n)=>{const{top:r,right:i,bottom:s,left:o}=e.padding;if(e.child){const a=he(e.child,t,n);return{size:{width:e.width??a.size.width+o+i,height:e.height??a.size.height+r+s},child:a}}return{size:{width:e.width?e.width+o+i:t.maxWidth,height:e.height?e.height+r+s:t.maxHeight}}},H=(e,t,n,r)=>{const i=n.x+(e.x??0),s=i+t.size.width,o=n.y+(e.y??0),a=o+t.size.height,d=w(r,{x0:i,x1:s,y0:o,y1:a}),u=(()=>{if(e.child){const n=t.child,s={x:i+e.padding.left,y:o+e.padding.top};return pe(e.child,n,s,r)}})();if(e.color){const{red:t,green:n,blue:c,alpha:l}=e.color;return{worldSpace:d,vertices:[i,o,i,a,s,o,s,a],colors:[t,n,c,l,t,n,c,l,t,n,c,l,t,n,c,l],vertexIndices:[0,1,2,1,2,3],cameraIndex:Array(4).fill(N(r)),textureIndex:0,textureCoordinates:Array(8).fill(0),child:u}}return{worldSpace:d,vertices:[],colors:[],vertexIndices:[],cameraIndex:[],textureIndex:0,textureCoordinates:[],child:u}};function*V(e,t,n,r){if(yield{ui:e,layout:t,geometry:n,z:r},e.child){const i=t.child,s=n.child;yield*ge(e.child,i,s,r+1)}}function X(...e){const[t,n]=e[0]instanceof Array?[{},e[0]]:[e[0],e[1]];return{kind:ce.ROW,mainAxisAlignment:t.mainAxisAlignment??k.START,crossAxisAlignment:t.crossAxisAlignment??S.START,children:n}}const $=(e,t,n)=>{const r={children:[],totalChildWidth:0,height:0},i=e.children.reduce(((e,r)=>{const i=he(r,t,n);return e.children.push(i),e.totalChildWidth+=i.size.width,e.height=Math.max(e.height,i.size.height),e}),r),{children:s,totalChildWidth:o,height:a}=i;return{size:{width:e.mainAxisAlignment==k.START?o:t.maxWidth,height:a},totalChildWidth:o,children:s}},G=(e,t,n,r)=>{const i=t.size.width-t.totalChildWidth,s={children:[],x:(()=>{switch(e.mainAxisAlignment){case k.START:return n.x;case k.CENTER:return n.x+i/2;case k.END:return n.x+i;case k.SPACE_EVENLY:return n.x+i/(e.children.length+1);case k.SPACE_BETWEEN:return n.x}})()},o=e=>e.size.width,a=e=>e.size.width,d=e=>e.size.width,u=t=>t.size.width+i/(e.children.length+1),c=t=>t.size.width+i/(e.children.length-1),l=(()=>{switch(e.mainAxisAlignment){case k.START:return o;case k.CENTER:return a;case k.END:return d;case k.SPACE_EVENLY:return u;case k.SPACE_BETWEEN:return c}})(),h=e=>n.y,p=e=>n.y+t.size.height/2-e.size.height/2,g=e=>n.y+t.size.height-e.size.height,E=(()=>{switch(e.crossAxisAlignment){case S.START:return h;case S.CENTER:return p;case S.END:return g}})(),f=e.children.reduce(((e,n,i)=>{const s=t.children[i],o={x:e.x,y:E(s)},a=pe(n,s,o,r);return e.children.push(a),e.x+=l(s),e}),s);return{worldSpace:w(r,{x0:n.x,y0:n.y,x1:n.x+t.size.width,y1:n.y+t.size.height}),children:f.children}};function*j(e,t,n,r){yield{ui:e,layout:t,geometry:n,z:r};const i=r+1;let s=0;for(const r of e.children)yield*ge(r,t.children[s],n.children[s],i),s+=1}const q=({id:e,onClick:t,camera:n,children:r,connections:i})=>({id:e,onClick:t,kind:ce.SCENE,camera:n,children:r,connections:i??[]}),J=(e,t,n)=>{const r=e.children.map((e=>he(e,t,n)));return{size:{width:t.maxWidth,height:t.maxHeight},children:r}},Q=(e,t,n,r)=>{const i=w(r,{x0:n.x,y0:n.y,x1:n.x+t.size.width,y1:n.y+t.size.height});D(r,e.camera);const s=e.children.map(((e,i)=>pe(e,t.children[i],n,r)));return _(r),{worldSpace:i,children:s}};function*Z(e,t,n,r){yield{ui:e,layout:t,geometry:n,z:r};let i=0;for(const s of e.children){for(const e of ge(s,t.children[i],n.children[i],r))yield e,r=Math.max(r,e.z);i++,r++}}const ee=(e,t,n)=>{const r=e.children.map((e=>he(e,t,n)));return{size:{width:t.maxWidth,height:t.maxHeight},children:r}},te=(e,t,n,r)=>{const i=e.children.map(((e,i)=>pe(e,t.children[i],n,r)));return{worldSpace:w(r,{x0:n.x,y0:n.y,x1:n.x+t.size.width,y1:n.y+t.size.height}),children:i}};function*ne(e,t,n,r){yield{ui:e,layout:t,geometry:n,z:r};let i=0;for(const s of e.children){for(const e of ge(s,t.children[i],n.children[i],r))yield e,r=Math.max(r,e.z);i+=1,r+=1}}function re(...e){const[t,n]="string"==typeof e[0]?[{},e[0]]:[e[0],e[1]];return{kind:ce.TEXT,font:{family:t.font??"monospace",size:t.size??14},color:t.color??{red:255,green:255,blue:255,alpha:255},str:n}}const ie=({font:e,str:t},n,r)=>{const i=r(e,t),s=i.widths.reduce(((e,t)=>e+t));return{measurements:i,size:{width:s,height:e.size}}},se=(e,t,n)=>{const r=[];let i=n.x;const s=n.y,o=n.y+t;for(const t of e){const e=i,n=i+t;r.push(e,s,e,o,n,s,n,o),i+=t}return r},oe=(e,{red:t,green:n,blue:r,alpha:i})=>{const s=[];for(let o=0;o<e;++o)s.push(t,n,r,i,t,n,r,i,t,n,r,i,t,n,r,i);return s},ae=e=>{const t=[];let n=0;for(let r=0;r<e;++r)t.push(n,n+1,n+2,n+1,n+2,n+3),n+=4;return t},de=(e,t,n,r)=>{const i=t,{measurements:s}=i,{textureIndex:o,textureCoordinates:a,widths:d}=s;return{worldSpace:w(r,{x0:n.x,y0:n.y,x1:n.x+t.size.width,y1:n.y+t.size.height}),textureIndex:o,textureCoordinates:a.flat(),colors:oe(d.length,e.color),vertices:se(d,e.font.size,n),vertexIndices:ae(d.length),cameraIndex:Array(4*d.length).fill(N(r))}};function*ue(e,t,n,r){yield{ui:e,layout:t,geometry:n,z:r}}let ce;var le;(le=ce||(ce={}))[le.CENTER=0]="CENTER",le[le.COLUMN=1]="COLUMN",le[le.CONTAINER=2]="CONTAINER",le[le.ROW=3]="ROW",le[le.SCENE=4]="SCENE",le[le.STACK=5]="STACK",le[le.TEXT=6]="TEXT";const he=(e,t,n)=>{switch(e.kind){case ce.CENTER:return b(e,t,n);case ce.COLUMN:return z(e,t,n);case ce.CONTAINER:return Y(e,t,n);case ce.ROW:return $(e,t,n);case ce.SCENE:return J(e,t,n);case ce.STACK:return ee(e,t,n);case ce.TEXT:return ie(e,0,n)}},pe=(e,t,n,r)=>{switch(e.kind){case ce.CENTER:return v(e,t,n,r);case ce.COLUMN:return F(e,t,n,r);case ce.CONTAINER:return H(e,t,n,r);case ce.ROW:return G(e,t,n,r);case ce.SCENE:return Q(e,t,n,r);case ce.STACK:return te(e,t,n,r);case ce.TEXT:return de(e,t,n,r)}};function*ge(e,t,n,r){switch(e.kind){case ce.CENTER:yield*O(e,t,n,r);break;case ce.COLUMN:yield*M(e,t,n,r);break;case ce.CONTAINER:yield*V(e,t,n,r);break;case ce.ROW:yield*j(e,t,n,r);break;case ce.SCENE:yield*Z(e,t,n,r);break;case ce.STACK:yield*ne(e,t,n,r);break;case ce.TEXT:yield*ue(e,t,n,r)}}const Ee=(e,t,n,r)=>{const i=r.initial();for(const s of ge(e,t,n,0))r.combine(i,s);return i};var fe={};e(fe,"initial",(()=>Te)),e(fe,"combine",(()=>Ue));const xe=(e,t)=>{if(void 0===t.ui.onClick)return e;const n=t.z-e.length+1;for(let t=0;t<n;++t)e.push([]);return e[t.z].push({onClick:t.ui.onClick,worldSpace:t.geometry.worldSpace}),e},me=(e,t)=>t.ui.id?(e[t.ui.id]=t.geometry.worldSpace,e):e,Ae=(e,t)=>{switch(t.ui.kind){case ce.CONTAINER:case ce.TEXT:const n=t.geometry;if(0==n.vertices.length)return e;const r=t.z-e.length+1;for(let t=0;t<r;++t)e.push({});const i=e[t.z];return(()=>{const e=i[n.textureIndex];if(e)return e;const t=[];return i[n.textureIndex]=t,t})().push(n),e;default:return e}},Ie=(e,t)=>{if(t.ui.kind==ce.SCENE){if(0===t.ui.connections.length)return e;const n=t.z-e.length+1;for(let t=0;t<n;++t)e.push([]);return e[t.z].push({connections:t.ui.connections,scale:d(o(a(t.ui.camera),[0,1,0]))}),e}return e},Te=()=>({layers:[],clickHandlers:[],idToWorldSpace:{},connections:[]}),Ue=(e,t)=>({layers:Ae(e.layers,t),clickHandlers:xe(e.clickHandlers,t),idToWorldSpace:me(e.idToWorldSpace,t),connections:Ie(e.connections,t)}),Ce=(e,t)=>{const{width:n,height:r}=e.size;e.clear();const i=he(t,{minWidth:0,maxWidth:n,minHeight:0,maxHeight:r},e.measureText),s={cameras:[[1,0,0,0,1,0,0,0,1]],stack:[0],transform:a([1,0,0,0,1,0,0,0,1])},o=pe(t,i,{x:0,y:0},s),{layers:d,clickHandlers:u,connections:c,idToWorldSpace:l}=Ee(t,i,o,fe),h=R(d,c,l);e.cameras=s.cameras,e.clickHandlers=u;for(const t of h)e.draw(t);return e};let ye;var Re;(Re=ye||(ye={}))[Re.DATA=0]="DATA",Re[Re.ERROR=1]="ERROR";class De{constructor(e,t,n,r,i,s,o,a,d){this.window=e,this.document=t,this.canvas=n,this.gl=r,this.program=i,this.textures=s,this.textMeasurementsCache=o,this.clickHandlers=a,this.dispatch=d,this.kind=ye.DATA,this.clear=()=>{const{gl:e}=this;e.clear(e.COLOR_BUFFER_BIT)},this.draw=({triangles:e,lines:t})=>{const{gl:n,program:r,textures:i}=this,{attributes:s}=r;{const{vertices:t,colors:r,vertexIndices:o,textureCoordinates:a,textureIndex:d,cameraIndex:u}=e;if(0!==t.length){const e=i[d];n.bindTexture(n.TEXTURE_2D,e),n.bindBuffer(n.ARRAY_BUFFER,s.vertices.buffer),n.bufferData(n.ARRAY_BUFFER,new Float32Array(t),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,s.colors.buffer),n.bufferData(n.ARRAY_BUFFER,new Float32Array(r),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,s.textureCoordinates.buffer),n.bufferData(n.ARRAY_BUFFER,new Float32Array(a),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,s.cameraIndex.buffer),n.bufferData(n.ARRAY_BUFFER,new Uint8Array(u),n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,s.vertexIndices),n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array(o),n.STATIC_DRAW),n.drawElements(n.TRIANGLES,o.length,n.UNSIGNED_SHORT,0)}}{const{vertices:e,colors:r}=t;if(0!==e.length){const t=i[0],o=e.length/2;n.bindTexture(n.TEXTURE_2D,t),n.bindBuffer(n.ARRAY_BUFFER,s.vertices.buffer),n.bufferData(n.ARRAY_BUFFER,new Float32Array(e),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,s.colors.buffer),n.bufferData(n.ARRAY_BUFFER,new Float32Array(r),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,s.textureCoordinates.buffer),n.bufferData(n.ARRAY_BUFFER,new Float32Array(Array(2*o).fill(0)),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,s.cameraIndex.buffer),n.bufferData(n.ARRAY_BUFFER,new Uint8Array(Array(o).fill(0)),n.STATIC_DRAW),n.drawArrays(n.LINES,0,o)}}},this.getTextureMeasurements=(e,t)=>{const{document:n,gl:r}=this,i=`${t} ${e.size} ${e.family}`,s=this.textMeasurementsCache.get(i);if(s)return s;const{texture:o,widths:a,textureCoordinates:d}=((e,t,n,r)=>{const i=e.createElement("canvas"),s=i.getContext("2d"),o=Math.sqrt(256),a=(e=>{let t=1;for(;t<e;)t<<=1;return t})(n.size*o),d=a/o;i.width=a*r,i.height=a*r,i.style.width=`${a}px`,i.style.height=`${a}px`,s.scale(r,r),s.textAlign="left",s.textBaseline="top",s.font=`${n.size}px ${n.family}`,s.fillStyle="white",s.clearRect(0,0,s.canvas.width,s.canvas.height);const u=n.size,c=[],l=[];for(let e=0;e<256;++e){const t=String.fromCharCode(e),n=s.measureText(t),r=Math.ceil(n.width),i=e%o*d,h=Math.floor(e/o)*d;s.fillText(t,i,h),c.push(r);const p=i/a,g=(i+r)/a,E=h/a,f=(h+u)/a;l.push([p,E,p,f,g,E,g,f])}const h=t.createTexture();return t.bindTexture(t.TEXTURE_2D,h),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i),t.generateMipmap(t.TEXTURE_2D),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),{widths:c,textureCoordinates:l,texture:h}})(n,r,e,t),u=this.textures.length;this.textures.push(o);const c={widths:a,textureIndex:u,textureCoordinates:d};return this.textMeasurementsCache.set(i,c),c},this.measureText=(e,t)=>{const{window:n}=this,r=n.devicePixelRatio,{widths:i,textureIndex:s,textureCoordinates:o}=this.getTextureMeasurements(e,r),a=((e,t)=>{let n=[];for(let r=0;r<e.length;++r)n.push(t(e[r],r));return n})(t,(e=>e.charCodeAt(0)));return{widths:a.map((e=>i[e])),textureIndex:s,textureCoordinates:a.map((e=>o[e]))}}}set size(e){const{gl:t,program:r,window:i}=this,{uniforms:s}=r,{canvas:o}=t;t.uniformMatrix3fv(s.projection,!0,n(e)),o.width=e.width*i.devicePixelRatio,o.height=e.height*i.devicePixelRatio,o.style.width=`${e.width}px`,o.style.height=`${e.height}px`,t.viewport(0,0,o.width,o.height),this._size=e}get size(){return this._size}set cameras(e){const{gl:t,program:n}=this,{uniforms:r}=n,i=[];for(const t of e)i.push(...t);t.uniformMatrix3fv(r.cameras,!0,i),this._cameras=e}get cameras(){return this._cameras}}const Ne=({width:e,height:t,document:n,window:r,dispatch:i})=>{const s=n.createElement("canvas");s.style.touchAction="none";const o=s.getContext("webgl2");o.enable(o.BLEND),o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA),o.depthMask(!1),o.activeTexture(o.TEXTURE0),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),o.clearColor(0,0,0,1);const a=(e=>{const t={vertices:{location:0,buffer:e.createBuffer()},colors:{location:1,buffer:e.createBuffer()},textureCoordinates:{location:2,buffer:e.createBuffer()},cameraIndex:{location:3,buffer:e.createBuffer()},vertexIndices:e.createBuffer()},n=((e,t)=>{const{vertices:n,colors:r,textureCoordinates:i,cameraIndex:s}=t,o=`#version 300 es\n  uniform mat3 u_projection;\n  uniform mat3 u_cameras[8];\n\n  layout(location = ${n.location}) in vec2 a_vertex;\n  layout(location = ${r.location}) in vec4 a_color;\n  layout(location = ${i.location}) in vec2 a_textureCoordinates;\n  layout(location = ${s.location}) in uint a_cameraIndex;\n\n  out vec4 v_color;\n  out vec2 v_textureCoordinates;\n\n  void main() {\n    mat3 camera = u_cameras[a_cameraIndex];\n    mat3 transform = u_projection * inverse(camera);\n    gl_Position = vec4((transform * vec3(a_vertex, 1)).xy, 0, 1);\n    v_color = a_color / 255.0;\n    v_textureCoordinates = a_textureCoordinates;\n  }\n  `,a=e.createShader(e.VERTEX_SHADER);return e.shaderSource(a,o),e.compileShader(a),a})(e,t),r=(e=>{const t=e.createShader(e.FRAGMENT_SHADER);return e.shaderSource(t,"#version 300 es\n  precision highp float;\n\n  uniform sampler2D u_texture;\n\n  in vec4 v_color;\n  in vec2 v_textureCoordinates;\n\n  out vec4 fragColor;\n  \n  void main() {\n    fragColor = texture(u_texture, v_textureCoordinates) * v_color;\n  }\n  "),e.compileShader(t),t})(e),i=e.createProgram();if(e.attachShader(i,n),e.attachShader(i,r),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS))return{kind:ye.ERROR,vertexInfoLog:e.getShaderInfoLog(n),fragmentInfoLog:e.getShaderInfoLog(r)};e.useProgram(i);const s=e.createVertexArray();e.bindVertexArray(s),((e,t,{location:n,buffer:r})=>{e.bindAttribLocation(t,n,"a_vertex"),e.enableVertexAttribArray(n),e.bindBuffer(e.ARRAY_BUFFER,r),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0)})(e,i,t.vertices),((e,t,{location:n,buffer:r})=>{e.bindAttribLocation(t,n,"a_color"),e.enableVertexAttribArray(n),e.bindBuffer(e.ARRAY_BUFFER,r),e.vertexAttribPointer(n,4,e.FLOAT,!1,0,0)})(e,i,t.colors),((e,t,{location:n,buffer:r})=>{e.bindAttribLocation(t,n,"a_textureCoordinates"),e.enableVertexAttribArray(n),e.bindBuffer(e.ARRAY_BUFFER,r),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0)})(e,i,t.textureCoordinates),((e,t,{location:n,buffer:r})=>{e.bindAttribLocation(t,n,"a_cameraIndex"),e.enableVertexAttribArray(n),e.bindBuffer(e.ARRAY_BUFFER,r),e.vertexAttribIPointer(n,1,e.UNSIGNED_BYTE,0,0)})(e,i,t.cameraIndex);const o={projection:e.getUniformLocation(i,"u_projection"),texture:e.getUniformLocation(i,"u_texture"),cameras:e.getUniformLocation(i,"u_cameras")};return{kind:ye.DATA,vertexShader:n,fragmentShader:r,program:i,attributes:t,uniforms:o}})(o);if(a.kind==ye.ERROR)return a;const d=o.createTexture();o.bindTexture(o.TEXTURE_2D,d),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,1,1,0,o.RGBA,o.UNSIGNED_BYTE,new Uint8Array([255,255,255,255]));const u=new De(r,n,s,o,a,[d],new Map,[],i??(()=>{}));return u.size={width:e,height:t},u},_e=e=>({x:e.clientX,y:e.clientY,id:e.pointerId}),we=e=>W({width:e,height:e}),be=(e,t)=>{const n=[e[0]];for(const r of e.slice(1))n.push(t,r);return n},ve=(e,t,n)=>B(be(t.map(((t,r)=>((e,{name:t,selected:n},r,i)=>W({onClick:{kind:p.CLICKED_INPUT,inputPath:{nodeUUID:r,inputIndex:i}}},X({crossAxisAlignment:S.CENTER},[W({id:`input ${r} ${i}`,width:14,height:14,color:n?e.selectedInput:e.input}),we(4),re(t)])))(e,t,n,r))),we(4))),Oe=(e,t,n)=>B(be(t.map(((t,r)=>((e,{name:t,selected:n},r,i)=>W({onClick:{kind:p.CLICKED_OUTPUT,outputPath:{nodeUUID:r,outputIndex:i}}},X({crossAxisAlignment:S.CENTER},[re(t),we(4),W({id:`output ${r} ${i}`,width:14,height:14,color:n?e.selectedInput:e.input})])))(e,t,n,r))),we(4))),ke=(e,{name:t,x:n,y:r,inputs:i,body:s,outputs:o,uuid:a})=>{const d=[];return i.length&&d.push(ve(e,i,a)),i.length&&o.length&&d.push(we(15)),void 0!==s&&d.push(((e,t,n)=>W({color:t.editing?e.selectedInput:e.background,padding:5,onClick:{kind:p.CLICKED_NUMBER,nodeUUID:n}},re(t.value.toString())))(e,s,a),we(15)),o.length&&d.push(Oe(e,o,a)),W({color:e.node,padding:4,x:n,y:r,onClick:{kind:p.CLICKED_NODE,nodeUUID:a}},B({crossAxisAlignment:S.CENTER},[re(t),we(4),X(d)]))},Le=e=>X(e.map((e=>{return t=e,W({padding:10,onClick:{kind:p.VIRTUAL_KEYDOWN,key:t}},re({size:24},t));var t}))),Se=(e,t)=>{switch(t){case u.ALPHABETIC:return(e=>B({mainAxisAlignment:k.END},[X({mainAxisAlignment:k.SPACE_BETWEEN},[W({padding:4,color:e.node},B([Le(["1","2","3","4","5"]),Le(["q","w","e","r","t"]),Le(["a","s","d","f","g"]),Le(["z","x","c","v"]),Le(["sft","space"])])),W({padding:4,color:e.node},B({crossAxisAlignment:S.END},[Le(["6","7","8","9","0"]),Le(["y","u","i","o","p"]),Le(["h","j","k","l"]),Le(["b","n","m","del"]),Le(["space","ret"])]))])]))(e);case u.NUMERIC:return(e=>B({mainAxisAlignment:k.END},[X({mainAxisAlignment:k.END},[W({padding:4,color:e.node},B({crossAxisAlignment:S.END},[Le(["1","2","3","4"]),Le(["5","6","7","8"]),Le(["9","0","del"]),Le([".","ret"])]))])]))(e)}},Pe=()=>crypto.randomUUID(),Be=(e=>{let{state:t,view:n,update:r,window:i,document:s,requestAnimationFrame:o,setTimeout:a}=e;const d=Ne({width:i.innerWidth,height:i.innerHeight,window:i,document:s});switch(d.kind){case ye.ERROR:return d;case ye.DATA:let e=d,u=!1;const c=()=>{u||(u=!0,o((()=>{e=Ce(e,n(t)),u=!1})))},l=e=>{const{state:n,render:i,schedule:s,dispatch:o}=r(t,e);t=n,i&&c();for(const{after:e,event:t}of s??[]){const{milliseconds:n}=e;a((()=>l(t)),n)}for(const e of o??[])l(e)};return e.dispatch=l,s.body.appendChild(e.canvas),s.addEventListener("pointerdown",(t=>{e=U(e,_e(t))})),i.addEventListener("resize",(()=>{e.size={width:i.innerWidth,height:i.innerHeight},c()})),c(),{kind:ye.DATA,dispatch:l}}})({state:(e=>{const t={uuid:e(),name:"Number",inputs:[],body:{value:5,editing:!1},outputs:[],x:25,y:25},n={uuid:e(),name:"Number",inputs:[],body:{value:10,editing:!1},outputs:[],x:25,y:100},r={uuid:e(),name:"Add",inputs:[],outputs:[],x:150,y:50},i={uuid:e(),name:"Number",inputs:[],body:{value:15,editing:!1},outputs:[],x:175,y:150},s={uuid:e(),name:"Divide",inputs:[],outputs:[],x:350,y:50},o={uuid:e(),name:"Log",inputs:[],outputs:[],x:550,y:50},a={uuid:e(),output:{nodeUUID:t.uuid,outputIndex:0},input:{nodeUUID:r.uuid,inputIndex:0}},d={uuid:e(),output:{nodeUUID:n.uuid,outputIndex:0},input:{nodeUUID:r.uuid,inputIndex:1}},c={uuid:e(),output:{nodeUUID:r.uuid,outputIndex:0},input:{nodeUUID:s.uuid,inputIndex:0}},h={uuid:e(),output:{nodeUUID:i.uuid,outputIndex:0},input:{nodeUUID:s.uuid,inputIndex:1}},p={uuid:e(),output:{nodeUUID:s.uuid,outputIndex:0},input:{nodeUUID:o.uuid,inputIndex:0}};return t.outputs.push({name:"out",selected:!1,edgeUUIDs:[a.uuid]}),n.outputs.push({name:"out",selected:!1,edgeUUIDs:[d.uuid]}),r.inputs.push({name:"x",selected:!1,edgeUUIDs:[a.uuid]},{name:"y",selected:!1,edgeUUIDs:[d.uuid]}),r.outputs.push({name:"out",selected:!1,edgeUUIDs:[c.uuid]}),i.outputs.push({name:"out",selected:!1,edgeUUIDs:[h.uuid]}),s.inputs.push({name:"x",selected:!1,edgeUUIDs:[c.uuid]},{name:"y",selected:!1,edgeUUIDs:[h.uuid]}),s.outputs.push({name:"out",selected:!1,edgeUUIDs:[p.uuid]}),o.inputs.push({name:"value",selected:!1,edgeUUIDs:[p.uuid]}),{graph:{nodes:{[t.uuid]:t,[n.uuid]:n,[r.uuid]:r,[i.uuid]:i,[s.uuid]:s,[o.uuid]:o},nodeOrder:[t.uuid,n.uuid,r.uuid,i.uuid,s.uuid,o.uuid],edges:{[a.uuid]:a,[d.uuid]:d,[c.uuid]:c,[h.uuid]:h,[p.uuid]:p}},zooming:!1,dragging:!1,pointers:[],pointerDistance:0,pointerCenter:[0,0],camera:[1,0,0,0,1,0,0,0,1],selectedOutput:null,selectedInput:null,selectedNode:null,theme:{background:{red:2,green:22,blue:39,alpha:255},node:{red:41,green:95,blue:120,alpha:255},input:{red:188,green:240,blue:192,alpha:255},selectedInput:{red:175,green:122,blue:208,alpha:255},connection:{red:255,green:255,blue:255,alpha:255}},potentialDoubleClick:!1,nodePlacementLocation:{x:0,y:0},finder:{search:"",options:[],show:!1},virtualKeyboard:{show:!1,kind:u.ALPHABETIC},inputTarget:{kind:l.NONE},operations:{Number:{name:"Number",inputs:[],body:0,outputs:["out"]},Add:{name:"Add",inputs:["x","y"],outputs:["out"]},Subtract:{name:"Subtract",inputs:["x","y"],outputs:["out"]},Multiply:{name:"Multiply",inputs:["x","y"],outputs:["out"]},Divide:{name:"Divide",inputs:["x","y"],outputs:["out"]},Equal:{name:"Equal",inputs:["x","y"],outputs:["out"]},"Less Than":{name:"Less Than",inputs:["x","y"],outputs:["out"]},Log:{name:"Log",inputs:["value"],outputs:[]}}}})(Pe),view:e=>{const t=e.graph.nodeOrder.map((t=>ke(e.theme,e.graph.nodes[t]))),n=Object.values(e.graph.edges).map((({input:t,output:n})=>({from:`output ${n.nodeUUID} ${n.outputIndex}`,to:`input ${t.nodeUUID} ${t.inputIndex}`,color:e.theme.connection}))),r=[W({color:e.theme.background,onClick:{kind:p.CLICKED_BACKGROUND}}),q({camera:e.camera,children:t,connections:n})];return e.finder.show&&r.push((({search:e,options:t},n)=>B({crossAxisAlignment:S.CENTER},[W({height:10}),W({color:n.node,padding:4},B([W({color:n.background,width:300,padding:4},re({color:n.input,size:24},e.length?e:"Search ...")),W({width:10,height:10}),...t.map(((e,t)=>W({padding:4,onClick:{kind:p.CLICKED_FINDER_OPTION,option:e}},re({size:18,color:0==t?n.input:{red:255,green:255,blue:255,alpha:255}},e))))]))]))(e.finder,e.theme)),e.virtualKeyboard.show&&r.push(Se(e.theme,e.virtualKeyboard.kind)),i=r,{kind:ce.STACK,children:i};var i},update:(e,t)=>I(Pe,e,t),window:window,document:document,requestAnimationFrame:requestAnimationFrame,setTimeout:setTimeout});if(Be.kind==ye.ERROR)throw Be;const ze=Be.dispatch;"function"==typeof PointerEvent.prototype.getCoalescedEvents?document.addEventListener("pointermove",(e=>{e.getCoalescedEvents().forEach((e=>{ze({kind:p.POINTER_MOVE,pointer:_e(e)})}))})):document.addEventListener("pointermove",(e=>ze({kind:p.POINTER_MOVE,pointer:_e(e)}))),document.addEventListener("pointerdown",(e=>{ze({kind:p.POINTER_DOWN,pointer:_e(e)})})),document.addEventListener("pointerup",(e=>{ze({kind:p.POINTER_UP,pointer:_e(e)})})),document.addEventListener("wheel",(e=>{e.preventDefault(),ze({kind:p.WHEEL,x:e.clientX,y:e.clientY,deltaY:e.deltaY})}),{passive:!1}),document.addEventListener("contextmenu",(e=>{e.preventDefault()})),document.addEventListener("touchend",(()=>{document.body.requestFullscreen()})),document.addEventListener("keydown",(e=>{e.preventDefault(),ze({kind:p.KEYDOWN,key:e.key})}));
//# sourceMappingURL=index.64fcf590.js.map

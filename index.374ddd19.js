const r={graph:{numbers:{xs:[],ys:[],literals:[]},calls:{xs:[],ys:[],names:[],arguments:[]}},cursor:{x:50*Math.round(window.innerWidth/2/50)-25,y:50*Math.round(window.innerHeight/2/50)-25},grid:50,repeat:""},e=document.querySelector("#gl");e.width=window.innerWidth,e.height=window.innerHeight;const a=e.getContext("webgl2");a.enable(a.BLEND),a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);const t=document.querySelector("#text");t.width=window.innerWidth,t.height=window.innerHeight;const n=t.getContext("2d"),i=(r,e,a)=>{const t=r.createShader(e);r.shaderSource(t,a),r.compileShader(t);if(r.getShaderParameter(t,r.COMPILE_STATUS))return t;console.log(r.getShaderInfoLog(t)),r.deleteShader(t)},o=i(a,a.VERTEX_SHADER,"#version 300 es\n\nin vec2 a_position;\n\nuniform vec2 u_resolution;\n\nvoid main() {\n  vec2 zeroToOne = a_position / u_resolution;\n  vec2 zeroToTwo = zeroToOne * 2.0;\n  vec2 clipSpace = zeroToTwo - 1.0;\n  gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n}\n"),s=i(a,a.FRAGMENT_SHADER,"#version 300 es\n\nprecision highp float;\n\nuniform vec4 u_color;\n\nout vec4 outColor;\n\nvoid main() {\n  outColor = u_color;\n}\n"),c=((r,e,a)=>{const t=r.createProgram();r.attachShader(t,e),r.attachShader(t,a),r.linkProgram(t);if(r.getProgramParameter(t,r.LINK_STATUS))return t;console.log(r.getProgramInfoLog(t)),r.deleteProgram(t)})(a,o,s),d=a.getAttribLocation(c,"a_position"),h=a.createBuffer(),l=a.createVertexArray();a.bindVertexArray(l),a.enableVertexAttribArray(d),a.bindBuffer(a.ARRAY_BUFFER,h);{const r=2,e=a.FLOAT,t=!1,n=0,i=0;a.vertexAttribPointer(d,r,e,t,n,i)}const u=r=>{const e=window.devicePixelRatio,{width:a,height:t}=r.getBoundingClientRect(),n=Math.round(a*e),i=Math.round(t*e),o=r.width!=n||r.height!=i;return o&&(r.width=n,r.height=i),o},g=a.getUniformLocation(c,"u_resolution");u(a.canvas),a.viewport(0,0,a.canvas.width,a.canvas.height),a.clearColor(.27,.35,.39,1),a.useProgram(c),a.uniform2f(g,a.canvas.width,a.canvas.height),a.bindVertexArray(l);const f=(r,e,a,t,n)=>{const i=e,o=e+t,s=a,c=a+n;r.bufferData(r.ARRAY_BUFFER,new Float32Array([i,s,o,s,i,c,i,c,o,s,o,c]),r.STATIC_DRAW)},w=a.getUniformLocation(c,"u_color"),m=a.TRIANGLES;a.clear(a.COLOR_BUFFER_BIT);const p=()=>{a.clear(a.COLOR_BUFFER_BIT),n.clearRect(0,0,t.width,t.height);for(let e=r.grid/2;e<t.width;e+=r.grid)f(a,e,0,1,t.height),a.uniform4f(w,1,1,1,.1),a.drawArrays(m,0,6);for(let e=r.grid/2;e<t.height;e+=r.grid)f(a,0,e,t.width,1),a.uniform4f(w,1,1,1,.1),a.drawArrays(m,0,6);var e,i;(e=r.graph.numbers).xs.map(((r,t)=>{const i=e.ys[t];f(a,r,i,200,40),a.uniform4f(w,.1,.46,.82,1),a.drawArrays(m,0,6),n.font="22px sans-serif",n.fillStyle="white",n.fillText("Number",r+5,i+28),f(a,r,i+40,200,65),a.uniform4f(w,.11,.19,.23,1),a.drawArrays(m,0,6),f(a,r,i+40,200,65),a.uniform4f(w,.11,.19,.23,1),a.drawArrays(m,0,6),f(a,r+180,i+55,10,10),a.uniform4f(w,.39,.64,1,1),a.drawArrays(m,0,6)})),(i=r.graph.calls).xs.map(((r,e)=>{const t=i.ys[e];f(a,r,t,200,40),a.uniform4f(w,.1,.46,.82,1),a.drawArrays(m,0,6),n.font="22px sans-serif",n.fillStyle="white",n.fillText("Add",r+5,t+28),f(a,r,t+40,200,65),a.uniform4f(w,.11,.19,.23,1),a.drawArrays(m,0,6),f(a,r+10,t+55,10,10),a.uniform4f(w,.39,.64,1,1),a.drawArrays(m,0,6),n.font="18px sans-serif",n.fillStyle="white",n.fillText("x",r+30,t+65),f(a,r+10,t+80,10,10),a.uniform4f(w,.39,.64,1,1),a.drawArrays(m,0,6),n.font="18px sans-serif",n.fillStyle="white",n.fillText("y",r+30,t+90),f(a,r+180,t+55,10,10),a.uniform4f(w,.39,.64,1,1),a.drawArrays(m,0,6),n.font="18px sans-serif",n.fillStyle="white",n.fillText("result",r+125,t+65)}));const o=r.cursor.x-100,s=r.cursor.y-52.5;f(a,o+100-15,s+52.5-1,30,2),a.uniform4f(w,1,1,1,1),a.drawArrays(m,0,6),f(a,o+100-1,s+52.5-15,2,30),a.uniform4f(w,1,1,1,1),a.drawArrays(m,0,6),requestAnimationFrame(p)};requestAnimationFrame(p),document.addEventListener("mousemove",(e=>{r.cursor.x=Math.round(e.clientX/r.grid)*r.grid-r.grid/2,r.cursor.y=Math.round(e.clientY/r.grid)*r.grid-r.grid/2}));const y=r=>{if(r.repeat.length>0){const e=parseInt(r.repeat);return r.repeat="",e}return 1};document.addEventListener("keypress",(e=>{switch(e.key){case"n":(a=r).graph.numbers.xs.push(a.cursor.x),a.graph.numbers.ys.push(a.cursor.y),a.graph.numbers.literals.push("");break;case"c":(r=>{r.graph.calls.xs.push(r.cursor.x),r.graph.calls.ys.push(r.cursor.y),r.graph.calls.names.push("Add"),r.graph.calls.arguments.push(["x","y"])})(r);break;case"h":r.cursor.x-=r.grid*y(r);break;case"j":r.cursor.y+=r.grid*y(r);break;case"k":r.cursor.y-=r.grid*y(r);break;case"l":r.cursor.x+=r.grid*y(r);break;case"0":r.repeat+="0";break;case"1":r.repeat+="1";break;case"2":r.repeat+="2";break;case"3":r.repeat+="3";break;case"4":r.repeat+="4";break;case"5":r.repeat+="5";break;case"6":r.repeat+="6";break;case"7":r.repeat+="7";break;case"8":r.repeat+="8";break;case"9":r.repeat+="9";break;default:console.log(e.key)}var a})),window.addEventListener("resize",(()=>{a.canvas.width=window.innerWidth,a.canvas.height=window.innerHeight,u(a.canvas),a.viewport(0,0,a.canvas.width,a.canvas.height),a.uniform2f(g,a.canvas.width,a.canvas.height),t.width=window.innerWidth,t.height=window.innerHeight}));
//# sourceMappingURL=index.374ddd19.js.map

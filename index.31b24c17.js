function t(t,e,i,n){Object.defineProperty(t,e,{get:i,set:n,enumerable:!0,configurable:!0})}var e={};t(e,"ECS",(()=>gt)),t(e,"Entity",(()=>ut)),t(e,"Renderer",(()=>r)),t(e,"systems",(()=>i)),t(e,"components",(()=>a)),t(e,"ui",(()=>G)),t(e,"Layers",(()=>W));var i={};t(i,"render",(()=>N)),t(i,"layout",(()=>Y)),t(i,"geometry",(()=>H));class n{constructor(t){const e=t.createShader(t.VERTEX_SHADER);t.shaderSource(e,"#version 300 es\n  uniform vec2 u_resolution;\n  uniform float u_devicePixelRatio;\n  uniform mat3 u_cameras[10];\n\n  layout(location = 0) in vec2 a_position;\n  layout(location = 1) in vec2 a_textureCoordinates;\n  layout(location = 2) in vec4 a_color;\n  layout(location = 3) in uint a_cameraIndex;\n\n  out vec2 v_textureCoordinates;\n  out vec4 v_color;\n\n  void main() {\n    mat3 camera = inverse(u_cameras[a_cameraIndex]);\n    vec3 position = camera * vec3(a_position.xy, 1);\n    vec2 zeroToOne = position.xy * u_devicePixelRatio / u_resolution;\n    vec2 zeroToTwo = zeroToOne * 2.0;\n    vec2 clipSpace = zeroToTwo - 1.0;\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n    v_textureCoordinates = a_textureCoordinates * u_devicePixelRatio;\n    v_color = a_color;\n  }\n  "),t.compileShader(e);const i=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(i,"#version 300 es\n  precision highp float;\n\n  uniform sampler2D u_texture;\n\n  in vec2 v_textureCoordinates;\n  in vec4 v_color;\n\n  out vec4 fragColor;\n  \n  vec4 hslToRgb(in vec4 hsl) {\n    float h = hsl.x / 360.0;\n    vec3 rgb = clamp(abs(mod(h * 6.0 + vec3(0.0,4.0,2.0), 6.0) - 3.0) - 1.0, 0.0, 1.0);\n    return vec4(hsl.z + hsl.y * (rgb - 0.5) * (1.0 - abs(2.0 * hsl.z - 1.0)), hsl.w);\n  }\n\n  void main() {\n    ivec2 size = textureSize(u_texture, 0);\n    vec2 coordinate = v_textureCoordinates / vec2(float(size.x), float(size.y));\n    fragColor = texture(u_texture, coordinate) * hslToRgb(v_color);\n  }\n  "),t.compileShader(i);const n=t.createProgram();t.attachShader(n,e),t.attachShader(n,i),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)||(console.log(t.getShaderInfoLog(e)),console.log(t.getShaderInfoLog(i))),t.useProgram(n);const s=t.createVertexArray();t.bindVertexArray(s),this.positionBuffer=t.createBuffer(),t.bindAttribLocation(n,0,"a_position"),t.enableVertexAttribArray(0),t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,0),this.textureCoordinatesBuffer=t.createBuffer(),t.bindAttribLocation(n,1,"a_textureCoordinates"),t.enableVertexAttribArray(1),t.bindBuffer(t.ARRAY_BUFFER,this.textureCoordinatesBuffer),t.vertexAttribPointer(1,2,t.FLOAT,!1,0,0),this.colorBuffer=t.createBuffer(),t.bindAttribLocation(n,2,"a_color"),t.enableVertexAttribArray(2),t.bindBuffer(t.ARRAY_BUFFER,this.colorBuffer),t.vertexAttribPointer(2,4,t.FLOAT,!1,0,0),this.cameraIndexBuffer=t.createBuffer(),t.bindAttribLocation(n,3,"a_cameraIndex"),t.enableVertexAttribArray(3),t.bindBuffer(t.ARRAY_BUFFER,this.cameraIndexBuffer),t.vertexAttribIPointer(3,1,t.UNSIGNED_BYTE,0,0),this.indexBuffer=t.createBuffer(),this.resolutionLocation=t.getUniformLocation(n,"u_resolution"),this.devicePixelRatioLocation=t.getUniformLocation(n,"u_devicePixelRatio"),this.cameraLocation=t.getUniformLocation(n,"u_cameras")}}class s{constructor(t,e,i,n){this.texture=t,this.metrics=e,this.fontFamily=i,this.fontSize=n,this.metric=t=>this.metrics[t.charCodeAt(0)]}}const o=(t,e,i,n)=>{const s=document.createElement("canvas"),o=s.getContext("2d"),r=Math.sqrt(256),a=(t=>{let e=1;for(;e<t;)e<<=1;return e})(n*r),c=a/r;s.width=a*window.devicePixelRatio,s.height=a*window.devicePixelRatio,s.style.width=`${a}px`,s.style.height=`${a}px`,o.scale(window.devicePixelRatio,window.devicePixelRatio),o.textAlign="left",o.textBaseline="top",o.font=i,o.fillStyle="white";const h=Array.from({length:256},((t,e)=>e)).map((t=>String.fromCharCode(t)));o.clearRect(0,0,o.canvas.width,o.canvas.height);const l=h.map(((t,e)=>{const i=o.measureText(t),s=Math.ceil(i.width),a=n,h=e%r*c,l=Math.floor(e/r)*c;return o.fillText(t,h,l),{x:h,y:l,width:s,height:a}}));return t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,s),t.generateMipmap(t.TEXTURE_2D),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),l};class r{constructor(t,e){const i=document.createElement("canvas"),s=i.getContext("webgl2");s.clearColor(0,0,0,1),s.enable(s.BLEND),s.blendFunc(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA),s.depthMask(!1),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),s.activeTexture(s.TEXTURE0),this.gl=s,this.canvas=i,this.program=new n(s),this.fontAtlasses=new Map,this.textures=[],this.devicePixelRatio=window.devicePixelRatio,this.setSize(t,e);const o=s.createTexture();s.bindTexture(s.TEXTURE_2D,o),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,1,1,0,s.RGBA,s.UNSIGNED_BYTE,new Uint8Array([255,255,255,255])),this.textures.push(o)}setSize=(t,e)=>{const{gl:i,canvas:n}=this;n.width=t*window.devicePixelRatio,n.height=e*window.devicePixelRatio,n.style.width=`${t}px`,n.style.height=`${e}px`,i.uniform2f(this.program.resolutionLocation,n.width,n.height),i.uniform1f(this.program.devicePixelRatioLocation,window.devicePixelRatio),i.viewport(0,0,n.width,n.height),this.width=t,this.height=e,this.devicePixelRatio!=window.devicePixelRatio&&(this.devicePixelRatio=window.devicePixelRatio,this.recreateFontAtlasses())};clear=()=>{const{gl:t}=this;t.clear(t.COLOR_BUFFER_BIT)};setCameras=t=>{const{gl:e}=this,i=[];for(const e of t)i.push(...e.data);e.uniformMatrix3fv(this.program.cameraLocation,!0,i)};draw=({vertices:t,colors:e,textureCoordinates:i,vertexIndices:n,cameraIndices:s})=>{const{gl:o,program:r}=this;o.bindBuffer(o.ARRAY_BUFFER,r.positionBuffer),o.bufferData(o.ARRAY_BUFFER,new Float32Array(t),o.STATIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,r.colorBuffer),o.bufferData(o.ARRAY_BUFFER,new Float32Array(e),o.STATIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,r.textureCoordinatesBuffer),o.bufferData(o.ARRAY_BUFFER,new Float32Array(i),o.STATIC_DRAW),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,r.indexBuffer),o.bufferData(o.ELEMENT_ARRAY_BUFFER,new Uint16Array(n),o.STATIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,r.cameraIndexBuffer),o.bufferData(o.ARRAY_BUFFER,new Uint8Array(s),o.STATIC_DRAW),o.drawElements(o.TRIANGLES,n.length,o.UNSIGNED_SHORT,0)};drawLines=({vertices:t,colors:e,textureCoordinates:i,cameraIndices:n})=>{const{gl:s,program:o}=this;s.bindBuffer(s.ARRAY_BUFFER,o.positionBuffer),s.bufferData(s.ARRAY_BUFFER,new Float32Array(t),s.STATIC_DRAW),s.bindBuffer(s.ARRAY_BUFFER,o.colorBuffer),s.bufferData(s.ARRAY_BUFFER,new Float32Array(e),s.STATIC_DRAW),s.bindBuffer(s.ARRAY_BUFFER,o.textureCoordinatesBuffer),s.bufferData(s.ARRAY_BUFFER,new Float32Array(i),s.STATIC_DRAW),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,o.indexBuffer),s.bindBuffer(s.ARRAY_BUFFER,o.cameraIndexBuffer),s.bufferData(s.ARRAY_BUFFER,new Uint8Array(n),s.STATIC_DRAW),s.drawArrays(s.LINES,0,t.length/2)};recreateFontAtlasses=()=>{for(const[t,e]of this.fontAtlasses){const i=this.textures[e.texture],n=o(this.gl,i,t,e.fontSize);e.metrics=n}};fontAtlas=(t,e)=>{const i=`${e}px ${t}`,n=this.fontAtlasses.get(i);if(n)return n;const{gl:r}=this,a=r.createTexture(),c=o(r,a,i,e),h=this.textures.length;this.textures.push(a);const l=new s(h,c,t,e);return this.fontAtlasses.set(i,l),l}}var a={};t(a,"UIRoot",(()=>c)),t(a,"Text",(()=>h)),t(a,"FontSize",(()=>l)),t(a,"FontFamily",(()=>d)),t(a,"Child",(()=>u)),t(a,"Children",(()=>g)),t(a,"Connections",(()=>f)),t(a,"Camera",(()=>w)),t(a,"Alignment",(()=>m)),t(a,"CrossAxisAlignment",(()=>A)),t(a,"Width",(()=>R)),t(a,"Height",(()=>y)),t(a,"Translate",(()=>p)),t(a,"From",(()=>v)),t(a,"To",(()=>E)),t(a,"Color",(()=>T)),t(a,"Padding",(()=>_)),t(a,"Constraints",(()=>B)),t(a,"Size",(()=>S)),t(a,"Offset",(()=>C)),t(a,"Layout",(()=>F)),t(a,"WorldSpace",(()=>b)),t(a,"Vertices",(()=>U)),t(a,"TextureCoordinates",(()=>I)),t(a,"Colors",(()=>D)),t(a,"VertexIndices",(()=>P)),t(a,"CameraIndices",(()=>L)),t(a,"Geometry",(()=>z));class c{constructor(t){this.entity=t}}class h{constructor(t){this.value=t}}class l{constructor(t){this.value=t}}class d{constructor(t){this.value=t}}class u{constructor(t){this.entity=t}}class g{constructor(t){this.entities=t}}class f{constructor(t){this.entities=t}}class w{constructor(t){this.entity=t}}let m;var x;(x=m||(m={}))[x.START=0]="START",x[x.CENTER=1]="CENTER",x[x.END=2]="END";class A{constructor(t){this.alignment=t}}class R{constructor(t){this.value=t}}class y{constructor(t){this.value=t}}class p{constructor(t,e){this.x=t,this.y=e}}class v{constructor(t){this.entity=t}}class E{constructor(t){this.entity=t}}class T{constructor({h:t,s:e,l:i,a:n}){this.h=t,this.s=e,this.l=i,this.a=n}}class _{constructor(t){this.value=t}}class B{constructor(t,e,i,n){this.minWidth=t,this.maxWidth=e,this.minHeight=i,this.maxHeight=n}}class S{constructor(t,e){this.width=t,this.height=e}}class C{constructor(t,e){this.x=t,this.y=e,this.add=t=>new C(this.x+t.x,this.y+t.y)}}class F{constructor(t){this.impl=t,this.layout=(t,e)=>this.impl(t,e)}}class b{constructor(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}}class U{constructor(t){this.data=t}}class I{constructor(t){this.data=t}}class D{constructor(t){this.data=t}}class P{constructor(t){this.data=t}}class L{constructor(t){this.data=t}}class z{constructor(t){this.impl=t,this.geometry=(t,e,i,n)=>this.impl(t,e,i,n)}}const N=t=>{const e=performance.now();Y(t);const i=H(t),n=t.get(r);n.setCameras(i.cameras),n.clear(),((t,e)=>{const{gl:i}=t;let n=[],s=[],o=[],r=[],a=[],c=-1;for(const h of e.layers)for(const[e,l]of h){e!=c&&(n.length&&(t.draw({vertices:n,colors:s,textureCoordinates:o,vertexIndices:r,cameraIndices:a}),n=[],s=[],o=[],r=[],a=[]),c=e,i.bindTexture(i.TEXTURE_2D,t.textures[e]));for(const t of l){const e=n.length/2;n.push(...t.get(U).data),s.push(...t.get(D).data),o.push(...t.get(I).data);for(const i of t.get(P).data)r.push(e+i);a.push(...t.get(L).data)}}0!=n.length&&t.draw({vertices:n,colors:s,textureCoordinates:o,vertexIndices:r,cameraIndices:a})})(n,i),((t,e)=>{const{gl:i}=t;let n=[],s=[],o=[],r=[];i.bindTexture(i.TEXTURE_2D,t.textures[0]);for(const t of e.lines)n.push(...t.get(U).data),s.push(...t.get(D).data),o.push(...t.get(I).data),r.push(...t.get(L).data);0!=n.length&&t.drawLines({vertices:n,colors:s,textureCoordinates:o,cameraIndices:r})})(n,i);return performance.now()-e},Y=t=>{const{width:e,height:i}=t.get(r),n=t.get(c).entity,s=new B(0,e,0,i);n.get(F).layout(n,s)};class M{constructor(t){this.data=t}static identity=()=>new M([1,0,0,0,1,0,0,0,1])}class W{constructor(){this.layers=[],this.lines=[],this.cameras=[M.identity()],this.activeCamera=0}pushAndSetActiveCamera=t=>{this.activeCamera=this.cameras.length,this.cameras.push(t)};push=({z:t,texture:e,entity:i})=>{for(let e=this.layers.length;e<t+1;++e)this.layers.push(new Map);const n=this.layers[t],s=n.get(e);s?s.push(i):n.set(e,[i])}}const H=t=>{const e=new W,i=t.get(c).entity;return i.get(z).geometry(i,new C(0,0),e,0),e};var G={};t(G,"text",(()=>k)),t(G,"center",(()=>q)),t(G,"column",(()=>J)),t(G,"row",(()=>tt)),t(G,"container",(()=>st)),t(G,"scene",(()=>lt)),t(G,"connection",(()=>at));const X=(t,e)=>{const i=((t,e)=>{const i=e.get(h).value,n=e.get(l).value,s=e.get(d).value,o=t.fontAtlas(s,n);let r=new S(0,0);for(const t of i){const e=o.metric(t);r.width+=e.width,r.height=Math.max(e.height,r.height)}return r})(t.ecs.get(r),t);return t.set(e,i,new C(0,0)),i},O=(t,e,i,n)=>{const{width:s,height:o}=t.get(S),a=e.add(t.get(C)),c=((t,e,i,n)=>{const s=e.get(h).value,o=e.get(l).value,r=e.get(d).value,{h:a,s:c,l:u,a:g}=e.get(T),f=t.fontAtlas(r,o);let w=0,m=0;const x=[],A=[],R=[],y=[];for(const t of s){const e=f.metric(t),n=i.x+w,s=n+e.width,o=i.y,r=o+e.height;x.push(n,o,n,r,s,o,s,r),A.push(e.x,e.y,e.x,e.y+e.height,e.x+e.width,e.y,e.x+e.width,e.y+e.height),R.push(a,c,u,g,a,c,u,g,a,c,u,g,a,c,u,g),y.push(m+0,m+1,m+2,m+1,m+2,m+3),w+=e.width,m+=4}return e.set(new U(x),new I(A),new D(R),new P(y),new L(Array(m).fill(n.activeCamera))),f.texture})(t.ecs.get(r),t,a,i);i.push({z:n,entity:t,texture:c}),t.set(new b(a.x,a.y,s,o))},k=(t,...e)=>{const[i,n]="string"==typeof e[0]?[{},e[0]]:[e[0],e[1]];return t.entity(new h(n),new l(i.fontSize??24),new d(i.fontFamily??"monospace"),new T(i.color??{h:0,s:1,l:1,a:1}),new F(X),new z(O))},V=(t,e)=>{const i=t.get(u).entity,n=i.get(F).layout(i,e);i.update(C,(t=>{t.x=e.maxWidth/2-n.width/2,t.y=e.maxHeight/2-n.height/2}));const s=new S(e.maxWidth,e.maxHeight);return t.set(e,s,new C(0,0)),s},$=(t,e,i,n)=>{const{width:s,height:o}=t.get(S),r=e.add(t.get(C)),a=t.get(u).entity;a.get(z).geometry(a,r,i,n),t.set(new b(r.x,r.y,s,o))},q=(t,e)=>t.entity(new F(V),new z($),new u(e)),K=(t,e)=>{let i=0,n=0;const s=t.get(g).entities;for(const t of s){const s=t.get(F).layout(t,e);t.update(C,(t=>t.y=n)),n+=s.height,i=Math.max(i,s.width)}switch(t.get(A).alignment){case m.START:break;case m.CENTER:for(const t of s){const e=t.get(S).width;t.update(C,(t=>t.x=i/2-e/2))}break;case m.END:for(const t of s){const e=t.get(S).width;t.update(C,(t=>t.x=i-e))}}const o=new S(i,n);return t.set(e,o,new C(0,0)),o},j=(t,e,i,n)=>{const{width:s,height:o}=t.get(S),r=e.add(t.get(C));for(const e of t.get(g).entities)e.get(z).geometry(e,r,i,n);t.set(new b(r.x,r.y,s,o))},J=(t,...e)=>{const[i,n]=e[0]instanceof Array?[{},e[0]]:[e[0],e[1]];return t.entity(new F(K),new z(j),new g(n),new A(i.crossAxisAlignment??m.START))},Q=(t,e)=>{let i=0,n=0;const s=t.get(g).entities;for(const t of s){const s=t.get(F).layout(t,e);t.update(C,(t=>t.x=i)),i+=s.width,n=Math.max(n,s.height)}switch(t.get(A).alignment){case m.START:break;case m.CENTER:for(const t of s){const e=t.get(S).height;t.update(C,(t=>t.y=n/2-e/2))}break;case m.END:for(const t of s){const e=t.get(S).height;t.update(C,(t=>t.y=n-e))}}const o=new S(i,n);return t.set(e,o,new C(0,0)),o},Z=(t,e,i,n)=>{const{width:s,height:o}=t.get(S),r=e.add(t.get(C));for(const e of t.get(g).entities)e.get(z).geometry(e,r,i,n);t.set(new b(r.x,r.y,s,o))},tt=(t,...e)=>{const[i,n]=e[0]instanceof Array?[{},e[0]]:[e[0],e[1]];return t.entity(new F(Q),new z(Z),new g(n),new A(i.crossAxisAlignment??m.START))},et=(t,e,i)=>Math.max(Math.min(t,i),e),it=(t,e)=>{const i=t.get(_).value,n=t.get(u),{x:s,y:o}=t.get(p),r=new C(s,o);if(n){const s=n.entity.get(F).layout(n.entity,e),o=new S(Math.min(e.maxWidth,s.width+2*i),Math.min(e.maxHeight,s.height+2*i));return n.entity.update(C,(t=>{t.x=i,t.y=i})),t.set(e,o,r),o}const a=new S(et(t.get(R).value,e.minWidth,e.maxWidth),et(t.get(y).value,e.minHeight,e.maxHeight));return t.set(e,a,r),a},nt=(t,e,i,n)=>{const s=e.add(t.get(C)),{width:o,height:r}=t.get(S),a=s.x,c=a+o,h=s.y,l=h+r,d=t.get(T);if(d){const{h:e,s:s,l:o,a:r}=d;t.set(new U([a,h,a,l,c,h,c,l]),new I([0,0,0,0,0,0,0,0]),new D([e,s,o,r,e,s,o,r,e,s,o,r,e,s,o,r]),new P([0,1,2,1,2,3]),new L(Array(4).fill(i.activeCamera))),i.push({z:n,texture:0,entity:t})}const g=t.get(u);g&&g.entity.get(z).geometry(g.entity,s,i,n),t.set(new b(a,h,o,r))},st=(t,e,i)=>{const n=t.entity(new F(it),new z(nt),new _(e.padding??0),new R(e.width??0),new y(e.height??0),new p(e.x??0,e.y??0));return e.color&&n.set(new T(e.color)),i&&n.set(new u(i)),n},ot=(t,e,i)=>{const n=e.x+e.width/2,s=e.y+e.height/2,o=n+50,r=s,a=i.x+i.width/2,c=i.y+i.height/2,h=a-50,l=c,d=[];let u=0,g=0;for(const e of t){const t=e*e,i=t*e,f=1-e,w=f*f,m=w*f,x=3*w*e,A=3*f*t,R=m*n+x*o+A*h+i*a,y=m*s+x*r+A*l+i*c;d.length?d.push(u,g):d.push(R,y),d.push(R,y),u=R,g=y}return d},rt=(t,e)=>{const i=((t,e,i)=>{const n=(e-t)/(i-1);return Array.from({length:i},((e,i)=>t+n*i))})(0,1,20),n=Array(80).fill(0);for(const s of t){const t=s.get(v).entity.get(b),o=s.get(E).entity.get(b),r=ot(i,t,o),{h:a,s:c,l:h,a:l}=s.get(T),d=[];for(let t=0;t<40;++t)d.push(a,c,h,l);s.set(new U(r),new I(n),new D(d),new L(Array(r.length/2).fill(e.activeCamera))),e.lines.push(s)}},at=(t,e)=>t.entity(new v(e.from),new E(e.to),new T(e.color??{h:0,s:1,l:1,a:1})),ct=(t,e)=>{for(const i of t.get(g).entities)i.get(F).layout(i,e);const i=new S(e.maxWidth,e.maxHeight);return t.set(e,i,new C(0,0)),i},ht=(t,e,i,n)=>{const{x:s,y:o}=t.get(w).entity.get(p);i.pushAndSetActiveCamera(new M([1,0,s,0,1,o,0,0,1]));const{width:r,height:a}=t.get(S),c=e.add(t.get(C));for(const e of t.get(g).entities)e.get(z).geometry(e,c,i,n);rt(t.get(f).entities,i),t.set(new b(c.x,c.y,r,a))},lt=(t,e)=>t.entity(new F(ct),new z(ht),new g(e.children),new f(e.connections),new w(e.camera));class dt{constructor(){this.clear()}get=t=>{const e=this.lookup.get(t.id);return null!=e?this.data[e]:void 0};hasId=t=>this.lookup.has(t);set=(t,e)=>{const i=this.lookup.get(t.id);if(i)return this.data[i]=e,void(this.inverses[i]=t.id);this.lookup.set(t.id,this.data.length),this.data.push(e),this.inverses.push(t.id)};clear=()=>{this.lookup=new Map,this.data=[],this.inverses=[]}}class ut{constructor(t,e){this.id=t,this.ecs=e,this.set=(...t)=>{for(const e of t){const t=e.constructor;let i=this.ecs.storages.get(t);i||(i=new dt,this.ecs.storages.set(t,i)),i.set(this,e)}return this},this.get=t=>{const e=this.ecs.storages.get(t);return e?e.get(this):void 0},this.update=(t,e)=>{const i=this.ecs.storages.get(t);if(!i)return;const n=i.get(this);n&&e(n)}}}class gt{constructor(){this.nextEntityId=0,this.storages=new Map,this.resources=new Map}entity=(...t)=>{const e=new ut(this.nextEntityId,this);return e.set(...t),++this.nextEntityId,e};query=function*(...t){const e=this.storages.get(t[0]);if(!e)return;const i=t.slice(1).map((t=>this.storages.get(t)));for(const t of e.inverses)i.every((e=>e.hasId(t)))&&(yield new ut(t,this))};set=(...t)=>{for(const e of t){const t=e.constructor;this.resources.set(t,e)}};get=t=>this.resources.get(t);unsetAll=t=>{const e=this.storages.get(t);e&&e.clear()}}const{ECS:ft,Renderer:wt}=e,{UIRoot:mt,Alignment:xt,Translate:At}=e.components,{text:Rt,center:yt,column:pt,row:vt,container:Et,scene:Tt,connection:_t}=e.ui,{render:Bt}=e.systems,St=new ft,Ct=new wt(window.innerWidth,window.innerHeight),Ft=Et(St,{width:18,height:18,color:{h:70,s:1,l:.7,a:1}}),bt=Et(St,{color:{h:110,s:1,l:.3,a:1},padding:10,x:25,y:200},pt(St,{crossAxisAlignment:xt.CENTER},[Et(St,{padding:5},Rt(St,"Source")),Et(St,{height:10}),vt(St,[pt(St,[vt(St,[Et(St,{width:18,height:18,color:{h:70,s:1,l:.7,a:1}}),Et(St,{width:5}),Et(St,{padding:2},Rt(St,{fontSize:18},"in 0"))]),vt(St,[Et(St,{width:18,height:18,color:{h:70,s:1,l:.7,a:1}}),Et(St,{width:5}),Et(St,{padding:2},Rt(St,{fontSize:18},"in 1"))])]),Et(St,{width:30}),pt(St,{crossAxisAlignment:xt.END},[vt(St,[Et(St,{padding:2},Rt(St,{fontSize:18},"out 0")),Et(St,{width:5}),Ft]),vt(St,[Et(St,{padding:2},Rt(St,{fontSize:18},"out 1")),Et(St,{width:5}),Et(St,{width:18,height:18,color:{h:70,s:1,l:.7,a:1}})])])])])),Ut=Et(St,{width:18,height:18,color:{h:170,s:1,l:.7,a:1}}),It=Et(St,{width:18,height:18,color:{h:170,s:1,l:.7,a:1}}),Dt=Et(St,{color:{h:210,s:1,l:.3,a:1},padding:10,x:300,y:100},pt(St,{crossAxisAlignment:xt.CENTER},[Et(St,{padding:5},Rt(St,"Transform")),Et(St,{height:10}),vt(St,[pt(St,[vt(St,[Ut,Et(St,{width:5}),Et(St,{padding:2},Rt(St,{fontSize:18},"in 0"))]),vt(St,[Et(St,{width:18,height:18,color:{h:170,s:1,l:.7,a:1}}),Et(St,{width:5}),Et(St,{padding:2},Rt(St,{fontSize:18},"in 1"))])]),Et(St,{width:30}),pt(St,{crossAxisAlignment:xt.END},[vt(St,[Et(St,{padding:2},Rt(St,{fontSize:18},"out 0")),Et(St,{width:5}),Et(St,{width:18,height:18,color:{h:170,s:1,l:.7,a:1}})]),vt(St,[Et(St,{padding:2},Rt(St,{fontSize:18},"out 1")),Et(St,{width:5}),It])])])])),Pt=Et(St,{width:18,height:18,color:{h:270,s:1,l:.7,a:1}}),Lt=Et(St,{color:{h:310,s:1,l:.3,a:1},padding:10,x:550,y:250},pt(St,{crossAxisAlignment:xt.CENTER},[Et(St,{padding:5},Rt(St,"Sink")),Et(St,{height:10}),vt(St,[pt(St,[vt(St,[Et(St,{width:18,height:18,color:{h:270,s:1,l:.7,a:1}}),Et(St,{width:5}),Et(St,{padding:2},Rt(St,{fontSize:18},"in 0"))]),vt(St,[Pt,Et(St,{width:5}),Et(St,{padding:2},Rt(St,{fontSize:18},"in 1"))])]),Et(St,{width:30}),pt(St,{crossAxisAlignment:xt.END},[vt(St,[Et(St,{padding:2},Rt(St,{fontSize:18},"out 0")),Et(St,{width:5}),Et(St,{width:18,height:18,color:{h:270,s:1,l:.7,a:1}})]),vt(St,[Et(St,{padding:2},Rt(St,{fontSize:18},"out 1")),Et(St,{width:5}),Et(St,{width:18,height:18,color:{h:270,s:1,l:.7,a:1}})])])])])),zt=St.entity(new At(0,0)),Nt=Tt(St,{camera:zt,children:[bt,Dt,Lt],connections:[_t(St,{from:Ft,to:Ut}),_t(St,{from:It,to:Pt})]});St.set(Ct,new mt(Nt)),console.log(Bt(St));let Yt=!1;document.addEventListener("mousedown",(()=>Yt=!0)),document.addEventListener("mousemove",(t=>{Yt&&(zt.update(At,(e=>{e.x-=t.movementX,e.y-=t.movementY})),console.log(Bt(St)))})),document.addEventListener("mouseup",(()=>Yt=!1)),window.addEventListener("resize",(()=>{Ct.setSize(window.innerWidth,window.innerHeight),console.log(Bt(St))})),document.body.appendChild(Ct.canvas);
//# sourceMappingURL=index.31b24c17.js.map

const e={graph:{numbers:{xs:[],ys:[],literals:[]},calls:{xs:[],ys:[],names:[],arguments:[]}},cursor:{x:50*Math.round(window.innerWidth/2/50)-25,y:50*Math.round(window.innerHeight/2/50)-25},grid:50,repeat:""},r=document.querySelector("#gl");r.width=window.innerWidth,r.height=window.innerHeight;const a=r.getContext("webgl2");a.enable(a.BLEND),a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);const n=document.querySelector("#text");n.width=window.innerWidth,n.height=window.innerHeight;const t=n.getContext("2d"),i=(e,r,a)=>{const n=e.createShader(r);e.shaderSource(n,a),e.compileShader(n);if(e.getShaderParameter(n,e.COMPILE_STATUS))return n;console.log(e.getShaderInfoLog(n)),e.deleteShader(n)},o=i(a,a.VERTEX_SHADER,"#version 300 es\n\nin vec2 a_position;\n\nuniform vec2 u_resolution;\n\nvoid main() {\n  vec2 zeroToOne = a_position / u_resolution;\n  vec2 zeroToTwo = zeroToOne * 2.0;\n  vec2 clipSpace = zeroToTwo - 1.0;\n  gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n}\n"),s=i(a,a.FRAGMENT_SHADER,"#version 300 es\n\nprecision highp float;\n\nuniform vec4 u_color;\n\nout vec4 outColor;\n\nvoid main() {\n  outColor = u_color;\n}\n"),c=((e,r,a)=>{const n=e.createProgram();e.attachShader(n,r),e.attachShader(n,a),e.linkProgram(n);if(e.getProgramParameter(n,e.LINK_STATUS))return n;console.log(e.getProgramInfoLog(n)),e.deleteProgram(n)})(a,o,s),d=a.getAttribLocation(c,"a_position"),h=a.createBuffer(),l=a.createVertexArray();a.bindVertexArray(l),a.enableVertexAttribArray(d),a.bindBuffer(a.ARRAY_BUFFER,h);{const e=2,r=a.FLOAT,n=!1,t=0,i=0;a.vertexAttribPointer(d,e,r,n,t,i)}const u=e=>{const r=window.devicePixelRatio,{width:a,height:n}=e.getBoundingClientRect(),t=Math.round(a*r),i=Math.round(n*r),o=e.width!=t||e.height!=i;return o&&(e.width=t,e.height=i),o},g=a.getUniformLocation(c,"u_resolution");u(a.canvas),a.viewport(0,0,a.canvas.width,a.canvas.height),a.clearColor(.27,.35,.39,1),a.useProgram(c),a.uniform2f(g,a.canvas.width,a.canvas.height),a.bindVertexArray(l);const f=(e,r,a,n,t)=>{const i=r,o=r+n,s=a,c=a+t;e.bufferData(e.ARRAY_BUFFER,new Float32Array([i,s,o,s,i,c,i,c,o,s,o,c]),e.STATIC_DRAW)},w=a.getUniformLocation(c,"u_color"),m=a.TRIANGLES;a.clear(a.COLOR_BUFFER_BIT);const p=()=>{a.clear(a.COLOR_BUFFER_BIT),t.clearRect(0,0,n.width,n.height);for(let r=e.grid/2;r<n.width;r+=e.grid)f(a,r,0,1,n.height),a.uniform4f(w,1,1,1,.1),a.drawArrays(m,0,6);for(let r=e.grid/2;r<n.height;r+=e.grid)f(a,0,r,n.width,1),a.uniform4f(w,1,1,1,.1),a.drawArrays(m,0,6);var r,i;(r=e.graph.numbers).xs.map(((e,n)=>{const i=r.ys[n];f(a,e,i,200,40),a.uniform4f(w,.1,.46,.82,1),a.drawArrays(m,0,6),t.font="22px sans-serif",t.fillStyle="white",t.fillText("Number",e+5,i+28),f(a,e,i+40,200,65),a.uniform4f(w,.11,.19,.23,1),a.drawArrays(m,0,6),f(a,e,i+40,200,65),a.uniform4f(w,.11,.19,.23,1),a.drawArrays(m,0,6),f(a,e+180,i+55,10,10),a.uniform4f(w,.39,.64,1,1),a.drawArrays(m,0,6)})),(i=e.graph.calls).xs.map(((e,r)=>{const n=i.ys[r];f(a,e,n,200,40),a.uniform4f(w,.1,.46,.82,1),a.drawArrays(m,0,6),t.font="22px sans-serif",t.fillStyle="white",t.fillText("Add",e+5,n+28),f(a,e,n+40,200,65),a.uniform4f(w,.11,.19,.23,1),a.drawArrays(m,0,6),f(a,e+10,n+55,10,10),a.uniform4f(w,.39,.64,1,1),a.drawArrays(m,0,6),t.font="18px sans-serif",t.fillStyle="white",t.fillText("x",e+30,n+65),f(a,e+10,n+80,10,10),a.uniform4f(w,.39,.64,1,1),a.drawArrays(m,0,6),t.font="18px sans-serif",t.fillStyle="white",t.fillText("y",e+30,n+90),f(a,e+180,n+55,10,10),a.uniform4f(w,.39,.64,1,1),a.drawArrays(m,0,6),t.font="18px sans-serif",t.fillStyle="white",t.fillText("result",e+125,n+65)}));const o=e.cursor.x-100,s=e.cursor.y-52.5;f(a,o+100-15,s+52.5-1,30,2),a.uniform4f(w,1,1,1,1),a.drawArrays(m,0,6),f(a,o+100-1,s+52.5-15,2,30),a.uniform4f(w,1,1,1,1),a.drawArrays(m,0,6),requestAnimationFrame(p)};requestAnimationFrame(p),document.addEventListener("mousemove",(r=>{e.cursor.x=Math.round(r.clientX/e.grid)*e.grid-e.grid/2,e.cursor.y=Math.round(r.clientY/e.grid)*e.grid-e.grid/2}));const y=e=>{if(e.repeat.length>0){const r=parseInt(e.repeat);return e.repeat="",r}return 1};document.addEventListener("keypress",(r=>{switch(r.key){case"n":(a=e).graph.numbers.xs.push(a.cursor.x),a.graph.numbers.ys.push(a.cursor.y),a.graph.numbers.literals.push("");break;case"c":(e=>{e.graph.calls.xs.push(e.cursor.x),e.graph.calls.ys.push(e.cursor.y),e.graph.calls.names.push("Add"),e.graph.calls.arguments.push(["x","y"])})(e);break;case"h":e.cursor.x-=e.grid*y(e);break;case"j":e.cursor.y+=e.grid*y(e);break;case"k":e.cursor.y-=e.grid*y(e);break;case"l":e.cursor.x+=e.grid*y(e);break;case"0":e.repeat+="0";break;case"1":e.repeat+="1";break;case"2":e.repeat+="2";break;case"3":e.repeat+="3";break;case"4":e.repeat+="4";break;case"5":e.repeat+="5";break;case"6":e.repeat+="6";break;case"7":e.repeat+="7";break;case"8":e.repeat+="8";break;case"9":e.repeat+="9";break;default:console.log(r.key)}var a})),window.addEventListener("resize",(()=>{a.canvas.width=window.innerWidth,a.canvas.height=window.innerHeight,u(a.canvas),a.viewport(0,0,a.canvas.width,a.canvas.height),a.uniform2f(g,a.canvas.width,a.canvas.height),n.width=window.innerWidth,n.height=window.innerHeight})),console.log("helo");
//# sourceMappingURL=index.98006895.js.map

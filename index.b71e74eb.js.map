{"mappings":"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MAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QAChB,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QAChB,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QAChB,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QAChB,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QAChB,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QAChB,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QAChB,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QAChB,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QAChB,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QAChB,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QAChB,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QAChB,MAAM,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG;QAC7C,MAAM,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG;QAC7C,MAAM,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG;QAC7C,MAAM,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG;QAC7C,MAAM,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG;QAC7C,MAAM,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG;QAC7C,MAAM,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG;QAC7C,MAAM,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG;QAC7C,MAAM,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG;QAC7C,OAAO;YACH,GAAG;YAAE,GAAG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","sources":["node_modules/@parcel/runtime-browser-hmr/lib/runtime-74a92386c515f27c.js","src/index.ts","src/update/index.ts","src/fuzzy_find.ts","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","src/linear_algebra/matrix3x3.ts","src/linear_algebra/vector3.ts","src/model/focus.ts","src/model/pointer_action.ts","src/update/graph.ts","src/update/quick_select.ts","src/model/quick_select.ts","src/update/focus.ts","src/update/move_camera.ts","src/update/move_node.ts","src/ui/run.ts","src/ui/pointer_down.ts","src/ui/render.ts","src/ui/batch_geometry.ts","src/ui/camera_stack.ts","src/ui/reduce.ts","src/ui/index.ts","src/ui/center.ts","src/ui/column.ts","src/ui/alignment.ts","src/ui/container.ts","src/ui/row.ts","src/ui/scene.ts","src/ui/stack.ts","src/ui/text.ts","src/ui/reducer.ts","src/ui/gather_on_click_handlers.ts","src/ui/id_to_world_space.ts","src/ui/layer_geometry.ts","src/ui/gather_connections.ts","src/ui/webgl2.ts","src/view/index.ts","src/view/context_menu.ts","src/model/demo.ts","src/model/empty.ts","src/model/graph.ts","node_modules/@parcel/runtime-js/lib/runtime-58bb97482fadd5c1.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js"],"sourcesContent":["var HMR_HOST = null;var HMR_PORT = null;var HMR_SECURE = false;var HMR_ENV_HASH = \"d6ea1d42532a7575\";module.bundle.HMR_BUNDLE_ID = \"5c1b77e3b71e74eb\";\"use strict\";\n\n/* global HMR_HOST, HMR_PORT, HMR_ENV_HASH, HMR_SECURE, chrome, browser, globalThis, __parcel__import__, __parcel__importScripts__, ServiceWorkerGlobalScope */\n\n/*::\nimport type {\n  HMRAsset,\n  HMRMessage,\n} from '@parcel/reporter-dev-server/src/HMRServer.js';\ninterface ParcelRequire {\n  (string): mixed;\n  cache: {|[string]: ParcelModule|};\n  hotData: mixed;\n  Module: any;\n  parent: ?ParcelRequire;\n  isParcelRequire: true;\n  modules: {|[string]: [Function, {|[string]: string|}]|};\n  HMR_BUNDLE_ID: string;\n  root: ParcelRequire;\n}\ninterface ParcelModule {\n  hot: {|\n    data: mixed,\n    accept(cb: (Function) => void): void,\n    dispose(cb: (mixed) => void): void,\n    // accept(deps: Array<string> | string, cb: (Function) => void): void,\n    // decline(): void,\n    _acceptCallbacks: Array<(Function) => void>,\n    _disposeCallbacks: Array<(mixed) => void>,\n  |};\n}\ninterface ExtensionContext {\n  runtime: {|\n    reload(): void,\n    getURL(url: string): string;\n    getManifest(): {manifest_version: number, ...};\n  |};\n}\ndeclare var module: {bundle: ParcelRequire, ...};\ndeclare var HMR_HOST: string;\ndeclare var HMR_PORT: string;\ndeclare var HMR_ENV_HASH: string;\ndeclare var HMR_SECURE: boolean;\ndeclare var chrome: ExtensionContext;\ndeclare var browser: ExtensionContext;\ndeclare var __parcel__import__: (string) => Promise<void>;\ndeclare var __parcel__importScripts__: (string) => Promise<void>;\ndeclare var globalThis: typeof self;\ndeclare var ServiceWorkerGlobalScope: Object;\n*/\nvar OVERLAY_ID = '__parcel__error__overlay__';\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n  module.bundle.hotData = undefined;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets\n/*: {|[string]: boolean|} */\n, acceptedAssets\n/*: {|[string]: boolean|} */\n, assetsToAccept\n/*: Array<[ParcelRequire, string]> */\n;\n\nfunction getHostname() {\n  return HMR_HOST || (location.protocol.indexOf('http') === 0 ? location.hostname : 'localhost');\n}\n\nfunction getPort() {\n  return HMR_PORT || location.port;\n} // eslint-disable-next-line no-redeclare\n\n\nvar parent = module.bundle.parent;\n\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = getHostname();\n  var port = getPort();\n  var protocol = HMR_SECURE || location.protocol == 'https:' && !/localhost|127.0.0.1|0.0.0.0/.test(hostname) ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + (port ? ':' + port : '') + '/'); // Web extension context\n\n  var extCtx = typeof chrome === 'undefined' ? typeof browser === 'undefined' ? null : browser : chrome; // Safari doesn't support sourceURL in error stacks.\n  // eval may also be disabled via CSP, so do a quick check.\n\n  var supportsSourceURL = false;\n\n  try {\n    (0, eval)('throw new Error(\"test\"); //# sourceURL=test.js');\n  } catch (err) {\n    supportsSourceURL = err.stack.includes('test.js');\n  } // $FlowFixMe\n\n\n  ws.onmessage = async function (event\n  /*: {data: string, ...} */\n  ) {\n    checkedAssets = {}\n    /*: {|[string]: boolean|} */\n    ;\n    acceptedAssets = {}\n    /*: {|[string]: boolean|} */\n    ;\n    assetsToAccept = [];\n    var data\n    /*: HMRMessage */\n    = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      // Remove error overlay if there is one\n      if (typeof document !== 'undefined') {\n        removeErrorOverlay();\n      }\n\n      let assets = data.assets.filter(asset => asset.envHash === HMR_ENV_HASH); // Handle HMR Update\n\n      let handled = assets.every(asset => {\n        return asset.type === 'css' || asset.type === 'js' && hmrAcceptCheck(module.bundle.root, asset.id, asset.depsByBundle);\n      });\n\n      if (handled) {\n        console.clear(); // Dispatch custom event so other runtimes (e.g React Refresh) are aware.\n\n        if (typeof window !== 'undefined' && typeof CustomEvent !== 'undefined') {\n          window.dispatchEvent(new CustomEvent('parcelhmraccept'));\n        }\n\n        await hmrApplyUpdates(assets);\n\n        for (var i = 0; i < assetsToAccept.length; i++) {\n          var id = assetsToAccept[i][1];\n\n          if (!acceptedAssets[id]) {\n            hmrAcceptRun(assetsToAccept[i][0], id);\n          }\n        }\n      } else fullReload();\n    }\n\n    if (data.type === 'error') {\n      // Log parcel errors to console\n      for (let ansiDiagnostic of data.diagnostics.ansi) {\n        let stack = ansiDiagnostic.codeframe ? ansiDiagnostic.codeframe : ansiDiagnostic.stack;\n        console.error('🚨 [parcel]: ' + ansiDiagnostic.message + '\\n' + stack + '\\n\\n' + ansiDiagnostic.hints.join('\\n'));\n      }\n\n      if (typeof document !== 'undefined') {\n        // Render the fancy html overlay\n        removeErrorOverlay();\n        var overlay = createErrorOverlay(data.diagnostics.html); // $FlowFixMe\n\n        document.body.appendChild(overlay);\n      }\n    }\n  };\n\n  ws.onerror = function (e) {\n    console.error(e.message);\n  };\n\n  ws.onclose = function () {\n    console.warn('[parcel] 🚨 Connection to the HMR server was lost');\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n\n  if (overlay) {\n    overlay.remove();\n    console.log('[parcel] ✨ Error resolved');\n  }\n}\n\nfunction createErrorOverlay(diagnostics) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n  let errorHTML = '<div style=\"background: black; opacity: 0.85; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; font-family: Menlo, Consolas, monospace; z-index: 9999;\">';\n\n  for (let diagnostic of diagnostics) {\n    let stack = diagnostic.frames.length ? diagnostic.frames.reduce((p, frame) => {\n      return `${p}\n<a href=\"/__parcel_launch_editor?file=${encodeURIComponent(frame.location)}\" style=\"text-decoration: underline; color: #888\" onclick=\"fetch(this.href); return false\">${frame.location}</a>\n${frame.code}`;\n    }, '') : diagnostic.stack;\n    errorHTML += `\n      <div>\n        <div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">\n          🚨 ${diagnostic.message}\n        </div>\n        <pre>${stack}</pre>\n        <div>\n          ${diagnostic.hints.map(hint => '<div>💡 ' + hint + '</div>').join('')}\n        </div>\n        ${diagnostic.documentation ? `<div>📝 <a style=\"color: violet\" href=\"${diagnostic.documentation}\" target=\"_blank\">Learn more</a></div>` : ''}\n      </div>\n    `;\n  }\n\n  errorHTML += '</div>';\n  overlay.innerHTML = errorHTML;\n  return overlay;\n}\n\nfunction fullReload() {\n  if ('reload' in location) {\n    location.reload();\n  } else if (extCtx && extCtx.runtime && extCtx.runtime.reload) {\n    extCtx.runtime.reload();\n  }\n}\n\nfunction getParents(bundle, id)\n/*: Array<[ParcelRequire, string]> */\n{\n  var modules = bundle.modules;\n\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n\n      if (dep === id || Array.isArray(dep) && dep[dep.length - 1] === id) {\n        parents.push([bundle, k]);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n\n  newLink.onload = function () {\n    if (link.parentNode !== null) {\n      // $FlowFixMe\n      link.parentNode.removeChild(link);\n    }\n  };\n\n  newLink.setAttribute('href', // $FlowFixMe\n  link.getAttribute('href').split('?')[0] + '?' + Date.now()); // $FlowFixMe\n\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\n\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n\n    for (var i = 0; i < links.length; i++) {\n      // $FlowFixMe[incompatible-type]\n      var href\n      /*: string */\n      = links[i].getAttribute('href');\n      var hostname = getHostname();\n      var servedFromHMRServer = hostname === 'localhost' ? new RegExp('^(https?:\\\\/\\\\/(0.0.0.0|127.0.0.1)|localhost):' + getPort()).test(href) : href.indexOf(hostname + ':' + getPort());\n      var absolute = /^https?:\\/\\//i.test(href) && href.indexOf(location.origin) !== 0 && !servedFromHMRServer;\n\n      if (!absolute) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nfunction hmrDownload(asset) {\n  if (asset.type === 'js') {\n    if (typeof document !== 'undefined') {\n      let script = document.createElement('script');\n      script.src = asset.url + '?t=' + Date.now();\n\n      if (asset.outputFormat === 'esmodule') {\n        script.type = 'module';\n      }\n\n      return new Promise((resolve, reject) => {\n        var _document$head;\n\n        script.onload = () => resolve(script);\n\n        script.onerror = reject;\n        (_document$head = document.head) === null || _document$head === void 0 ? void 0 : _document$head.appendChild(script);\n      });\n    } else if (typeof importScripts === 'function') {\n      // Worker scripts\n      if (asset.outputFormat === 'esmodule') {\n        return __parcel__import__(asset.url + '?t=' + Date.now());\n      } else {\n        return new Promise((resolve, reject) => {\n          try {\n            __parcel__importScripts__(asset.url + '?t=' + Date.now());\n\n            resolve();\n          } catch (err) {\n            reject(err);\n          }\n        });\n      }\n    }\n  }\n}\n\nasync function hmrApplyUpdates(assets) {\n  global.parcelHotUpdate = Object.create(null);\n  let scriptsToRemove;\n\n  try {\n    // If sourceURL comments aren't supported in eval, we need to load\n    // the update from the dev server over HTTP so that stack traces\n    // are correct in errors/logs. This is much slower than eval, so\n    // we only do it if needed (currently just Safari).\n    // https://bugs.webkit.org/show_bug.cgi?id=137297\n    // This path is also taken if a CSP disallows eval.\n    if (!supportsSourceURL) {\n      let promises = assets.map(asset => {\n        var _hmrDownload;\n\n        return (_hmrDownload = hmrDownload(asset)) === null || _hmrDownload === void 0 ? void 0 : _hmrDownload.catch(err => {\n          // Web extension bugfix for Chromium\n          // https://bugs.chromium.org/p/chromium/issues/detail?id=1255412#c12\n          if (extCtx && extCtx.runtime && extCtx.runtime.getManifest().manifest_version == 3) {\n            if (typeof ServiceWorkerGlobalScope != 'undefined' && global instanceof ServiceWorkerGlobalScope) {\n              extCtx.runtime.reload();\n              return;\n            }\n\n            asset.url = extCtx.runtime.getURL('/__parcel_hmr_proxy__?url=' + encodeURIComponent(asset.url + '?t=' + Date.now()));\n            return hmrDownload(asset);\n          }\n\n          throw err;\n        });\n      });\n      scriptsToRemove = await Promise.all(promises);\n    }\n\n    assets.forEach(function (asset) {\n      hmrApply(module.bundle.root, asset);\n    });\n  } finally {\n    delete global.parcelHotUpdate;\n\n    if (scriptsToRemove) {\n      scriptsToRemove.forEach(script => {\n        if (script) {\n          var _document$head2;\n\n          (_document$head2 = document.head) === null || _document$head2 === void 0 ? void 0 : _document$head2.removeChild(script);\n        }\n      });\n    }\n  }\n}\n\nfunction hmrApply(bundle\n/*: ParcelRequire */\n, asset\n/*:  HMRAsset */\n) {\n  var modules = bundle.modules;\n\n  if (!modules) {\n    return;\n  }\n\n  if (asset.type === 'css') {\n    reloadCSS();\n  } else if (asset.type === 'js') {\n    let deps = asset.depsByBundle[bundle.HMR_BUNDLE_ID];\n\n    if (deps) {\n      if (modules[asset.id]) {\n        // Remove dependencies that are removed and will become orphaned.\n        // This is necessary so that if the asset is added back again, the cache is gone, and we prevent a full page reload.\n        let oldDeps = modules[asset.id][1];\n\n        for (let dep in oldDeps) {\n          if (!deps[dep] || deps[dep] !== oldDeps[dep]) {\n            let id = oldDeps[dep];\n            let parents = getParents(module.bundle.root, id);\n\n            if (parents.length === 1) {\n              hmrDelete(module.bundle.root, id);\n            }\n          }\n        }\n      }\n\n      if (supportsSourceURL) {\n        // Global eval. We would use `new Function` here but browser\n        // support for source maps is better with eval.\n        (0, eval)(asset.output);\n      } // $FlowFixMe\n\n\n      let fn = global.parcelHotUpdate[asset.id];\n      modules[asset.id] = [fn, deps];\n    } else if (bundle.parent) {\n      hmrApply(bundle.parent, asset);\n    }\n  }\n}\n\nfunction hmrDelete(bundle, id) {\n  let modules = bundle.modules;\n\n  if (!modules) {\n    return;\n  }\n\n  if (modules[id]) {\n    // Collect dependencies that will become orphaned when this module is deleted.\n    let deps = modules[id][1];\n    let orphans = [];\n\n    for (let dep in deps) {\n      let parents = getParents(module.bundle.root, deps[dep]);\n\n      if (parents.length === 1) {\n        orphans.push(deps[dep]);\n      }\n    } // Delete the module. This must be done before deleting dependencies in case of circular dependencies.\n\n\n    delete modules[id];\n    delete bundle.cache[id]; // Now delete the orphans.\n\n    orphans.forEach(id => {\n      hmrDelete(module.bundle.root, id);\n    });\n  } else if (bundle.parent) {\n    hmrDelete(bundle.parent, id);\n  }\n}\n\nfunction hmrAcceptCheck(bundle\n/*: ParcelRequire */\n, id\n/*: string */\n, depsByBundle\n/*: ?{ [string]: { [string]: string } }*/\n) {\n  if (hmrAcceptCheckOne(bundle, id, depsByBundle)) {\n    return true;\n  } // Traverse parents breadth first. All possible ancestries must accept the HMR update, or we'll reload.\n\n\n  let parents = getParents(module.bundle.root, id);\n  let accepted = false;\n\n  while (parents.length > 0) {\n    let v = parents.shift();\n    let a = hmrAcceptCheckOne(v[0], v[1], null);\n\n    if (a) {\n      // If this parent accepts, stop traversing upward, but still consider siblings.\n      accepted = true;\n    } else {\n      // Otherwise, queue the parents in the next level upward.\n      let p = getParents(module.bundle.root, v[1]);\n\n      if (p.length === 0) {\n        // If there are no parents, then we've reached an entry without accepting. Reload.\n        accepted = false;\n        break;\n      }\n\n      parents.push(...p);\n    }\n  }\n\n  return accepted;\n}\n\nfunction hmrAcceptCheckOne(bundle\n/*: ParcelRequire */\n, id\n/*: string */\n, depsByBundle\n/*: ?{ [string]: { [string]: string } }*/\n) {\n  var modules = bundle.modules;\n\n  if (!modules) {\n    return;\n  }\n\n  if (depsByBundle && !depsByBundle[bundle.HMR_BUNDLE_ID]) {\n    // If we reached the root bundle without finding where the asset should go,\n    // there's nothing to do. Mark as \"accepted\" so we don't reload the page.\n    if (!bundle.parent) {\n      return true;\n    }\n\n    return hmrAcceptCheck(bundle.parent, id, depsByBundle);\n  }\n\n  if (checkedAssets[id]) {\n    return true;\n  }\n\n  checkedAssets[id] = true;\n  var cached = bundle.cache[id];\n  assetsToAccept.push([bundle, id]);\n\n  if (!cached || cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n}\n\nfunction hmrAcceptRun(bundle\n/*: ParcelRequire */\n, id\n/*: string */\n) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n\n  if (cached && cached.hot) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n  cached = bundle.cache[id];\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      var assetsToAlsoAccept = cb(function () {\n        return getParents(module.bundle.root, id);\n      });\n\n      if (assetsToAlsoAccept && assetsToAccept.length) {\n        // $FlowFixMe[method-unbinding]\n        assetsToAccept.push.apply(assetsToAccept, assetsToAlsoAccept);\n      }\n    });\n  }\n\n  acceptedAssets[id] = true;\n}","import { EventKind, update } from \"./update\"\r\nimport { run, transformPointer } from \"./ui/run\"\r\nimport { view } from './view'\r\nimport { demoModel } from \"./model/demo\"\r\nimport { Document } from './ui/dom'\r\nimport { ProgramKind } from \"./ui/webgl2\"\r\n\r\nconst generateUUID = () => crypto.randomUUID()\r\nconst currentTime = () => performance.now()\r\n\r\nconst success_or_error = run({\r\n    model: demoModel({ width: window.innerWidth, height: window.innerHeight }, generateUUID),\r\n    view,\r\n    update,\r\n    window,\r\n    document: document as Document,\r\n    requestAnimationFrame,\r\n    setTimeout,\r\n    pointerDown: (dispatch, pointer) => {\r\n        dispatch({\r\n            kind: EventKind.POINTER_DOWN,\r\n            pointer\r\n        })\r\n    },\r\n    effects: { currentTime, generateUUID }\r\n})\r\n\r\nif (success_or_error.kind == ProgramKind.ERROR) {\r\n    throw success_or_error\r\n}\r\n\r\nconst dispatch = success_or_error.dispatch\r\n\r\nif (typeof PointerEvent.prototype.getCoalescedEvents === 'function') {\r\n    document.addEventListener('pointermove', (e) => {\r\n        e.getCoalescedEvents().forEach(p => {\r\n            dispatch({\r\n                kind: EventKind.POINTER_MOVE,\r\n                pointer: transformPointer(p)\r\n            })\r\n        })\r\n    })\r\n} else {\r\n    document.addEventListener('pointermove', p =>\r\n        dispatch({\r\n            kind: EventKind.POINTER_MOVE,\r\n            pointer: transformPointer(p)\r\n        })\r\n    )\r\n}\r\n\r\ndocument.addEventListener(\"pointerup\", p => {\r\n    dispatch({\r\n        kind: EventKind.POINTER_UP,\r\n        pointer: transformPointer(p)\r\n    })\r\n})\r\n\r\ndocument.addEventListener('wheel', e => {\r\n    e.preventDefault()\r\n    dispatch({\r\n        kind: EventKind.WHEEL,\r\n        position: { x: e.clientX, y: e.clientY },\r\n        deltaY: e.deltaY,\r\n    })\r\n}, { passive: false })\r\n\r\ndocument.addEventListener('contextmenu', e => {\r\n    e.preventDefault()\r\n})\r\n\r\ndocument.addEventListener('touchend', () => {\r\n    document.body.requestFullscreen()\r\n})\r\n\r\ndocument.addEventListener('keydown', e => {\r\n    if (e.ctrlKey) {\r\n        switch (e.key) {\r\n            case 'j':\r\n            case 'k':\r\n                e.preventDefault()\r\n        }\r\n    }\r\n    dispatch({\r\n        kind: EventKind.KEYDOWN,\r\n        key: e.key,\r\n        ctrl: e.ctrlKey\r\n    })\r\n})\r\n\r\ndocument.addEventListener('keyup', e => {\r\n    dispatch({\r\n        kind: EventKind.KEYUP,\r\n        key: e.key,\r\n        ctrl: e.ctrlKey\r\n    })\r\n})\r\n\r\nif ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.register(\r\n        new URL('service_worker.ts', import.meta.url),\r\n        { type: 'module' }\r\n    );\r\n}","import { fuzzyFind } from \"../fuzzy_find\"\r\nimport { multiplyMatrices, multiplyMatrixVector, scale, translate } from \"../linear_algebra/matrix3x3\"\r\nimport { length } from \"../linear_algebra/vector3\"\r\nimport { Effects, UpdateResult } from \"../ui/run\"\r\nimport { Model, NodePlacementLocation } from \"../model\"\r\nimport { Focus, FocusFinder, FocusKind } from '../model/focus'\r\nimport { PointerAction, PointerActionKind } from '../model/pointer_action'\r\nimport { GenerateUUID, Operation, Operations, Position, UUID } from '../model/graph'\r\nimport { Pointer } from \"../ui\"\r\nimport { addNode, changeBodyValue, changeNodePosition, removeInputEdge, removeNode, removeOutputEdges } from \"./graph\"\r\nimport { maybeTriggerQuickSelect, quickSelectInput, quickSelectOutput, quickSelectNode, quickSelectBody } from \"./quick_select\"\r\nimport { QuickSelectKind } from \"../model/quick_select\"\r\nimport { clearFocus, selectInput, selectOutput } from \"./focus\"\r\nimport { maybeStartMoveCamera, maybeStopMoveCamera, panCamera, zoomCamera } from \"./move_camera\"\r\nimport { maybeStartMoveNode, maybeStopMoveNode, moveNode } from \"./move_node\"\r\n\r\nexport enum EventKind {\r\n    POINTER_MOVE,\r\n    POINTER_DOWN,\r\n    POINTER_UP,\r\n    CLICKED_NODE,\r\n    WHEEL,\r\n    CLICKED_INPUT,\r\n    CLICKED_OUTPUT,\r\n    OPEN_FINDER_TIMEOUT,\r\n    KEYDOWN,\r\n    KEYUP,\r\n    VIRTUAL_KEYDOWN,\r\n    CLICKED_FINDER_OPTION,\r\n    CLICKED_BODY,\r\n    CLICKED_BACKGROUND,\r\n    DELETE_NODE,\r\n    DELETE_INPUT_EDGE,\r\n    DELETE_OUTPUT_EDGES,\r\n    PAN_CAMERA,\r\n    ZOOM_CAMERA,\r\n    MOVE_NODE,\r\n}\r\n\r\nexport interface PointerMove {\r\n    readonly kind: EventKind.POINTER_MOVE\r\n    readonly pointer: Pointer\r\n}\r\n\r\nexport interface PointerDown {\r\n    readonly kind: EventKind.POINTER_DOWN\r\n    readonly pointer: Pointer\r\n}\r\n\r\nexport interface PointerUp {\r\n    readonly kind: EventKind.POINTER_UP\r\n    readonly pointer: Pointer\r\n}\r\n\r\nexport interface ClickedNode {\r\n    readonly kind: EventKind.CLICKED_NODE\r\n    readonly node: UUID\r\n}\r\n\r\nexport interface Wheel {\r\n    readonly kind: EventKind.WHEEL\r\n    readonly position: Position\r\n    readonly deltaY: number\r\n}\r\n\r\nexport interface ClickedInput {\r\n    readonly kind: EventKind.CLICKED_INPUT\r\n    readonly input: UUID\r\n}\r\n\r\nexport interface ClickedOutput {\r\n    readonly kind: EventKind.CLICKED_OUTPUT\r\n    readonly output: UUID\r\n}\r\n\r\nexport interface OpenFinderTimeout {\r\n    readonly kind: EventKind.OPEN_FINDER_TIMEOUT\r\n}\r\n\r\nexport interface KeyUp {\r\n    readonly kind: EventKind.KEYUP\r\n    readonly key: string\r\n    readonly ctrl: boolean\r\n}\r\n\r\n\r\nexport interface KeyDown {\r\n    readonly kind: EventKind.KEYDOWN\r\n    readonly key: string\r\n    readonly ctrl: boolean\r\n}\r\n\r\nexport interface VirtualKeyDown {\r\n    readonly kind: EventKind.VIRTUAL_KEYDOWN\r\n    readonly key: string\r\n}\r\n\r\nexport interface ClickedFinderOption {\r\n    readonly kind: EventKind.CLICKED_FINDER_OPTION\r\n    readonly option: string\r\n}\r\n\r\nexport interface ClickedNumber {\r\n    readonly kind: EventKind.CLICKED_BODY,\r\n    readonly body: UUID\r\n}\r\n\r\nexport interface ClickedBackground {\r\n    readonly kind: EventKind.CLICKED_BACKGROUND,\r\n}\r\n\r\nexport interface DeleteNode {\r\n    readonly kind: EventKind.DELETE_NODE,\r\n    readonly node: UUID\r\n}\r\n\r\nexport interface DeleteInputEdge {\r\n    readonly kind: EventKind.DELETE_INPUT_EDGE,\r\n    readonly input: UUID\r\n}\r\n\r\nexport interface DeleteOutputEdges {\r\n    readonly kind: EventKind.DELETE_OUTPUT_EDGES,\r\n    readonly output: UUID\r\n}\r\n\r\nexport interface PanCamera {\r\n    readonly kind: EventKind.PAN_CAMERA,\r\n}\r\n\r\nexport interface ZoomCamera {\r\n    readonly kind: EventKind.ZOOM_CAMERA,\r\n}\r\n\r\nexport interface MoveNode {\r\n    readonly kind: EventKind.MOVE_NODE,\r\n}\r\n\r\n\r\nexport type AppEvent =\r\n    | PointerMove\r\n    | PointerDown\r\n    | PointerUp\r\n    | ClickedNode\r\n    | Wheel\r\n    | ClickedInput\r\n    | ClickedOutput\r\n    | OpenFinderTimeout\r\n    | KeyDown\r\n    | KeyUp\r\n    | VirtualKeyDown\r\n    | ClickedFinderOption\r\n    | ClickedNumber\r\n    | ClickedBackground\r\n    | DeleteNode\r\n    | DeleteInputEdge\r\n    | DeleteOutputEdges\r\n    | PanCamera\r\n    | ZoomCamera\r\n    | MoveNode\r\n\r\nconst pointerDown = (model: Model, event: PointerDown): UpdateResult<Model, AppEvent> => {\r\n    const pointers = [...model.pointers, event.pointer]\r\n    if (model.focus.kind !== FocusKind.NONE) {\r\n        return { model: { ...model, pointers } }\r\n    } else if (pointers.length > 1) {\r\n        const pointerAction: PointerAction = pointers.length === 2 ?\r\n            {\r\n                kind: PointerActionKind.ZOOM,\r\n                pointerCenter: { x: 0, y: 0 },\r\n                pointerDistance: 0\r\n            } :\r\n            { kind: PointerActionKind.NONE }\r\n        return {\r\n            model: {\r\n                ...model,\r\n                openFinderFirstClick: false,\r\n                focus: {\r\n                    kind: FocusKind.NONE,\r\n                    pointerAction,\r\n                    quickSelect: { kind: QuickSelectKind.NONE }\r\n                },\r\n                pointers\r\n            }\r\n        }\r\n    } else {\r\n        return {\r\n            model: {\r\n                ...model,\r\n                focus: {\r\n                    kind: FocusKind.NONE,\r\n                    pointerAction: { kind: PointerActionKind.PAN },\r\n                    quickSelect: { kind: QuickSelectKind.NONE }\r\n                },\r\n                pointers\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nconst pointerUp = (model: Model, event: PointerUp): UpdateResult<Model, AppEvent> => {\r\n    const pointers = model.pointers.filter(p => p.id !== event.pointer.id)\r\n    switch (model.focus.kind) {\r\n        case FocusKind.NONE:\r\n            switch (pointers.length) {\r\n                case 1: return {\r\n                    model: {\r\n                        ...model,\r\n                        pointers,\r\n                        focus: {\r\n                            kind: FocusKind.NONE,\r\n                            pointerAction: { kind: PointerActionKind.PAN },\r\n                            quickSelect: { kind: QuickSelectKind.NONE }\r\n                        },\r\n                    }\r\n                }\r\n                case 0: return {\r\n                    model: {\r\n                        ...model,\r\n                        pointers,\r\n                        focus: {\r\n                            kind: FocusKind.NONE,\r\n                            pointerAction: { kind: PointerActionKind.NONE },\r\n                            quickSelect: { kind: QuickSelectKind.NONE }\r\n                        },\r\n                    }\r\n                }\r\n                default: return { model: { ...model, pointers } }\r\n            }\r\n        case FocusKind.NODE:\r\n            if (pointers.length === 0) {\r\n                const focus: Focus = { ...model.focus, drag: false }\r\n                return { model: { ...model, pointers, focus } }\r\n            } else {\r\n                return { model: { ...model, pointers } }\r\n            }\r\n        default:\r\n            return { model: { ...model, pointers } }\r\n    }\r\n}\r\n\r\nexport const changeNth = <T>(xs: Readonly<T[]>, i: number, x: T): T[] =>\r\n    [...xs.slice(0, i), x, ...xs.slice(i + 1)]\r\n\r\nconst pointerMove = (model: Model, event: PointerMove): UpdateResult<Model, AppEvent> => {\r\n    const index = model.pointers.findIndex(p => p.id === event.pointer.id)\r\n    const pointer = model.pointers[index]\r\n    const pointers = index === -1 ? model.pointers : changeNth(model.pointers, index, event.pointer)\r\n    const nodePlacementLocation: NodePlacementLocation = {\r\n        x: event.pointer.position.x,\r\n        y: event.pointer.position.y,\r\n        show: false\r\n    }\r\n    switch (model.focus.kind) {\r\n        case FocusKind.NONE:\r\n            const previousPointerAction = model.focus.pointerAction\r\n            switch (previousPointerAction.kind) {\r\n                case PointerActionKind.NONE:\r\n                    const render = model.nodePlacementLocation.show ? true : undefined\r\n                    return { model: { ...model, nodePlacementLocation, pointers }, render }\r\n                case PointerActionKind.PAN:\r\n                    const dx = event.pointer.position.x - pointer.position.x\r\n                    const dy = event.pointer.position.y - pointer.position.y\r\n                    const camera = multiplyMatrices(model.camera, translate(-dx, -dy))\r\n                    return {\r\n                        model: { ...model, pointers, camera },\r\n                        render: true\r\n                    }\r\n                case PointerActionKind.ZOOM:\r\n                    const [p0, p1] = [pointers[0], pointers[1]]\r\n                    const { x: x1, y: y1 } = p0.position\r\n                    const { x: x2, y: y2 } = p1.position\r\n                    const x = (p0.position.x + p1.position.x) / 2\r\n                    const y = (p0.position.y + p1.position.y) / 2\r\n                    const pointerAction: PointerAction = {\r\n                        kind: PointerActionKind.ZOOM,\r\n                        pointerDistance: Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)),\r\n                        pointerCenter: { x, y },\r\n                    }\r\n                    const focus: Focus = {\r\n                        kind: FocusKind.NONE,\r\n                        pointerAction,\r\n                        quickSelect: { kind: QuickSelectKind.NONE }\r\n                    }\r\n                    if (previousPointerAction.pointerDistance > 0) {\r\n                        const move = translate(x, y)\r\n                        const zoom = Math.pow(2, (previousPointerAction.pointerDistance - pointerAction.pointerDistance) * 0.01)\r\n                        const moveBack = translate(-x, -y)\r\n                        const dx = x - previousPointerAction.pointerCenter.x\r\n                        const dy = y - previousPointerAction.pointerCenter.y\r\n                        const camera = multiplyMatrices(model.camera, move, scale(zoom, zoom), moveBack, translate(-dx, -dy))\r\n                        return {\r\n                            model: { ...model, focus, pointers, camera },\r\n                            render: true\r\n                        }\r\n                    } else {\r\n                        return { model: { ...model, focus, pointers } }\r\n                    }\r\n            }\r\n        case FocusKind.NODE:\r\n            if (model.focus.drag) {\r\n                const dx = event.pointer.position.x - pointer.position.x\r\n                const dy = event.pointer.position.y - pointer.position.y\r\n                const scaling = length(multiplyMatrixVector(model.camera, [0, 1, 0]))\r\n                const graph = changeNodePosition(model.graph, model.focus.node, p => ({\r\n                    x: p.x + dx * scaling,\r\n                    y: p.y + dy * scaling,\r\n                }))\r\n                return {\r\n                    model: { ...model, pointers, graph },\r\n                    render: true\r\n                }\r\n            } else {\r\n                return { model: { ...model, pointers, nodePlacementLocation } }\r\n            }\r\n        case FocusKind.BODY:\r\n        case FocusKind.INPUT:\r\n        case FocusKind.OUTPUT:\r\n            return { model: { ...model, pointers, nodePlacementLocation } }\r\n        case FocusKind.FINDER:\r\n            return { model: { ...model, pointers } }\r\n    }\r\n}\r\n\r\nconst clickedNode = (model: Model, event: ClickedNode): UpdateResult<Model, AppEvent> => {\r\n    const nodeOrder = model.nodeOrder.filter(uuid => uuid !== event.node)\r\n    nodeOrder.push(event.node)\r\n    return {\r\n        model: {\r\n            ...model,\r\n            focus: {\r\n                kind: FocusKind.NODE,\r\n                node: event.node,\r\n                drag: true,\r\n                quickSelect: { kind: QuickSelectKind.NONE },\r\n                move: { left: false, up: false, down: false, right: false, now: 0 }\r\n            },\r\n            nodeOrder\r\n        },\r\n        render: true\r\n    }\r\n}\r\n\r\nconst wheel = (model: Model, event: Wheel): UpdateResult<Model, AppEvent> => {\r\n    const move = translate(event.position.x, event.position.y)\r\n    const zoom = Math.pow(2, event.deltaY * 0.01)\r\n    const moveBack = translate(-event.position.x, -event.position.y)\r\n    const camera = multiplyMatrices(model.camera, move, scale(zoom, zoom), moveBack)\r\n    return {\r\n        model: { ...model, camera },\r\n        render: true\r\n    }\r\n}\r\n\r\nconst clickedInput = (model: Model, event: ClickedInput, generateUUID: GenerateUUID): UpdateResult<Model, AppEvent> =>\r\n    selectInput(model, event.input, generateUUID)\r\n\r\nconst clickedOutput = (model: Model, event: ClickedOutput, generateUUID: GenerateUUID): UpdateResult<Model, AppEvent> =>\r\n    selectOutput(model, event.output, generateUUID)\r\n\r\nconst openFinderTimeout = (model: Model, _: OpenFinderTimeout): UpdateResult<Model, AppEvent> => ({\r\n    model: {\r\n        ...model,\r\n        openFinderFirstClick: false\r\n    }\r\n})\r\n\r\nconst finderOptions = (operations: Operations, search: string): string[] =>\r\n    Object.keys(operations)\r\n        .filter(item => fuzzyFind({ haystack: item, needle: search }))\r\n\r\nexport const openFinder = (model: Model): Model => ({\r\n    ...model,\r\n    focus: {\r\n        kind: FocusKind.FINDER,\r\n        search: '',\r\n        options: Object.keys(model.operations),\r\n        quickSelect: { kind: QuickSelectKind.NONE }\r\n    },\r\n    openFinderFirstClick: false,\r\n})\r\n\r\n\r\nconst insertOperationFromFinder = (model: Model, name: string, generateUUID: GenerateUUID): UpdateResult<Model, AppEvent> => {\r\n    const operation = model.operations[name]\r\n    const [x, y, _] = multiplyMatrixVector(\r\n        model.camera,\r\n        [model.nodePlacementLocation.x, model.nodePlacementLocation.y, 1]\r\n    )\r\n    const { model: nextModel } = addNodeToGraph({ model, operation, position: { x, y }, generateUUID })\r\n    return {\r\n        model: clearFocus(nextModel),\r\n        render: true\r\n    }\r\n}\r\n\r\nconst updateFinderSearch = (model: Model, focus: FocusFinder, transform: (search: string) => string): UpdateResult<Model, AppEvent> => {\r\n    const search = transform(focus.search)\r\n    return {\r\n        model: {\r\n            ...model,\r\n            focus: {\r\n                kind: FocusKind.FINDER,\r\n                options: finderOptions(model.operations, search),\r\n                search,\r\n                quickSelect: { kind: QuickSelectKind.NONE }\r\n            }\r\n        },\r\n        render: true\r\n    }\r\n}\r\n\r\nconst updateBodyValue = (model: Model, body: UUID, transform: (value: number) => number): UpdateResult<Model, AppEvent> => {\r\n    return {\r\n        model: {\r\n            ...model,\r\n            graph: changeBodyValue(model.graph, body, transform)\r\n        },\r\n        render: true\r\n    }\r\n}\r\n\r\ninterface AddNodeInputs {\r\n    model: Model\r\n    operation: Operation\r\n    position: Position\r\n    generateUUID: GenerateUUID\r\n}\r\n\r\ninterface AddNodeOutputs {\r\n    model: Model\r\n    node: UUID\r\n}\r\n\r\n\r\nexport const addNodeToGraph = ({ model, operation, position, generateUUID }: AddNodeInputs): AddNodeOutputs => {\r\n    const { graph, node } = addNode({ graph: model.graph, operation, position, generateUUID })\r\n    return {\r\n        model: {\r\n            ...model,\r\n            graph,\r\n            nodeOrder: [...model.nodeOrder, node]\r\n        },\r\n        node\r\n    }\r\n}\r\n\r\nexport const removeNodeFromGraph = (model: Model, node: UUID): Model => clearFocus({\r\n    ...model,\r\n    graph: removeNode(model.graph, node),\r\n    nodeOrder: model.nodeOrder.filter(n => n !== node),\r\n})\r\n\r\nconst keyDown = (model: Model, event: KeyDown, { generateUUID, currentTime }: Effects): UpdateResult<Model, AppEvent> => {\r\n    const { key } = event\r\n    switch (model.focus.quickSelect.kind) {\r\n        case QuickSelectKind.INPUT:\r\n            return quickSelectInput(model, model.focus.quickSelect, key, generateUUID)\r\n        case QuickSelectKind.OUTPUT:\r\n            return quickSelectOutput(model, model.focus.quickSelect, key, generateUUID)\r\n        case QuickSelectKind.NODE:\r\n            return quickSelectNode(model, model.focus.quickSelect, key)\r\n        case QuickSelectKind.BODY:\r\n            return quickSelectBody(model, model.focus.quickSelect, key)\r\n        case QuickSelectKind.NONE:\r\n            switch (model.focus.kind) {\r\n                case FocusKind.FINDER:\r\n                    switch (key) {\r\n                        case 'Backspace':\r\n                            return updateFinderSearch(model, model.focus, search => search.slice(0, -1))\r\n                        case 'Shift':\r\n                        case 'Alt':\r\n                        case 'Control':\r\n                        case 'Meta':\r\n                        case 'Tab':\r\n                            return { model }\r\n                        case 'Enter':\r\n                            if (model.focus.options.length > 0) {\r\n                                const name = model.focus.options[0]\r\n                                return insertOperationFromFinder(model, name, generateUUID)\r\n                            } else {\r\n                                return { model: clearFocus(model), render: true }\r\n                            }\r\n                        case 'Escape':\r\n                            return { model: clearFocus(model), render: true }\r\n                        default:\r\n                            return updateFinderSearch(model, model.focus, search => search + key)\r\n                    }\r\n                case FocusKind.BODY:\r\n                    switch (key) {\r\n                        case 'Backspace':\r\n                            return updateBodyValue(model, model.focus.body, value => {\r\n                                let newValue = value.toString().slice(0, -1)\r\n                                return newValue === '' ? 0 : parseFloat(newValue)\r\n                            })\r\n                        case '1':\r\n                        case '2':\r\n                        case '3':\r\n                        case '4':\r\n                        case '5':\r\n                        case '6':\r\n                        case '7':\r\n                        case '8':\r\n                        case '9':\r\n                        case '0':\r\n                            return updateBodyValue(model, model.focus.body, value => parseFloat(value.toString() + key))\r\n                        case 'Enter':\r\n                        case 'Escape':\r\n                            return {\r\n                                model: clearFocus(model),\r\n                                render: true\r\n                            }\r\n                        default:\r\n                            return maybeTriggerQuickSelect(model, model.focus, key)\r\n                    }\r\n                case FocusKind.NODE:\r\n                    switch (key) {\r\n                        case 'f':\r\n                            return { model: openFinder(model), render: true }\r\n                        case 'd':\r\n                        case 'Backspace':\r\n                        case 'Delete':\r\n                            return {\r\n                                model: removeNodeFromGraph(model, model.focus.node),\r\n                                render: true\r\n                            }\r\n                        case 'Escape':\r\n                            return { model: clearFocus(model), render: true }\r\n                        default:\r\n                            const result = maybeTriggerQuickSelect(model, model.focus, key)\r\n                            if (result.render) {\r\n                                return result\r\n                            } else {\r\n                                return maybeStartMoveNode(result.model, model.focus, key, currentTime)\r\n                            }\r\n                    }\r\n                case FocusKind.INPUT:\r\n                    switch (key) {\r\n                        case 'f':\r\n                            return { model: openFinder(model), render: true }\r\n                        case 'd':\r\n                        case 'Backspace':\r\n                        case 'Delete':\r\n                            return {\r\n                                model: clearFocus({\r\n                                    ...model,\r\n                                    graph: removeInputEdge(model.graph, model.focus.input),\r\n                                }),\r\n                                render: true\r\n                            }\r\n                        case 'Escape':\r\n                            return { model: clearFocus(model), render: true }\r\n                        default:\r\n                            return maybeTriggerQuickSelect(model, model.focus, key)\r\n                    }\r\n                case FocusKind.OUTPUT:\r\n                    switch (key) {\r\n                        case 'f':\r\n                            return { model: openFinder(model), render: true }\r\n                        case 'd':\r\n                        case 'Backspace':\r\n                        case 'Delete':\r\n                            return {\r\n                                model: clearFocus({\r\n                                    ...model,\r\n                                    graph: removeOutputEdges(model.graph, model.focus.output),\r\n                                }),\r\n                                render: true\r\n                            }\r\n                        case 'Escape':\r\n                            return { model: clearFocus(model), render: true }\r\n                        default:\r\n                            return maybeTriggerQuickSelect(model, model.focus, key)\r\n                    }\r\n                case FocusKind.NONE:\r\n                    if (key == 'f') {\r\n                        return { model: openFinder(model), render: true }\r\n                    } else {\r\n                        const result = maybeTriggerQuickSelect(model, model.focus, key)\r\n                        if (result.render) {\r\n                            return result\r\n                        } else {\r\n                            return maybeStartMoveCamera(result.model, event, currentTime)\r\n                        }\r\n                    }\r\n            }\r\n    }\r\n}\r\n\r\nconst keyUp = (model: Model, event: KeyUp): UpdateResult<Model, AppEvent> => {\r\n    switch (model.focus.kind) {\r\n        case FocusKind.NONE:\r\n            return maybeStopMoveCamera(model, event)\r\n        case FocusKind.NODE:\r\n            return maybeStopMoveNode(model, model.focus, event.key)\r\n        default:\r\n            return { model }\r\n    }\r\n}\r\n\r\nconst virtualKeyDown = (model: Model, { key }: VirtualKeyDown, generateUUID: GenerateUUID): UpdateResult<Model, AppEvent> => {\r\n    switch (model.focus.kind) {\r\n        case FocusKind.FINDER:\r\n            switch (key) {\r\n                case 'del':\r\n                    return updateFinderSearch(model, model.focus, search => search.slice(0, -1))\r\n                case 'sft':\r\n                    return { model }\r\n                case 'space':\r\n                    return updateFinderSearch(model, model.focus, search => search + ' ')\r\n                case 'ret':\r\n                    if (model.focus.options.length > 0) {\r\n                        const name = model.focus.options[0]\r\n                        return insertOperationFromFinder(model, name, generateUUID)\r\n                    } else {\r\n                        return { model: clearFocus(model), render: true }\r\n                    }\r\n                default:\r\n                    return updateFinderSearch(model, model.focus, search => search + key)\r\n            }\r\n        case FocusKind.BODY:\r\n            switch (key) {\r\n                case 'del':\r\n                    return updateBodyValue(model, model.focus.body, value => {\r\n                        let newValue = value.toString().slice(0, -1)\r\n                        return newValue === '' ? 0 : parseFloat(newValue)\r\n                    })\r\n                case '1':\r\n                case '2':\r\n                case '3':\r\n                case '4':\r\n                case '5':\r\n                case '6':\r\n                case '7':\r\n                case '8':\r\n                case '9':\r\n                case '0':\r\n                case '.':\r\n                    return updateBodyValue(model, model.focus.body, value => parseFloat(value.toString() + key))\r\n                case 'ret':\r\n                    return {\r\n                        model: clearFocus(model),\r\n                        render: true\r\n                    }\r\n                default:\r\n                    return { model }\r\n            }\r\n        default:\r\n            return { model }\r\n    }\r\n}\r\n\r\nconst clickedFinderOption = (model: Model, { option }: ClickedFinderOption, generateUUID: GenerateUUID): UpdateResult<Model, AppEvent> =>\r\n    insertOperationFromFinder(model, option, generateUUID)\r\n\r\nexport const openNumericKeyboard = (model: Model, body: UUID): Model => ({\r\n    ...model,\r\n    focus: {\r\n        kind: FocusKind.BODY,\r\n        body,\r\n        quickSelect: { kind: QuickSelectKind.NONE }\r\n    }\r\n})\r\n\r\nconst clickedNumber = (model: Model, { body }: ClickedNumber): UpdateResult<Model, AppEvent> => ({\r\n    model: openNumericKeyboard(clearFocus(model), body),\r\n    render: true\r\n})\r\n\r\nconst clickedBackground = (model: Model): UpdateResult<Model, AppEvent> => {\r\n    if (model.focus.kind === FocusKind.FINDER) {\r\n        return {\r\n            model: clearFocus(model),\r\n            render: true\r\n        }\r\n    } else if (model.openFinderFirstClick) {\r\n        const { x, y } = model.pointers[0].position\r\n        return {\r\n            model: openFinder({\r\n                ...model,\r\n                nodePlacementLocation: { x, y, show: false },\r\n            }),\r\n            render: true\r\n        }\r\n    } else {\r\n        const focus: Focus = model.focus.kind === FocusKind.NONE ? model.focus : {\r\n            kind: FocusKind.NONE,\r\n            pointerAction: { kind: PointerActionKind.PAN },\r\n            quickSelect: { kind: QuickSelectKind.NONE }\r\n        }\r\n        return {\r\n            model: {\r\n                ...model,\r\n                openFinderFirstClick: model.pointers.length == 1,\r\n                focus\r\n            },\r\n            schedule: [\r\n                { after: { milliseconds: 300 }, event: { kind: EventKind.OPEN_FINDER_TIMEOUT } }\r\n            ],\r\n            render: true\r\n        }\r\n    }\r\n}\r\n\r\nconst deleteNode = (model: Model, { node }: DeleteNode): UpdateResult<Model, AppEvent> => ({\r\n    model: removeNodeFromGraph(model, node),\r\n    render: true\r\n})\r\n\r\nconst deleteInputEdge = (model: Model, { input }: DeleteInputEdge): UpdateResult<Model, AppEvent> => ({\r\n    model: clearFocus({\r\n        ...model,\r\n        graph: removeInputEdge(model.graph, input),\r\n    }),\r\n    render: true\r\n})\r\n\r\nconst deleteOutputEdges = (model: Model, { output }: DeleteOutputEdges): UpdateResult<Model, AppEvent> => ({\r\n    model: clearFocus({\r\n        ...model,\r\n        graph: removeOutputEdges(model.graph, output),\r\n    }),\r\n    render: true\r\n})\r\n\r\nexport const update = (effects: Effects, model: Model, event: AppEvent): UpdateResult<Model, AppEvent> => {\r\n    switch (event.kind) {\r\n        case EventKind.POINTER_DOWN: return pointerDown(model, event)\r\n        case EventKind.POINTER_UP: return pointerUp(model, event)\r\n        case EventKind.POINTER_MOVE: return pointerMove(model, event)\r\n        case EventKind.CLICKED_NODE: return clickedNode(model, event)\r\n        case EventKind.WHEEL: return wheel(model, event)\r\n        case EventKind.CLICKED_INPUT: return clickedInput(model, event, effects.generateUUID)\r\n        case EventKind.CLICKED_OUTPUT: return clickedOutput(model, event, effects.generateUUID)\r\n        case EventKind.OPEN_FINDER_TIMEOUT: return openFinderTimeout(model, event)\r\n        case EventKind.KEYDOWN: return keyDown(model, event, effects)\r\n        case EventKind.KEYUP: return keyUp(model, event)\r\n        case EventKind.VIRTUAL_KEYDOWN: return virtualKeyDown(model, event, effects.generateUUID)\r\n        case EventKind.CLICKED_FINDER_OPTION: return clickedFinderOption(model, event, effects.generateUUID)\r\n        case EventKind.CLICKED_BODY: return clickedNumber(model, event)\r\n        case EventKind.CLICKED_BACKGROUND: return clickedBackground(model)\r\n        case EventKind.DELETE_NODE: return deleteNode(model, event)\r\n        case EventKind.DELETE_INPUT_EDGE: return deleteInputEdge(model, event)\r\n        case EventKind.DELETE_OUTPUT_EDGES: return deleteOutputEdges(model, event)\r\n        case EventKind.PAN_CAMERA: return panCamera(model, effects.currentTime)\r\n        case EventKind.ZOOM_CAMERA: return zoomCamera(model, effects.currentTime)\r\n        case EventKind.MOVE_NODE: return moveNode(model, effects.currentTime)\r\n    }\r\n}\r\n","export interface FuzzyFind {\r\n    haystack: string\r\n    needle: string\r\n}\r\n\r\nexport const fuzzyFind = ({ haystack, needle }: FuzzyFind): boolean => {\r\n    let haystackIndex = 0\r\n    let needleIndex = 0\r\n    while (needleIndex < needle.length) {\r\n        const n = needle[needleIndex].toLowerCase()\r\n        while (haystackIndex < haystack.length && n !== haystack[haystackIndex].toLowerCase()) {\r\n            ++haystackIndex\r\n        }\r\n        if (haystackIndex === haystack.length) return false\r\n        ++needleIndex\r\n    }\r\n    return true\r\n}\r\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (key === 'default' || key === '__esModule' || dest.hasOwnProperty(key)) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","import { Size } from \"../ui\"\r\nimport { Vector3 } from \"./vector3\"\r\n\r\nexport type Matrix3x3 = Readonly<number[]>\r\n\r\nexport const identity = (): Matrix3x3 => [\r\n    1, 0, 0,\r\n    0, 1, 0,\r\n    0, 0, 1,\r\n]\r\n\r\nexport const projection = ({ width, height }: Size): Matrix3x3 => [\r\n    2 / width, 0, -1,\r\n    0, -2 / height, 1,\r\n    0, 0, 1\r\n]\r\n\r\nexport const translate = (x: number, y: number): Matrix3x3 => [\r\n    1, 0, x,\r\n    0, 1, y,\r\n    0, 0, 1\r\n]\r\n\r\nexport const scale = (x: number, y: number): Matrix3x3 => [\r\n    x, 0, 0,\r\n    0, y, 0,\r\n    0, 0, 1\r\n]\r\n\r\nexport const rotate = (radians: number): Matrix3x3 => {\r\n    const c = Math.cos(radians)\r\n    const s = Math.sin(radians)\r\n    return [\r\n        c, s, 0,\r\n        -s, c, 0,\r\n        0, 0, 1\r\n    ]\r\n}\r\n\r\nexport const multiplyMatrices = (...matrices: Matrix3x3[]) => {\r\n    const [head, ...tail] = matrices\r\n    return tail.reduce((a, b) => {\r\n        const a11 = a[0]\r\n        const a12 = a[1]\r\n        const a13 = a[2]\r\n        const a21 = a[3]\r\n        const a22 = a[4]\r\n        const a23 = a[5]\r\n        const a31 = a[6]\r\n        const a32 = a[7]\r\n        const a33 = a[8]\r\n        const b11 = b[0]\r\n        const b12 = b[1]\r\n        const b13 = b[2]\r\n        const b21 = b[3]\r\n        const b22 = b[4]\r\n        const b23 = b[5]\r\n        const b31 = b[6]\r\n        const b32 = b[7]\r\n        const b33 = b[8]\r\n        const c11 = a11 * b11 + a12 * b21 + a13 * b31\r\n        const c12 = a11 * b12 + a12 * b22 + a13 * b32\r\n        const c13 = a11 * b13 + a12 * b23 + a13 * b33\r\n        const c21 = a21 * b11 + a22 * b21 + a23 * b31\r\n        const c22 = a21 * b12 + a22 * b22 + a23 * b32\r\n        const c23 = a21 * b13 + a22 * b23 + a23 * b33\r\n        const c31 = a31 * b11 + a32 * b21 + a33 * b31\r\n        const c32 = a31 * b12 + a32 * b22 + a33 * b32\r\n        const c33 = a31 * b13 + a32 * b23 + a33 * b33\r\n        return [\r\n            c11, c12, c13,\r\n            c21, c22, c23,\r\n            c31, c32, c33,\r\n        ]\r\n    }, head)\r\n}\r\n\r\nexport const multiplyMatrixVector = (a: Matrix3x3, b: Vector3): Vector3 => {\r\n    const a11 = a[0]\r\n    const a12 = a[1]\r\n    const a13 = a[2]\r\n    const a21 = a[3]\r\n    const a22 = a[4]\r\n    const a23 = a[5]\r\n    const a31 = a[6]\r\n    const a32 = a[7]\r\n    const a33 = a[8]\r\n    const b1 = b[0]\r\n    const b2 = b[1]\r\n    const b3 = b[2]\r\n    const c1 = a11 * b1 + a12 * b2 + a13 * b3\r\n    const c2 = a21 * b1 + a22 * b2 + a23 * b3\r\n    const c3 = a31 * b1 + a32 * b2 + a33 * b3\r\n    return [c1, c2, c3]\r\n}\r\n\r\nexport const inverse = (a: Matrix3x3): Matrix3x3 => {\r\n    const a11 = a[0]\r\n    const a12 = a[1]\r\n    const a13 = a[2]\r\n    const a21 = a[3]\r\n    const a22 = a[4]\r\n    const a23 = a[5]\r\n    const a31 = a[6]\r\n    const a32 = a[7]\r\n    const a33 = a[8]\r\n    const b11 = a22 * a33 - a23 * a32\r\n    const b12 = a21 * a33 - a23 * a31\r\n    const b13 = a21 * a32 - a22 * a31\r\n    const b21 = a12 * a33 - a13 * a32\r\n    const b22 = a11 * a33 - a13 * a31\r\n    const b23 = a11 * a32 - a12 * a31\r\n    const b31 = a12 * a23 - a13 * a22\r\n    const b32 = a11 * a23 - a13 * a21\r\n    const b33 = a11 * a22 - a12 * a21\r\n    const det = a31 * b31 - a32 * b32 + a33 * b33\r\n    const idet = 1 / det\r\n    return [\r\n        idet * b11, idet * -b21, idet * b31,\r\n        idet * -b12, idet * b22, idet * -b32,\r\n        idet * b13, idet * -b23, idet * b33\r\n    ]\r\n}","export type Vector3 = number[]\r\n\r\nexport const length = ([a, b, c]: Vector3) =>\r\n    Math.sqrt(Math.pow(a, 2) + Math.pow(b, 2) + Math.pow(c, 2))","import { UUID } from \"./graph\"\r\nimport { PointerAction } from \"./pointer_action\"\r\nimport { QuickSelect, QuickSelectNone } from \"./quick_select\"\r\n\r\nexport enum FocusKind {\r\n    NODE,\r\n    INPUT,\r\n    OUTPUT,\r\n    BODY,\r\n    FINDER,\r\n    NONE\r\n}\r\n\r\nexport interface MoveNode {\r\n    readonly left: boolean\r\n    readonly down: boolean\r\n    readonly up: boolean\r\n    readonly right: boolean\r\n    readonly now: number\r\n}\r\n\r\n\r\nexport interface FocusNode {\r\n    readonly kind: FocusKind.NODE\r\n    readonly node: UUID\r\n    readonly drag: boolean\r\n    readonly move: MoveNode\r\n    readonly quickSelect: QuickSelect\r\n}\r\n\r\nexport interface FocusInput {\r\n    readonly kind: FocusKind.INPUT\r\n    readonly input: UUID\r\n    readonly quickSelect: QuickSelect\r\n}\r\n\r\nexport interface FocusOutput {\r\n    readonly kind: FocusKind.OUTPUT\r\n    readonly output: UUID\r\n    readonly quickSelect: QuickSelect\r\n}\r\n\r\nexport interface FocusBody {\r\n    readonly kind: FocusKind.BODY\r\n    readonly body: UUID\r\n    readonly quickSelect: QuickSelect\r\n}\r\n\r\nexport interface FocusFinder {\r\n    readonly kind: FocusKind.FINDER,\r\n    readonly search: string\r\n    readonly options: Readonly<string[]>\r\n    readonly quickSelect: QuickSelectNone\r\n}\r\n\r\nexport interface FocusNone {\r\n    readonly kind: FocusKind.NONE\r\n    readonly pointerAction: PointerAction\r\n    readonly quickSelect: QuickSelect\r\n}\r\n\r\nexport type Focus =\r\n    | FocusNode\r\n    | FocusInput\r\n    | FocusOutput\r\n    | FocusBody\r\n    | FocusFinder\r\n    | FocusNone\r\n","import { Position } from \"./graph\"\r\n\r\nexport enum PointerActionKind { PAN, ZOOM, NONE }\r\n\r\nexport interface PointerActionPan {\r\n    readonly kind: PointerActionKind.PAN\r\n}\r\n\r\nexport interface PointerActionZoom {\r\n    readonly kind: PointerActionKind.ZOOM\r\n    readonly pointerDistance: number\r\n    readonly pointerCenter: Position\r\n}\r\n\r\nexport interface PointerActionNone {\r\n    readonly kind: PointerActionKind.NONE\r\n}\r\n\r\nexport type PointerAction =\r\n    | PointerActionPan\r\n    | PointerActionZoom\r\n    | PointerActionNone\r\n","import { Body, Edge, GenerateUUID, Graph, Inputs, Node, Operation, Outputs, Position, UUID } from \"../model/graph\"\r\n\r\ninterface AddNodeInputs {\r\n    graph: Graph\r\n    operation: Operation\r\n    position: Position\r\n    generateUUID: GenerateUUID\r\n}\r\n\r\ninterface AddNodeOutputs {\r\n    graph: Graph\r\n    node: UUID\r\n}\r\n\r\nexport const addNode = ({ graph, operation, position, generateUUID }: AddNodeInputs): AddNodeOutputs => {\r\n    const nodeUUID = generateUUID()\r\n    const inputs: Inputs = { ...graph.inputs }\r\n    const inputUUIDs = []\r\n    for (const name of operation.inputs) {\r\n        const uuid = generateUUID()\r\n        inputs[uuid] = {\r\n            uuid,\r\n            node: nodeUUID,\r\n            name\r\n        }\r\n        inputUUIDs.push(uuid)\r\n    }\r\n    const outputs: Outputs = { ...graph.outputs }\r\n    const outputUUIDs = []\r\n    for (const name of operation.outputs) {\r\n        const uuid = generateUUID()\r\n        outputs[uuid] = {\r\n            uuid,\r\n            node: nodeUUID,\r\n            name,\r\n            edges: []\r\n        }\r\n        outputUUIDs.push(uuid)\r\n    }\r\n    const node: Node = {\r\n        uuid: nodeUUID,\r\n        name: operation.name,\r\n        inputs: inputUUIDs,\r\n        outputs: outputUUIDs,\r\n        position\r\n    }\r\n    if (operation.body !== undefined) {\r\n        const body: Body = {\r\n            uuid: generateUUID(),\r\n            node: nodeUUID,\r\n            value: operation.body\r\n        }\r\n        return {\r\n            graph: {\r\n                ...graph,\r\n                nodes: { ...graph.nodes, [node.uuid]: { ...node, body: body.uuid } },\r\n                inputs,\r\n                outputs,\r\n                bodys: { ...graph.bodys, [body.uuid]: body }\r\n            },\r\n            node: nodeUUID\r\n        }\r\n    } else {\r\n        return {\r\n            graph: {\r\n                ...graph,\r\n                nodes: { ...graph.nodes, [node.uuid]: node },\r\n                inputs,\r\n                outputs\r\n            },\r\n            node: nodeUUID\r\n        }\r\n    }\r\n}\r\n\r\nexport const removeNode = (graph: Graph, node: UUID): Graph => {\r\n    const nodes = { ...graph.nodes }\r\n    const removedNode = nodes[node]\r\n    delete nodes[node]\r\n    const edgeUUIDs: UUID[] = []\r\n    for (const input of removedNode.inputs) {\r\n        const edge = graph.inputs[input].edge\r\n        if (edge) edgeUUIDs.push(edge)\r\n    }\r\n    for (const output of removedNode.outputs) {\r\n        for (const edge of graph.outputs[output].edges) {\r\n            edgeUUIDs.push(edge)\r\n        }\r\n    }\r\n    const edges = { ...graph.edges }\r\n    const inputs = { ...graph.inputs }\r\n    const outputs = { ...graph.outputs }\r\n    for (const uuid of edgeUUIDs) {\r\n        const edge = edges[uuid]\r\n        const input = inputs[edge.input]\r\n        inputs[edge.input] = {\r\n            ...input,\r\n            edge: undefined\r\n        }\r\n        const output = outputs[edge.output]\r\n        outputs[edge.output] = {\r\n            ...output,\r\n            edges: output.edges.filter(e => e !== uuid)\r\n        }\r\n        delete edges[uuid]\r\n    }\r\n    for (const input of removedNode.inputs) delete inputs[input]\r\n    for (const output of removedNode.outputs) delete outputs[output]\r\n    return {\r\n        ...graph,\r\n        nodes,\r\n        edges,\r\n        inputs,\r\n        outputs\r\n    }\r\n}\r\n\r\nexport const removeInputEdge = (graph: Graph, input: UUID): Graph => {\r\n    const edgeUUID = graph.inputs[input].edge\r\n    if (edgeUUID) {\r\n        const edge = graph.edges[edgeUUID]\r\n        const output = graph.outputs[edge.output]\r\n        const outputs = {\r\n            ...graph.outputs,\r\n            [edge.output]: {\r\n                ...output,\r\n                edges: output.edges.filter(e => e !== edge.uuid)\r\n            }\r\n        }\r\n        const input = graph.inputs[edge.input]\r\n        const inputs = {\r\n            ...graph.inputs,\r\n            [edge.input]: {\r\n                ...input,\r\n                edge: undefined\r\n            }\r\n        }\r\n        const edges = { ...graph.edges }\r\n        delete edges[edgeUUID]\r\n        return {\r\n            ...graph,\r\n            outputs,\r\n            inputs,\r\n            edges\r\n        }\r\n    } else {\r\n        return graph\r\n    }\r\n}\r\n\r\n\r\nexport const removeOutputEdges = (graph: Graph, output: UUID): Graph => {\r\n    const edges = { ...graph.edges }\r\n    const inputs = { ...graph.inputs }\r\n    const outputs = { ...graph.outputs }\r\n    for (const uuid of graph.outputs[output].edges) {\r\n        const edge = graph.edges[uuid]\r\n        const input = inputs[edge.input]\r\n        inputs[edge.input] = {\r\n            ...input,\r\n            edge: undefined\r\n        }\r\n        const output = outputs[edge.output]\r\n        outputs[edge.output] = {\r\n            ...output,\r\n            edges: output.edges.filter(e => e !== uuid)\r\n        }\r\n        delete edges[uuid]\r\n    }\r\n    return {\r\n        ...graph,\r\n        outputs,\r\n        inputs,\r\n        edges\r\n    }\r\n}\r\n\r\n\r\ninterface AddEdgeInputs {\r\n    graph: Graph\r\n    input: UUID\r\n    output: UUID\r\n    generateUUID: GenerateUUID\r\n}\r\n\r\ninterface AddEdgeOutputs {\r\n    graph: Graph\r\n    edge: UUID\r\n}\r\n\r\nexport const addEdge = ({ graph, input, output, generateUUID }: AddEdgeInputs): AddEdgeOutputs => {\r\n    const edge: Edge = {\r\n        uuid: generateUUID(),\r\n        input,\r\n        output\r\n    }\r\n    const inputs: Inputs = {\r\n        ...graph.inputs,\r\n        [input]: {\r\n            ...graph.inputs[input],\r\n            edge: edge.uuid\r\n        }\r\n    }\r\n    const currentOutput = graph.outputs[output]\r\n    const outputs: Outputs = {\r\n        ...graph.outputs,\r\n        [output]: {\r\n            ...currentOutput,\r\n            edges: [...currentOutput.edges, edge.uuid]\r\n        }\r\n    }\r\n    return {\r\n        graph: {\r\n            ...graph,\r\n            inputs,\r\n            outputs,\r\n            edges: {\r\n                ...graph.edges,\r\n                [edge.uuid]: edge\r\n            }\r\n        },\r\n        edge: edge.uuid\r\n    }\r\n}\r\n\r\nexport const changeNodePosition = (graph: Graph, node: UUID, transform: (position: Position) => Position): Graph => {\r\n    const currentNode = graph.nodes[node]\r\n    return {\r\n        ...graph,\r\n        nodes: {\r\n            ...graph.nodes,\r\n            [node]: {\r\n                ...currentNode,\r\n                position: transform(currentNode.position)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const changeBodyValue = (graph: Graph, body: UUID, transform: (value: number) => number): Graph => {\r\n    const currentBody = graph.bodys[body]\r\n    return {\r\n        ...graph,\r\n        bodys: {\r\n            ...graph.bodys,\r\n            [body]: {\r\n                ...currentBody,\r\n                value: transform(currentBody.value)\r\n            }\r\n        }\r\n    }\r\n}","import { AppEvent } from \".\";\r\nimport { Model } from \"../model\";\r\nimport { Focus, FocusFinder, FocusKind } from \"../model/focus\";\r\nimport { GenerateUUID, UUID } from \"../model/graph\";\r\nimport { QuickSelectInput, QuickSelectOutput, QuickSelectKind, QuickSelectNode, QuickSelectBody } from \"../model/quick_select\";\r\nimport { UpdateResult } from \"../ui/run\";\r\nimport { selectInput, selectOutput } from \"./focus\";\r\n\r\nexport const maybeTriggerQuickSelect = (model: Model, focus: Exclude<Focus, FocusFinder>, key: string): UpdateResult<Model, AppEvent> => {\r\n    switch (key) {\r\n        case 'i': {\r\n            const hotkeys: { [input: UUID]: string } = {}\r\n            Object.keys(model.graph.inputs).forEach((input, i) => {\r\n                hotkeys[input] = String.fromCharCode(97 + i)\r\n            })\r\n            return {\r\n                model: {\r\n                    ...model,\r\n                    focus: {\r\n                        ...focus,\r\n                        quickSelect: {\r\n                            kind: QuickSelectKind.INPUT,\r\n                            hotkeys\r\n                        }\r\n                    }\r\n                },\r\n                render: true\r\n            }\r\n        }\r\n        case 'o': {\r\n            const hotkeys: { [output: UUID]: string } = {}\r\n            Object.keys(model.graph.outputs).forEach((output, i) => {\r\n                hotkeys[output] = String.fromCharCode(97 + i)\r\n            })\r\n            return {\r\n                model: {\r\n                    ...model,\r\n                    focus: {\r\n                        ...focus,\r\n                        quickSelect: {\r\n                            kind: QuickSelectKind.OUTPUT,\r\n                            hotkeys\r\n                        }\r\n                    }\r\n                },\r\n                render: true\r\n            }\r\n        }\r\n        case 'n': {\r\n            const hotkeys: { [node: UUID]: string } = {}\r\n            Object.keys(model.graph.nodes).forEach((node, i) => {\r\n                hotkeys[node] = String.fromCharCode(97 + i)\r\n            })\r\n            return {\r\n                model: {\r\n                    ...model,\r\n                    focus: {\r\n                        ...focus,\r\n                        quickSelect: {\r\n                            kind: QuickSelectKind.NODE,\r\n                            hotkeys\r\n                        }\r\n                    }\r\n                },\r\n                render: true\r\n            }\r\n        }\r\n        case 'b': {\r\n            const hotkeys: { [body: UUID]: string } = {}\r\n            Object.keys(model.graph.bodys).forEach((body, i) => {\r\n                hotkeys[body] = String.fromCharCode(97 + i)\r\n            })\r\n            return {\r\n                model: {\r\n                    ...model,\r\n                    focus: {\r\n                        ...focus,\r\n                        quickSelect: {\r\n                            kind: QuickSelectKind.BODY,\r\n                            hotkeys\r\n                        }\r\n                    }\r\n                },\r\n                render: true\r\n            }\r\n        }\r\n        default:\r\n            return { model }\r\n    }\r\n}\r\n\r\nexport const quickSelectInput = (model: Model, quickSelect: QuickSelectInput, key: string, generateUUID: GenerateUUID): UpdateResult<Model, AppEvent> => {\r\n    const entry = Object.entries(quickSelect.hotkeys).find(([_, hotkey]) => hotkey === key)\r\n    if (entry !== undefined) {\r\n        const [input, _] = entry\r\n        return selectInput(model, input, generateUUID)\r\n    } else {\r\n        return {\r\n            model: {\r\n                ...model,\r\n                focus: {\r\n                    ...model.focus,\r\n                    quickSelect: { kind: QuickSelectKind.NONE }\r\n                }\r\n            },\r\n            render: true\r\n        }\r\n    }\r\n}\r\n\r\nexport const quickSelectOutput = (model: Model, quickSelect: QuickSelectOutput, key: string, generateUUID: GenerateUUID): UpdateResult<Model, AppEvent> => {\r\n    const entry = Object.entries(quickSelect.hotkeys).find(([_, hotkey]) => hotkey === key)\r\n    if (entry !== undefined) {\r\n        const [output, _] = entry\r\n        return selectOutput(model, output, generateUUID)\r\n    } else {\r\n        return {\r\n            model: {\r\n                ...model,\r\n                focus: {\r\n                    ...model.focus,\r\n                    quickSelect: { kind: QuickSelectKind.NONE }\r\n                }\r\n            },\r\n            render: true\r\n        }\r\n    }\r\n}\r\n\r\nexport const quickSelectNode = (model: Model, quickSelect: QuickSelectNode, key: string): UpdateResult<Model, AppEvent> => {\r\n    const entry = Object.entries(quickSelect.hotkeys).find(([_, hotkey]) => hotkey === key)\r\n    if (entry !== undefined) {\r\n        const [node, _] = entry\r\n        return {\r\n            model: {\r\n                ...model,\r\n                focus: {\r\n                    kind: FocusKind.NODE,\r\n                    node,\r\n                    drag: false,\r\n                    move: { left: false, up: false, down: false, right: false, now: 0 },\r\n                    quickSelect: { kind: QuickSelectKind.NONE }\r\n                }\r\n            },\r\n            render: true\r\n        }\r\n    } else {\r\n        return {\r\n            model: {\r\n                ...model,\r\n                focus: {\r\n                    ...model.focus,\r\n                    quickSelect: { kind: QuickSelectKind.NONE }\r\n                }\r\n            },\r\n            render: true\r\n        }\r\n    }\r\n}\r\n\r\nexport const quickSelectBody = (model: Model, quickSelect: QuickSelectBody, key: string): UpdateResult<Model, AppEvent> => {\r\n    const entry = Object.entries(quickSelect.hotkeys).find(([_, hotkey]) => hotkey === key)\r\n    if (entry !== undefined) {\r\n        const [body, _] = entry\r\n        return {\r\n            model: {\r\n                ...model,\r\n                focus: {\r\n                    kind: FocusKind.BODY,\r\n                    body,\r\n                    quickSelect: { kind: QuickSelectKind.NONE }\r\n                }\r\n            },\r\n            render: true\r\n        }\r\n    } else {\r\n        return {\r\n            model: {\r\n                ...model,\r\n                focus: {\r\n                    ...model.focus,\r\n                    quickSelect: { kind: QuickSelectKind.NONE }\r\n                }\r\n            },\r\n            render: true\r\n        }\r\n    }\r\n}\r\n","import { UUID } from \"./graph\"\r\n\r\nexport enum QuickSelectKind {\r\n    NONE,\r\n    INPUT,\r\n    OUTPUT,\r\n    NODE,\r\n    BODY,\r\n}\r\n\r\nexport interface QuickSelectNone {\r\n    readonly kind: QuickSelectKind.NONE\r\n}\r\n\r\nexport interface QuickSelectInput {\r\n    readonly kind: QuickSelectKind.INPUT\r\n    readonly hotkeys: Readonly<{ [input: UUID]: string }>\r\n}\r\n\r\nexport interface QuickSelectOutput {\r\n    readonly kind: QuickSelectKind.OUTPUT\r\n    readonly hotkeys: Readonly<{ [output: UUID]: string }>\r\n}\r\n\r\nexport interface QuickSelectNode {\r\n    readonly kind: QuickSelectKind.NODE\r\n    readonly hotkeys: Readonly<{ [node: UUID]: string }>\r\n}\r\n\r\nexport interface QuickSelectBody {\r\n    readonly kind: QuickSelectKind.BODY\r\n    readonly hotkeys: Readonly<{ [body: UUID]: string }>\r\n}\r\n\r\nexport type QuickSelect =\r\n    | QuickSelectNone\r\n    | QuickSelectInput\r\n    | QuickSelectOutput\r\n    | QuickSelectNode\r\n    | QuickSelectBody","import { AppEvent } from \".\"\r\nimport { Model } from \"../model\"\r\nimport { FocusKind } from \"../model/focus\"\r\nimport { GenerateUUID, UUID } from \"../model/graph\"\r\nimport { PointerActionKind } from \"../model/pointer_action\"\r\nimport { QuickSelectKind } from \"../model/quick_select\"\r\nimport { UpdateResult } from \"../ui/run\"\r\nimport { addEdge, removeInputEdge } from \"./graph\"\r\n\r\nexport const clearFocus = (model: Model): Model => ({\r\n    ...model,\r\n    focus: {\r\n        kind: FocusKind.NONE,\r\n        pointerAction: { kind: PointerActionKind.NONE },\r\n        quickSelect: { kind: QuickSelectKind.NONE }\r\n    }\r\n})\r\n\r\n\r\nexport const selectInput = (model: Model, inputUUID: UUID, generateUUID: GenerateUUID): UpdateResult<Model, AppEvent> => {\r\n    if (model.focus.kind === FocusKind.OUTPUT) {\r\n        const input = model.graph.inputs[inputUUID]\r\n        const output = model.graph.outputs[model.focus.output]\r\n        if (input.node === output.node) {\r\n            return { model }\r\n        } else {\r\n            const graph0 = input.edge !== undefined ?\r\n                removeInputEdge(model.graph, input.uuid) :\r\n                model.graph\r\n            const { graph: graph1 } = addEdge({\r\n                graph: graph0,\r\n                input: inputUUID,\r\n                output: model.focus.output,\r\n                generateUUID\r\n            })\r\n            return {\r\n                model: clearFocus({ ...model, graph: graph1 }),\r\n                render: true\r\n            }\r\n        }\r\n    } else {\r\n        return {\r\n            model: {\r\n                ...model,\r\n                focus: {\r\n                    kind: FocusKind.INPUT,\r\n                    input: inputUUID,\r\n                    quickSelect: { kind: QuickSelectKind.NONE }\r\n                }\r\n            },\r\n            render: true\r\n        }\r\n    }\r\n}\r\n\r\nexport const selectOutput = (model: Model, outputUUID: UUID, generateUUID: GenerateUUID): UpdateResult<Model, AppEvent> => {\r\n    if (model.focus.kind === FocusKind.INPUT) {\r\n        const input = model.graph.inputs[model.focus.input]\r\n        const output = model.graph.outputs[outputUUID]\r\n        if (output.node === input.node) {\r\n            return { model }\r\n        } else {\r\n            const graph0 = input.edge !== undefined ?\r\n                removeInputEdge(model.graph, input.uuid) :\r\n                model.graph\r\n            const { graph: graph1 } = addEdge({\r\n                graph: graph0,\r\n                input: model.focus.input,\r\n                output: outputUUID,\r\n                generateUUID\r\n            })\r\n            return {\r\n                model: clearFocus({ ...model, graph: graph1 }),\r\n                render: true\r\n            }\r\n        }\r\n    } else {\r\n        return {\r\n            model: {\r\n                ...model,\r\n                focus: {\r\n                    kind: FocusKind.OUTPUT,\r\n                    output: outputUUID,\r\n                    quickSelect: { kind: QuickSelectKind.NONE }\r\n                },\r\n            },\r\n            render: true\r\n        }\r\n    }\r\n}\r\n","import { AppEvent, EventKind, KeyDown, KeyUp } from \".\";\r\nimport { multiplyMatrices, scale, translate } from \"../linear_algebra/matrix3x3\";\r\nimport { Model, NodePlacementLocation } from \"../model\";\r\nimport { CurrentTime, UpdateResult } from \"../ui/run\";\r\n\r\nexport const maybeStartMoveCamera = (model: Model, { key, ctrl }: KeyDown, currentTime: CurrentTime): UpdateResult<Model, AppEvent> => {\r\n    interface Result {\r\n        now: number\r\n        dispatch?: AppEvent[]\r\n    }\r\n    const panDispatch = (): Result => {\r\n        const { left, down, up, right } = model.panCamera\r\n        const notMoving = !(left || down || up || right)\r\n        return notMoving ?\r\n            {\r\n                now: currentTime(),\r\n                dispatch: [{ kind: EventKind.PAN_CAMERA }]\r\n            } :\r\n            { now: model.panCamera.now }\r\n    }\r\n    const zoomDispatch = (): Result => {\r\n        const notMoving = !(model.zoomCamera.in || model.zoomCamera.out)\r\n        return notMoving ?\r\n            {\r\n                now: currentTime(),\r\n                dispatch: [{ kind: EventKind.ZOOM_CAMERA }]\r\n            } :\r\n            { now: model.zoomCamera.now }\r\n    }\r\n    const nodePlacementLocation: NodePlacementLocation = {\r\n        x: model.window.width / 2,\r\n        y: model.window.height / 2,\r\n        show: true\r\n    }\r\n    switch (key) {\r\n        case 'h':\r\n        case 'ArrowLeft': {\r\n            const { now, dispatch } = panDispatch()\r\n            return {\r\n                model: {\r\n                    ...model,\r\n                    panCamera: { ...model.panCamera, left: true, now },\r\n                    nodePlacementLocation,\r\n                },\r\n                dispatch\r\n            }\r\n        }\r\n        case 'j':\r\n        case 'ArrowDown': {\r\n            if (ctrl) {\r\n                const { now, dispatch } = zoomDispatch()\r\n                return {\r\n                    model: {\r\n                        ...model,\r\n                        zoomCamera: { ...model.zoomCamera, out: true, now },\r\n                        panCamera: { ...model.panCamera, up: false, down: false },\r\n                        nodePlacementLocation,\r\n                    },\r\n                    dispatch\r\n                }\r\n            } else {\r\n                const { now, dispatch } = panDispatch()\r\n                return {\r\n                    model: {\r\n                        ...model,\r\n                        zoomCamera: { ...model.zoomCamera, in: false, out: false },\r\n                        panCamera: { ...model.panCamera, down: true, now },\r\n                        nodePlacementLocation,\r\n                    },\r\n                    dispatch\r\n                }\r\n            }\r\n        }\r\n        case 'k':\r\n        case 'ArrowUp': {\r\n            if (ctrl) {\r\n                const { now, dispatch } = zoomDispatch()\r\n                return {\r\n                    model: {\r\n                        ...model,\r\n                        zoomCamera: { ...model.zoomCamera, in: true, now },\r\n                        panCamera: { ...model.panCamera, up: false, down: false },\r\n                        nodePlacementLocation,\r\n                    },\r\n                    dispatch\r\n                }\r\n            } else {\r\n                const { now, dispatch } = panDispatch()\r\n                return {\r\n                    model: {\r\n                        ...model,\r\n                        zoomCamera: { ...model.zoomCamera, in: false, out: false },\r\n                        panCamera: { ...model.panCamera, up: true, now },\r\n                        nodePlacementLocation,\r\n                    },\r\n                    dispatch\r\n                }\r\n            }\r\n        }\r\n        case 'l':\r\n        case 'ArrowRight': {\r\n            const { now, dispatch } = panDispatch()\r\n            return {\r\n                model: {\r\n                    ...model,\r\n                    panCamera: { ...model.panCamera, right: true, now },\r\n                    nodePlacementLocation,\r\n                },\r\n                dispatch\r\n            }\r\n        }\r\n        default:\r\n            return { model }\r\n    }\r\n}\r\n\r\n\r\nexport const maybeStopMoveCamera = (model: Model, { key, ctrl }: KeyUp): UpdateResult<Model, AppEvent> => {\r\n    switch (key) {\r\n        case 'h':\r\n        case 'ArrowLeft':\r\n            return {\r\n                model: {\r\n                    ...model,\r\n                    panCamera: { ...model.panCamera, left: false, }\r\n                },\r\n            }\r\n        case 'j':\r\n        case 'ArrowDown':\r\n            if (ctrl) {\r\n                return {\r\n                    model: {\r\n                        ...model,\r\n                        zoomCamera: { ...model.zoomCamera, out: false },\r\n                        panCamera: { ...model.panCamera, up: false, down: false }\r\n                    }\r\n                }\r\n            } else {\r\n                return {\r\n                    model: {\r\n                        ...model,\r\n                        zoomCamera: { ...model.zoomCamera, in: false, out: false },\r\n                        panCamera: { ...model.panCamera, down: false }\r\n                    },\r\n                }\r\n            }\r\n        case 'k':\r\n        case 'ArrowUp':\r\n            if (ctrl) {\r\n                return {\r\n                    model: {\r\n                        ...model,\r\n                        zoomCamera: { ...model.zoomCamera, in: false },\r\n                        panCamera: { ...model.panCamera, up: false, down: false },\r\n                    }\r\n                }\r\n            } else {\r\n                return {\r\n                    model: {\r\n                        ...model,\r\n                        zoomCamera: { ...model.zoomCamera, in: false, out: false },\r\n                        panCamera: { ...model.panCamera, up: false }\r\n                    },\r\n                }\r\n            }\r\n        case 'l':\r\n        case 'ArrowRight':\r\n            return {\r\n                model: {\r\n                    ...model,\r\n                    panCamera: { ...model.panCamera, right: false }\r\n                },\r\n            }\r\n        default:\r\n            return { model }\r\n    }\r\n}\r\n\r\nexport const panCamera = (model: Model, currentTime: CurrentTime): UpdateResult<Model, AppEvent> => {\r\n    const { left, down, up, right } = model.panCamera\r\n    const moving = left || down || up || right\r\n    if (moving) {\r\n        const x = (left ? -1 : 0) + (right ? 1 : 0)\r\n        const y = (up ? -1 : 0) + (down ? 1 : 0)\r\n        const length = Math.max(Math.sqrt(Math.pow(Math.abs(x), 2) + Math.pow(Math.abs(y), 2)), 1)\r\n        const now = currentTime()\r\n        const deltaTime = now - model.panCamera.now\r\n        const speed = 0.5 * deltaTime\r\n        return {\r\n            model: {\r\n                ...model,\r\n                panCamera: { ...model.panCamera, now },\r\n                camera: multiplyMatrices(model.camera, translate(x / length * speed, y / length * speed))\r\n            },\r\n            render: true,\r\n            schedule: [{ after: { milliseconds: 10 }, event: { kind: EventKind.PAN_CAMERA } }]\r\n        }\r\n    } else {\r\n        return { model }\r\n    }\r\n}\r\n\r\nexport const zoomCamera = (model: Model, currentTime: CurrentTime): UpdateResult<Model, AppEvent> => {\r\n    const moving = model.zoomCamera.in || model.zoomCamera.out\r\n    if (moving) {\r\n        const now = currentTime()\r\n        const deltaTime = now - model.zoomCamera.now\r\n        const direction = (model.zoomCamera.in ? -1 : 0) + (model.zoomCamera.out ? 1 : 0)\r\n        const speed = deltaTime * direction\r\n        const { x, y } = model.nodePlacementLocation\r\n        const move = translate(x, y)\r\n        const zoom = Math.pow(2, speed * 0.01)\r\n        const moveBack = translate(-x, -y)\r\n        const camera = multiplyMatrices(model.camera, move, scale(zoom, zoom), moveBack)\r\n        return {\r\n            model: {\r\n                ...model,\r\n                zoomCamera: { ...model.zoomCamera, now },\r\n                camera\r\n            },\r\n            render: true,\r\n            schedule: [{ after: { milliseconds: 10 }, event: { kind: EventKind.ZOOM_CAMERA } }]\r\n        }\r\n    } else {\r\n        return { model }\r\n    }\r\n}","import { AppEvent, EventKind } from \".\";\r\nimport { inverse, multiplyMatrixVector } from \"../linear_algebra/matrix3x3\";\r\nimport { length } from \"../linear_algebra/vector3\";\r\nimport { Model, NodePlacementLocation } from \"../model\";\r\nimport { FocusKind, FocusNode } from \"../model/focus\";\r\nimport { CurrentTime, UpdateResult } from \"../ui/run\";\r\nimport { changeNodePosition } from \"./graph\";\r\n\r\nexport const maybeStartMoveNode = (model: Model, focus: FocusNode, key: string, currentTime: CurrentTime): UpdateResult<Model, AppEvent> => {\r\n    interface Result {\r\n        now: number\r\n        dispatch?: AppEvent[]\r\n    }\r\n    const { left, down, up, right } = focus.move\r\n    const notMoving = !(left || down || up || right)\r\n    const { now, dispatch }: Result = notMoving ?\r\n        {\r\n            now: currentTime(),\r\n            dispatch: [{ kind: EventKind.MOVE_NODE }]\r\n        } :\r\n        { now: focus.move.now }\r\n    const nodePlacementLocation: NodePlacementLocation = {\r\n        ...model.nodePlacementLocation,\r\n        show: false\r\n    }\r\n    switch (key) {\r\n        case 'h':\r\n        case 'ArrowLeft': {\r\n            return {\r\n                model: {\r\n                    ...model,\r\n                    focus: {\r\n                        ...focus,\r\n                        move: { ...focus.move, left: true, now }\r\n                    },\r\n                    nodePlacementLocation,\r\n                },\r\n                dispatch\r\n            }\r\n        }\r\n        case 'j':\r\n        case 'ArrowDown': {\r\n            return {\r\n                model: {\r\n                    ...model,\r\n                    focus: {\r\n                        ...focus,\r\n                        move: { ...focus.move, down: true, now }\r\n                    },\r\n                    nodePlacementLocation,\r\n                },\r\n                dispatch\r\n            }\r\n        }\r\n        case 'k':\r\n        case 'ArrowUp': {\r\n            return {\r\n                model: {\r\n                    ...model,\r\n                    focus: {\r\n                        ...focus,\r\n                        move: { ...focus.move, up: true, now }\r\n                    },\r\n                    nodePlacementLocation,\r\n                },\r\n                dispatch\r\n            }\r\n        }\r\n        case 'l':\r\n        case 'ArrowRight': {\r\n            return {\r\n                model: {\r\n                    ...model,\r\n                    focus: {\r\n                        ...focus,\r\n                        move: { ...focus.move, right: true, now }\r\n                    },\r\n                    nodePlacementLocation,\r\n                },\r\n                dispatch\r\n            }\r\n        }\r\n        default:\r\n            return { model }\r\n    }\r\n}\r\n\r\nexport const maybeStopMoveNode = (model: Model, focus: FocusNode, key: string): UpdateResult<Model, AppEvent> => {\r\n    switch (key) {\r\n        case 'h':\r\n        case 'ArrowLeft': {\r\n            return {\r\n                model: {\r\n                    ...model,\r\n                    focus: {\r\n                        ...focus,\r\n                        move: { ...focus.move, left: false }\r\n                    }\r\n                },\r\n            }\r\n        }\r\n        case 'j':\r\n        case 'ArrowDown': {\r\n            return {\r\n                model: {\r\n                    ...model,\r\n                    focus: {\r\n                        ...focus,\r\n                        move: { ...focus.move, down: false }\r\n                    }\r\n                },\r\n            }\r\n        }\r\n        case 'k':\r\n        case 'ArrowUp': {\r\n            return {\r\n                model: {\r\n                    ...model,\r\n                    focus: {\r\n                        ...focus,\r\n                        move: { ...focus.move, up: false }\r\n                    }\r\n                },\r\n            }\r\n        }\r\n        case 'l':\r\n        case 'ArrowRight': {\r\n            return {\r\n                model: {\r\n                    ...model,\r\n                    focus: {\r\n                        ...focus,\r\n                        move: { ...focus.move, right: false }\r\n                    }\r\n                },\r\n            }\r\n        }\r\n        default:\r\n            return { model }\r\n    }\r\n}\r\n\r\nexport const moveNode = (model: Model, currentTime: CurrentTime): UpdateResult<Model, AppEvent> => {\r\n    switch (model.focus.kind) {\r\n        case FocusKind.NODE:\r\n            const { left, down, up, right } = model.focus.move\r\n            const moving = left || down || up || right\r\n            if (moving) {\r\n                const x = (left ? -1 : 0) + (right ? 1 : 0)\r\n                const y = (up ? -1 : 0) + (down ? 1 : 0)\r\n                const normalized_distance = Math.max(Math.sqrt(Math.pow(Math.abs(x), 2) + Math.pow(Math.abs(y), 2)), 1)\r\n                const now = currentTime()\r\n                const deltaTime = now - model.focus.move.now\r\n                const scale = length(multiplyMatrixVector(inverse(model.camera), [0, 1, 0]))\r\n                const speed = 0.5 * deltaTime / scale\r\n                const graph = changeNodePosition(model.graph, model.focus.node, p => ({\r\n                    x: p.x + x / normalized_distance * speed,\r\n                    y: p.y + y / normalized_distance * speed,\r\n                }))\r\n                return {\r\n                    model: {\r\n                        ...model,\r\n                        focus: {\r\n                            ...model.focus,\r\n                            move: { ...model.focus.move, now }\r\n                        },\r\n                        graph\r\n                    },\r\n                    render: true,\r\n                    schedule: [{ after: { milliseconds: 10 }, event: { kind: EventKind.MOVE_NODE } }]\r\n                }\r\n            } else {\r\n                return { model }\r\n            }\r\n        default:\r\n            return { model }\r\n    }\r\n}\r\n","import { pointerDown } from \"./pointer_down\"\r\nimport { render } from \"./render\"\r\nimport { ProgramError, ProgramKind, WebGL2Renderer, webGL2Renderer } from \"./webgl2\"\r\nimport { Pointer, UI } from \".\"\r\nimport { Document, Window, PointerEvent } from \"./dom\"\r\nimport { GenerateUUID } from \"../model/graph\"\r\n\r\nexport const transformPointer = (p: PointerEvent): Pointer => ({\r\n    id: p.pointerId,\r\n    position: { x: p.clientX, y: p.clientY }\r\n})\r\n\r\nexport type Dispatch<AppEvent> = (event: AppEvent) => void\r\n\r\ntype View<Model, AppEvent> = (model: Model) => UI<AppEvent>\r\n\r\ninterface Milliseconds {\r\n    milliseconds: number\r\n}\r\n\r\ninterface Scheduled<AppEvent> {\r\n    after: Milliseconds\r\n    event: AppEvent\r\n}\r\n\r\nexport interface UpdateResult<Model, AppEvent> {\r\n    model: Model\r\n    render?: boolean\r\n    schedule?: Scheduled<AppEvent>[]\r\n    dispatch?: AppEvent[]\r\n}\r\n\r\nexport type CurrentTime = () => number\r\n\r\nexport interface Effects {\r\n    currentTime: CurrentTime\r\n    generateUUID: GenerateUUID\r\n}\r\n\r\ntype Update<Model, AppEvent> = (effects: Effects, model: Model, event: AppEvent) => UpdateResult<Model, AppEvent>\r\n\r\ninterface Properties<Model, AppEvent> {\r\n    model: Model\r\n    view: View<Model, AppEvent>\r\n    update: Update<Model, AppEvent>\r\n    window: Window\r\n    document: Document\r\n    requestAnimationFrame: (callback: () => void) => void\r\n    setTimeout: (callback: () => void, milliseconds: number) => void\r\n    pointerDown: (dispatch: Dispatch<AppEvent>, pointer: Pointer) => void\r\n    effects: Effects\r\n}\r\n\r\nexport interface Success<AppEvent> {\r\n    kind: ProgramKind.DATA\r\n    dispatch: Dispatch<AppEvent>\r\n}\r\n\r\nexport const run = <Model, AppEvent>(properties: Properties<Model, AppEvent>): Success<AppEvent> | ProgramError => {\r\n    let { model, view, update, window, document, requestAnimationFrame, setTimeout, effects } = properties\r\n    const renderer_or_error = webGL2Renderer<AppEvent>({\r\n        width: window.innerWidth,\r\n        height: window.innerHeight,\r\n        window,\r\n        document,\r\n    })\r\n    switch (renderer_or_error.kind) {\r\n        case ProgramKind.ERROR:\r\n            return renderer_or_error\r\n        case ProgramKind.DATA:\r\n            let renderer = renderer_or_error\r\n            let renderQueued = false\r\n            const scheduleRender = () => {\r\n                if (!renderQueued) {\r\n                    renderQueued = true\r\n                    requestAnimationFrame(() => {\r\n                        renderer = render(renderer, view(model))\r\n                        renderQueued = false\r\n                    })\r\n                }\r\n            }\r\n            const dispatch = (event: AppEvent) => {\r\n                const {\r\n                    model: newModel,\r\n                    render,\r\n                    schedule,\r\n                    dispatch: dispatchEvents\r\n                } = update(effects, model, event)\r\n                model = newModel\r\n                if (render) scheduleRender()\r\n                for (const { after, event } of schedule ?? []) {\r\n                    const { milliseconds } = after\r\n                    setTimeout(() => dispatch(event), milliseconds)\r\n                }\r\n                for (const event of dispatchEvents ?? []) dispatch(event)\r\n            }\r\n            renderer.dispatch = dispatch\r\n            document.body.appendChild(renderer.canvas)\r\n            document.addEventListener(\"pointerdown\", p => {\r\n                const transformed = transformPointer(p)\r\n                properties.pointerDown(dispatch, transformed)\r\n                renderer = pointerDown<AppEvent, WebGL2Renderer<AppEvent>>(renderer, transformed)\r\n            })\r\n            window.addEventListener(\"resize\", () => {\r\n                renderer.size = { width: window.innerWidth, height: window.innerHeight }\r\n                scheduleRender()\r\n            })\r\n            scheduleRender()\r\n            return { kind: ProgramKind.DATA, dispatch }\r\n    }\r\n}\r\n","import { Renderer, Pointer, WorldSpace } from \".\"\r\n\r\nconst inWorldSpace = ({ x0, y0, x1, y1 }: WorldSpace, pointer: Pointer) =>\r\n    x0 <= pointer.position.x && pointer.position.x <= x1 &&\r\n    y0 <= pointer.position.y && pointer.position.y <= y1\r\n\r\nexport const pointerDown = <AppEvent, R extends Renderer<AppEvent>>(renderer: R, pointer: Pointer): R => {\r\n    for (let i = renderer.clickHandlers.length; i > 0; --i) {\r\n        for (const { onClick, worldSpace } of renderer.clickHandlers[i - 1]) {\r\n            if (inWorldSpace(worldSpace, pointer)) {\r\n                renderer.dispatch(onClick)\r\n                return renderer\r\n            }\r\n        }\r\n    }\r\n    return renderer\r\n}\r\n","import { batchGeometry } from \"./batch_geometry\"\r\nimport { initCameraStack } from \"./camera_stack\"\r\nimport { reduce } from \"./reduce\"\r\nimport { UI, layout, geometry, Renderer } from \".\"\r\nimport * as reducer from './reducer'\r\nimport { Accumulator } from './reducer'\r\n\r\nexport const render = <AppEvent, R extends Renderer<AppEvent>>(renderer: R, ui: UI<AppEvent>): R => {\r\n    const { width, height } = renderer.size\r\n    renderer.clear()\r\n    const constraints = {\r\n        minWidth: 0,\r\n        maxWidth: width,\r\n        minHeight: 0,\r\n        maxHeight: height\r\n    }\r\n    const uiLayout = layout(ui, constraints, renderer.measureText)\r\n    const offsets = { x: 0, y: 0 }\r\n    const cameraStack = initCameraStack()\r\n    const uiGeometry = geometry(ui, uiLayout, offsets, cameraStack)\r\n    const { layers, clickHandlers, connections, idToWorldSpace } = reduce<AppEvent, Accumulator<AppEvent>>(ui, uiLayout, uiGeometry, reducer)\r\n    const batches = batchGeometry(layers, connections, idToWorldSpace)\r\n    renderer.cameras = cameraStack.cameras\r\n    renderer.clickHandlers = clickHandlers\r\n    for (const batch of batches) renderer.draw(batch)\r\n    return renderer\r\n}\r\n","import { Connections } from \"./gather_connections\"\r\nimport { Layers } from \"./layer_geometry\"\r\nimport { IdToWorldSpace } from \"./id_to_world_space\"\r\nimport { WorldSpace } from \".\"\r\n\r\nexport interface Triangles {\r\n    vertices: number[]\r\n    vertexIndices: number[]\r\n    colors: number[]\r\n    textureIndex: number\r\n    textureCoordinates: number[]\r\n    cameraIndex: number[]\r\n}\r\n\r\nexport interface Lines {\r\n    vertices: number[]\r\n    colors: number[]\r\n}\r\n\r\n\r\nexport interface Batch {\r\n    triangles: Triangles\r\n    lines: Lines\r\n}\r\n\r\nconst newBatch = (textureIndex: number): Batch => ({\r\n    triangles: {\r\n        vertices: [],\r\n        colors: [],\r\n        vertexIndices: [],\r\n        textureIndex,\r\n        textureCoordinates: [],\r\n        cameraIndex: []\r\n    },\r\n    lines: {\r\n        vertices: [],\r\n        colors: []\r\n    }\r\n})\r\n\r\nconst linspace = (start: number, stop: number, num: number): number[] => {\r\n    const step = (stop - start) / (num - 1)\r\n    return Array.from({ length: num }, (_, i) => start + step * i)\r\n}\r\n\r\nexport function* cubicBezier(ts: number[], from: WorldSpace, to: WorldSpace, offset: number): Generator<number> {\r\n    const p0x = (from.x0 + from.x1) / 2\r\n    const p0y = (from.y0 + from.y1) / 2\r\n    const p1x = p0x + offset\r\n    const p1y = p0y\r\n    const p3x = (to.x0 + to.x1) / 2\r\n    const p3y = (to.y0 + to.y1) / 2\r\n    const p2x = p3x - offset\r\n    const p2y = p3y\r\n    let lastX = 0\r\n    let lastY = 0\r\n    let first = true\r\n    for (const t of ts) {\r\n        const tSquared = t * t\r\n        const tCubed = tSquared * t\r\n        const oneMinusT = 1 - t\r\n        const oneMinusTSquared = oneMinusT * oneMinusT\r\n        const oneMinusTCubed = oneMinusTSquared * oneMinusT\r\n        const a = oneMinusTCubed\r\n        const b = 3 * oneMinusTSquared * t\r\n        const c = 3 * oneMinusT * tSquared\r\n        const d = tCubed\r\n        const x = a * p0x + b * p1x + c * p2x + d * p3x\r\n        const y = a * p0y + b * p1y + c * p2y + d * p3y\r\n        if (first) {\r\n            yield x\r\n            yield y\r\n            first = false\r\n        } else {\r\n            yield lastX\r\n            yield lastY\r\n        }\r\n        yield x\r\n        yield y\r\n        lastX = x\r\n        lastY = y\r\n    }\r\n}\r\n\r\n\r\nexport const batchGeometry = (layers: Layers, connections: Connections, idToWorldSpace: IdToWorldSpace): Batch[] => {\r\n    const samples = 20\r\n    const ts = linspace(0, 1, samples)\r\n    const batches: Batch[] = []\r\n    let batch = newBatch(0)\r\n    let batchTextureIndex = batch.triangles.textureIndex.toString()\r\n    layers.forEach((layer, z) => {\r\n        for (const [textureIndex, geometries] of Object.entries(layer)) {\r\n            if (batchTextureIndex !== textureIndex) {\r\n                if (batch.triangles.vertices.length !== 0) batches.push(batch)\r\n                batch = newBatch(parseInt(textureIndex))\r\n                batchTextureIndex = textureIndex\r\n            }\r\n            for (const geometry of geometries) {\r\n                const offset = batch.triangles.vertices.length / 2\r\n                batch.triangles.vertices.push(...geometry.vertices)\r\n                batch.triangles.colors.push(...geometry.colors)\r\n                for (const index of geometry.vertexIndices) {\r\n                    batch.triangles.vertexIndices.push(index + offset)\r\n                }\r\n                batch.triangles.textureCoordinates.push(...geometry.textureCoordinates)\r\n                batch.triangles.cameraIndex.push(...geometry.cameraIndex)\r\n            }\r\n        }\r\n        if (connections.length > z) {\r\n            for (const { connections: cs, scale } of connections[z]) {\r\n                const offset = 50 * scale\r\n                for (const { from, to, color } of cs) {\r\n                    for (const p of cubicBezier(ts, idToWorldSpace[from], idToWorldSpace[to], offset)) {\r\n                        batch.lines.vertices.push(p)\r\n                    }\r\n                    const { red, green, blue, alpha } = color\r\n                    for (let i = 0; i < samples * 2; ++i) batch.lines.colors.push(red, green, blue, alpha)\r\n                }\r\n            }\r\n            if (batch.lines.vertices.length !== 0) {\r\n                batches.push(batch)\r\n                batch = newBatch(0)\r\n            }\r\n        }\r\n    })\r\n    if (batch.triangles.vertices.length !== 0) batches.push(batch)\r\n    return batches\r\n}","import { WorldSpace } from \".\"\r\nimport { identity, inverse, Matrix3x3, multiplyMatrixVector } from \"../linear_algebra/matrix3x3\"\r\n\r\nexport interface CameraStack {\r\n    cameras: Matrix3x3[]\r\n    stack: number[]\r\n    transform: Matrix3x3\r\n}\r\n\r\nexport const initCameraStack = (): CameraStack => {\r\n    const camera = identity()\r\n    return {\r\n        cameras: [identity()],\r\n        stack: [0],\r\n        transform: inverse(camera)\r\n    }\r\n}\r\n\r\nexport const pushCamera = (cameraStack: CameraStack, camera: Matrix3x3): void => {\r\n    const index = cameraStack.cameras.length\r\n    cameraStack.cameras.push(camera)\r\n    cameraStack.stack.push(index)\r\n    cameraStack.transform = inverse(camera)\r\n}\r\n\r\nexport const activeCamera = (cameraStack: CameraStack): number => cameraStack.stack.slice(-1)[0]\r\n\r\nexport const popCamera = (cameraStack: CameraStack): void => {\r\n    cameraStack.stack.pop()\r\n    cameraStack.transform = inverse(cameraStack.cameras[activeCamera(cameraStack)])\r\n}\r\n\r\nexport const transformWorldSpace = (cameraStack: CameraStack, worldSpace: WorldSpace): WorldSpace => {\r\n    const [x0, y0, _0] = multiplyMatrixVector(cameraStack.transform, [worldSpace.x0, worldSpace.y0, 1])\r\n    const [x1, y1, _1] = multiplyMatrixVector(cameraStack.transform, [worldSpace.x1, worldSpace.y1, 1])\r\n    return { x0, y0, x1, y1 }\r\n}\r\n","import { UI, Geometry, Layout, Entry, traverse } from \".\";\r\n\r\nexport interface Reducer<AppEvent, T> {\r\n    initial: () => T\r\n    combine: (accumulator: T, entry: Entry<AppEvent>) => T\r\n}\r\n\r\nexport const reduce = <AppEvent, T>(ui: UI<AppEvent>, layout: Layout, geometry: Geometry, reducer: Reducer<AppEvent, T>): T => {\r\n    const accumulator = reducer.initial()\r\n    for (const entry of traverse(ui, layout, geometry, 0)) {\r\n        reducer.combine(accumulator, entry)\r\n    }\r\n    return accumulator\r\n}","import { Center, CenterLayout, centerLayout, CenterGeometry, centerGeometry, centerTraverse } from './center'\r\nimport { Column, ColumnLayout, columnLayout, ColumnGeometry, columnGeometry, columnTraverse } from './column'\r\nimport { Container, ContainerLayout, containerLayout, ContainerGeometry, containerGeometry, containerTraverse } from './container'\r\nimport { Row, RowLayout, rowLayout, RowGeometry, rowGeometry, rowTraverse } from './row'\r\nimport { Scene, SceneLayout, sceneLayout, SceneGeometry, sceneGeometry, sceneTraverse } from './scene'\r\nimport { Stack, StackLayout, stackLayout, StackGeometry, stackGeometry, stackTraverse } from './stack'\r\nimport { Text, TextLayout, textLayout, TextGeometry, textGeometry, textTraverse } from './text'\r\nimport { CameraStack } from './camera_stack'\r\nimport { Matrix3x3 } from '../linear_algebra/matrix3x3'\r\nimport { Batch } from './batch_geometry'\r\nimport { ClickHandlers } from './gather_on_click_handlers'\r\nimport { Position } from '../model/graph'\r\n\r\nexport { center } from './center'\r\nexport { column } from './column'\r\nexport { container } from './container'\r\nexport { row } from './row'\r\nexport { scene } from './scene'\r\nexport { stack } from './stack'\r\nexport { text } from './text'\r\n\r\nexport enum UIKind {\r\n    CENTER,\r\n    COLUMN,\r\n    CONTAINER,\r\n    ROW,\r\n    SCENE,\r\n    STACK,\r\n    TEXT,\r\n}\r\n\r\nexport type UI<AppEvent> =\r\n    | Center<AppEvent>\r\n    | Column<AppEvent>\r\n    | Container<AppEvent>\r\n    | Row<AppEvent>\r\n    | Scene<AppEvent>\r\n    | Stack<AppEvent>\r\n    | Text<AppEvent>\r\n\r\nexport interface Color {\r\n    red: number\r\n    green: number\r\n    blue: number\r\n    alpha: number\r\n}\r\n\r\nexport interface Size {\r\n    readonly width: number\r\n    readonly height: number\r\n}\r\n\r\nexport interface Constraints {\r\n    readonly minWidth: number\r\n    readonly maxWidth: number\r\n    readonly minHeight: number\r\n    readonly maxHeight: number\r\n}\r\n\r\nexport type Layout =\r\n    | CenterLayout\r\n    | ColumnLayout\r\n    | ContainerLayout\r\n    | RowLayout\r\n    | SceneLayout\r\n    | StackLayout\r\n    | TextLayout\r\n\r\nexport interface Font {\r\n    readonly family: string\r\n    readonly size: number\r\n}\r\n\r\nexport interface TextMeasurements {\r\n    readonly widths: number[]\r\n    readonly textureIndex: number\r\n    readonly textureCoordinates: number[][]\r\n}\r\n\r\nexport type MeasureText = (font: Font, str: string) => TextMeasurements\r\n\r\nexport const layout = <AppEvent>(ui: UI<AppEvent>, constraints: Constraints, measureText: MeasureText): Layout => {\r\n    switch (ui.kind) {\r\n        case UIKind.CENTER:\r\n            return centerLayout(ui, constraints, measureText)\r\n        case UIKind.COLUMN:\r\n            return columnLayout(ui, constraints, measureText)\r\n        case UIKind.CONTAINER:\r\n            return containerLayout(ui, constraints, measureText)\r\n        case UIKind.ROW:\r\n            return rowLayout(ui, constraints, measureText)\r\n        case UIKind.SCENE:\r\n            return sceneLayout(ui, constraints, measureText)\r\n        case UIKind.STACK:\r\n            return stackLayout(ui, constraints, measureText)\r\n        case UIKind.TEXT:\r\n            return textLayout(ui, constraints, measureText)\r\n    }\r\n}\r\n\r\nexport interface Offset {\r\n    readonly x: number\r\n    readonly y: number\r\n}\r\n\r\nexport interface WorldSpace {\r\n    readonly x0: number\r\n    readonly y0: number\r\n    readonly x1: number\r\n    readonly y1: number\r\n}\r\n\r\nexport type Geometry =\r\n    | CenterGeometry\r\n    | ColumnGeometry\r\n    | ContainerGeometry\r\n    | RowGeometry\r\n    | SceneGeometry\r\n    | StackGeometry\r\n    | TextGeometry\r\n\r\nexport const geometry = <AppEvent>(ui: UI<AppEvent>, layout: Layout, offset: Offset, cameraStack: CameraStack): Geometry => {\r\n    switch (ui.kind) {\r\n        case UIKind.CENTER:\r\n            return centerGeometry(ui, layout as CenterLayout, offset, cameraStack)\r\n        case UIKind.COLUMN:\r\n            return columnGeometry(ui, layout as ColumnLayout, offset, cameraStack)\r\n        case UIKind.CONTAINER:\r\n            return containerGeometry(ui, layout as ContainerLayout, offset, cameraStack)\r\n        case UIKind.ROW:\r\n            return rowGeometry(ui, layout as RowLayout, offset, cameraStack)\r\n        case UIKind.SCENE:\r\n            return sceneGeometry(ui, layout as SceneLayout, offset, cameraStack)\r\n        case UIKind.STACK:\r\n            return stackGeometry(ui, layout as StackLayout, offset, cameraStack)\r\n        case UIKind.TEXT:\r\n            return textGeometry(ui, layout as TextLayout, offset, cameraStack)\r\n    }\r\n}\r\n\r\nexport interface Entry<AppEvent> {\r\n    readonly ui: UI<AppEvent>\r\n    readonly layout: Layout\r\n    readonly geometry: Geometry\r\n    readonly z: number\r\n}\r\n\r\nexport function* traverse<AppEvent>(ui: UI<AppEvent>, layout: Layout, geometry: Geometry, z: number): Generator<Entry<AppEvent>> {\r\n    switch (ui.kind) {\r\n        case UIKind.CENTER:\r\n            yield* centerTraverse(ui, layout as CenterLayout, geometry as CenterGeometry, z)\r\n            break\r\n        case UIKind.COLUMN:\r\n            yield* columnTraverse(ui, layout as ColumnLayout, geometry as ColumnGeometry, z)\r\n            break\r\n        case UIKind.CONTAINER:\r\n            yield* containerTraverse(ui, layout as ContainerLayout, geometry as ContainerGeometry, z)\r\n            break\r\n        case UIKind.ROW:\r\n            yield* rowTraverse(ui, layout as RowLayout, geometry as RowGeometry, z)\r\n            break\r\n        case UIKind.SCENE:\r\n            yield* sceneTraverse(ui, layout as SceneLayout, geometry as SceneGeometry, z)\r\n            break\r\n        case UIKind.STACK:\r\n            yield* stackTraverse(ui, layout as StackLayout, geometry as StackGeometry, z)\r\n            break\r\n        case UIKind.TEXT:\r\n            yield* textTraverse(ui, layout as TextLayout, geometry as TextGeometry, z)\r\n            break\r\n    }\r\n}\r\n\r\nexport interface Connection {\r\n    from: string\r\n    to: string\r\n    color: Color\r\n}\r\n\r\nexport interface Renderer<AppEvent> {\r\n    size: Size\r\n    cameras: Matrix3x3[]\r\n    clickHandlers: ClickHandlers<AppEvent>\r\n    clear: () => void\r\n    draw: (batch: Batch) => void\r\n    measureText: MeasureText\r\n    dispatch: (event: AppEvent) => void\r\n}\r\n\r\nexport interface Pointer {\r\n    id: number\r\n    position: Position\r\n}","import { Constraints, Entry, Geometry, geometry, layout, Layout, MeasureText, Offset, Size, UI, UIKind, WorldSpace, traverse } from \".\"\r\nimport { CameraStack, transformWorldSpace } from \"./camera_stack\"\r\n\r\nexport interface CenterLayout {\r\n    readonly size: Size\r\n    readonly child: Layout\r\n}\r\n\r\nexport interface CenterGeometry {\r\n    readonly worldSpace: WorldSpace\r\n    readonly child: Geometry\r\n}\r\n\r\nexport interface Center<AppEvent> {\r\n    readonly id?: string\r\n    readonly onClick?: AppEvent\r\n    readonly kind: UIKind.CENTER\r\n    readonly child: UI<AppEvent>\r\n}\r\n\r\nexport const center = <AppEvent>(child: UI<AppEvent>): Center<AppEvent> => {\r\n    return {\r\n        kind: UIKind.CENTER,\r\n        child\r\n    }\r\n}\r\n\r\nexport const centerLayout = <AppEvent>(ui: Center<AppEvent>, constraints: Constraints, measureText: MeasureText): CenterLayout => {\r\n    const childLayout = layout(ui.child, constraints, measureText)\r\n    const width = constraints.maxWidth\r\n    const height = constraints.maxHeight\r\n    return { size: { width, height }, child: childLayout }\r\n}\r\n\r\nexport const centerGeometry = <AppEvent>(ui: Center<AppEvent>, layout: CenterLayout, offset: Offset, cameraStack: CameraStack): CenterGeometry => {\r\n    const worldSpace = transformWorldSpace(cameraStack, {\r\n        x0: offset.x,\r\n        y0: offset.y,\r\n        x1: offset.x + layout.size.width,\r\n        y1: offset.y + layout.size.height,\r\n    })\r\n    const childLayout = layout.child\r\n    const childOffset = {\r\n        x: offset.x + layout.size.width / 2 - childLayout.size.width / 2,\r\n        y: offset.y + layout.size.height / 2 - childLayout.size.height / 2\r\n    }\r\n    const childGeometry = geometry(ui.child, childLayout, childOffset, cameraStack)\r\n    return {\r\n        worldSpace,\r\n        child: childGeometry\r\n    }\r\n}\r\n\r\nexport function* centerTraverse<AppEvent>(ui: Center<AppEvent>, layout: CenterLayout, geometry: CenterGeometry, z: number): Generator<Entry<AppEvent>> {\r\n    yield* traverse(ui.child, layout.child, geometry.child, z + 1)\r\n}","import { Constraints, Entry, geometry, Geometry, Layout, layout, MeasureText, Offset, Size, traverse, UI, UIKind, WorldSpace } from \".\"\r\nimport { MainAxisAlignment, CrossAxisAlignment } from \"./alignment\"\r\nimport { CameraStack, transformWorldSpace } from \"./camera_stack\"\r\n\r\nexport interface ColumnLayout {\r\n    readonly size: Size\r\n    readonly totalChildHeight: number\r\n    readonly children: Layout[]\r\n}\r\n\r\nexport interface ColumnGeometry {\r\n    readonly worldSpace: WorldSpace\r\n    readonly children: Geometry[]\r\n}\r\n\r\nexport interface Column<AppEvent> {\r\n    readonly id?: string\r\n    readonly onClick?: AppEvent\r\n    readonly kind: UIKind.COLUMN,\r\n    readonly mainAxisAlignment: MainAxisAlignment\r\n    readonly crossAxisAlignment: CrossAxisAlignment\r\n    readonly children: UI<AppEvent>[]\r\n}\r\n\r\ninterface Properties {\r\n    readonly mainAxisAlignment?: MainAxisAlignment\r\n    readonly crossAxisAlignment?: CrossAxisAlignment\r\n}\r\n\r\nexport function column<AppEvent>(children: UI<AppEvent>[]): Column<AppEvent>\r\nexport function column<AppEvent>(properties: Properties, children: UI<AppEvent>[]): Column<AppEvent>\r\nexport function column<AppEvent>(...args: any[]): Column<AppEvent> {\r\n    const [properties, children]: [Properties, UI<AppEvent>[]] = (() =>\r\n        args[0] instanceof Array ? [{}, args[0]] : [args[0], args[1]]\r\n    )()\r\n    return {\r\n        kind: UIKind.COLUMN,\r\n        mainAxisAlignment: properties.mainAxisAlignment ?? MainAxisAlignment.START,\r\n        crossAxisAlignment: properties.crossAxisAlignment ?? CrossAxisAlignment.START,\r\n        children\r\n    }\r\n}\r\n\r\nexport const columnLayout = <AppEvent>(ui: Column<AppEvent>, constraints: Constraints, measureText: MeasureText): ColumnLayout => {\r\n    const initialChildren: Layout[] = []\r\n    const initial = {\r\n        children: initialChildren,\r\n        width: 0,\r\n        totalChildHeight: 0\r\n    }\r\n    const result = ui.children.reduce((acc, child) => {\r\n        const childLayout = layout(child, constraints, measureText)\r\n        acc.children.push(childLayout)\r\n        acc.totalChildHeight += childLayout.size.height\r\n        acc.width = Math.max(acc.width, childLayout.size.width)\r\n        return acc\r\n    }, initial)\r\n    const { children, width, totalChildHeight } = result\r\n    const height = ui.mainAxisAlignment == MainAxisAlignment.START ? totalChildHeight : constraints.maxHeight\r\n    return {\r\n        size: { width, height },\r\n        totalChildHeight,\r\n        children\r\n    }\r\n}\r\n\r\nexport const columnGeometry = <AppEvent>(ui: Column<AppEvent>, layout: ColumnLayout, offset: Offset, cameraStack: CameraStack): ColumnGeometry => {\r\n    const initialChildren: Geometry[] = []\r\n    const freeSpaceY = layout.size.height - layout.totalChildHeight\r\n    const initial = {\r\n        children: initialChildren,\r\n        y: (() => {\r\n            switch (ui.mainAxisAlignment) {\r\n                case MainAxisAlignment.START: return offset.y\r\n                case MainAxisAlignment.CENTER: return offset.y + freeSpaceY / 2\r\n                case MainAxisAlignment.END: return offset.y + freeSpaceY\r\n                case MainAxisAlignment.SPACE_EVENLY: return offset.y + freeSpaceY / (ui.children.length + 1)\r\n                case MainAxisAlignment.SPACE_BETWEEN: return offset.y\r\n            }\r\n        })(),\r\n    }\r\n    const addYStart = (childLayout: Layout) => childLayout.size.height\r\n    const addYCenter = (childLayout: Layout) => childLayout.size.height\r\n    const addYEnd = (childLayout: Layout) => childLayout.size.height\r\n    const addYSpaceEvenly = (childLayout: Layout) => childLayout.size.height + freeSpaceY / (ui.children.length + 1)\r\n    const addYSpaceBetween = (childLayout: Layout) => childLayout.size.height + freeSpaceY / (ui.children.length - 1)\r\n    const addY = (() => {\r\n        switch (ui.mainAxisAlignment) {\r\n            case MainAxisAlignment.START: return addYStart\r\n            case MainAxisAlignment.CENTER: return addYCenter\r\n            case MainAxisAlignment.END: return addYEnd\r\n            case MainAxisAlignment.SPACE_EVENLY: return addYSpaceEvenly\r\n            case MainAxisAlignment.SPACE_BETWEEN: return addYSpaceBetween\r\n        }\r\n    })()\r\n    const offsetXStart = (_: Layout) => offset.x\r\n    const offsetXCenter = (childLayout: Layout) => offset.x + layout.size.width / 2 - childLayout.size.width / 2\r\n    const offsetXEnd = (childLayout: Layout) => offset.x + layout.size.width - childLayout.size.width\r\n    const offsetX = (() => {\r\n        switch (ui.crossAxisAlignment) {\r\n            case CrossAxisAlignment.START: return offsetXStart\r\n            case CrossAxisAlignment.CENTER: return offsetXCenter\r\n            case CrossAxisAlignment.END: return offsetXEnd\r\n        }\r\n    })()\r\n    const result = ui.children.reduce((acc, child, i) => {\r\n        const childLayout = layout.children[i]\r\n        const childOffset = { x: offsetX(childLayout), y: acc.y }\r\n        const childGeometry = geometry(child, childLayout, childOffset, cameraStack)\r\n        acc.children.push(childGeometry)\r\n        acc.y += addY(childLayout)\r\n        return acc\r\n    }, initial)\r\n    const worldSpace = transformWorldSpace(cameraStack, {\r\n        x0: offset.x,\r\n        y0: offset.y,\r\n        x1: offset.x + layout.size.width,\r\n        y1: offset.y + layout.size.height\r\n    })\r\n    return { worldSpace, children: result.children }\r\n}\r\n\r\nexport function* columnTraverse<AppEvent>(ui: Column<AppEvent>, layout: ColumnLayout, geometry: ColumnGeometry, z: number): Generator<Entry<AppEvent>> {\r\n    yield { ui, layout, geometry, z }\r\n    const nextZ = z + 1\r\n    let i = 0\r\n    for (const child of ui.children) {\r\n        yield* traverse(child, layout.children[i], geometry.children[i], nextZ)\r\n        i += 1\r\n    }\r\n}","export enum MainAxisAlignment {\r\n    START,\r\n    CENTER,\r\n    END,\r\n    SPACE_EVENLY,\r\n    SPACE_BETWEEN\r\n}\r\n\r\nexport enum CrossAxisAlignment {\r\n    START,\r\n    CENTER,\r\n    END\r\n}","import { UI, Size, Layout, Constraints, MeasureText, UIKind, layout, Color, Offset, WorldSpace, Geometry, geometry, Entry, traverse, } from '.'\r\nimport { CameraStack, transformWorldSpace, activeCamera } from './camera_stack'\r\n\r\nexport interface ContainerLayout {\r\n    readonly size: Size\r\n    readonly child?: Layout\r\n}\r\n\r\nexport interface ContainerGeometry {\r\n    readonly worldSpace: WorldSpace\r\n    readonly vertices: number[]\r\n    readonly colors: number[]\r\n    readonly vertexIndices: number[]\r\n    readonly cameraIndex: number[]\r\n    readonly textureIndex: number\r\n    readonly textureCoordinates: number[]\r\n    readonly child?: Geometry\r\n}\r\n\r\nexport interface Padding {\r\n    readonly top: number\r\n    readonly right: number\r\n    readonly bottom: number\r\n    readonly left: number\r\n}\r\n\r\nexport interface Container<AppEvent> {\r\n    readonly id?: string\r\n    readonly onClick?: AppEvent\r\n    readonly kind: UIKind.CONTAINER,\r\n    readonly padding: Padding\r\n    readonly width?: number\r\n    readonly height?: number\r\n    readonly x?: number\r\n    readonly y?: number\r\n    readonly color?: Color\r\n    readonly child?: UI<AppEvent>\r\n}\r\n\r\ninterface Properties<AppEvent> {\r\n    readonly padding?: number | Padding\r\n    readonly width?: number\r\n    readonly height?: number\r\n    readonly x?: number\r\n    readonly y?: number\r\n    readonly color?: Color\r\n    readonly onClick?: AppEvent\r\n    readonly id?: string\r\n}\r\n\r\nconst transformPadding = (padding?: number | Padding): Padding => {\r\n    if (padding) {\r\n        if (typeof padding === 'number') {\r\n            return { top: padding, right: padding, bottom: padding, left: padding }\r\n        } else {\r\n            return padding\r\n        }\r\n    } else {\r\n        return { top: 0, right: 0, bottom: 0, left: 0 }\r\n    }\r\n}\r\n\r\nexport const container = <AppEvent>({ padding, width, height, color, x, y, onClick, id }: Properties<AppEvent>, child?: UI<AppEvent>): Container<AppEvent> => {\r\n    return {\r\n        kind: UIKind.CONTAINER,\r\n        padding: transformPadding(padding),\r\n        width,\r\n        height,\r\n        x,\r\n        y,\r\n        color,\r\n        onClick,\r\n        id,\r\n        child\r\n    }\r\n}\r\n\r\nexport const containerLayout = <AppEvent>(ui: Container<AppEvent>, constraints: Constraints, measureText: MeasureText): ContainerLayout => {\r\n    const { top, right, bottom, left } = ui.padding\r\n    if (ui.child) {\r\n        const childLayout = layout(ui.child, constraints, measureText)\r\n        const width = ui.width ?? childLayout.size.width + left + right\r\n        const height = ui.height ?? childLayout.size.height + top + bottom\r\n        return {\r\n            size: { width, height },\r\n            child: childLayout\r\n        }\r\n    }\r\n    const width = (() => {\r\n        if (ui.width) return ui.width + left + right\r\n        return constraints.maxWidth\r\n    })()\r\n    const height = (() => {\r\n        if (ui.height) return ui.height + top + bottom\r\n        return constraints.maxHeight\r\n    })()\r\n    return { size: { width, height } }\r\n}\r\n\r\nexport const containerGeometry = <AppEvent>(ui: Container<AppEvent>, layout: ContainerLayout, offset: Offset, cameraStack: CameraStack): ContainerGeometry => {\r\n    const x0 = offset.x + (ui.x ?? 0)\r\n    const x1 = x0 + layout.size.width\r\n    const y0 = offset.y + (ui.y ?? 0)\r\n    const y1 = y0 + layout.size.height\r\n    const worldSpace = transformWorldSpace(cameraStack, { x0, x1, y0, y1 })\r\n    const childGeometry = (() => {\r\n        if (ui.child) {\r\n            const childLayout = layout.child!\r\n            const childOffset = {\r\n                x: x0 + ui.padding.left,\r\n                y: y0 + ui.padding.top\r\n            }\r\n            return geometry(ui.child, childLayout, childOffset, cameraStack)\r\n        }\r\n        return undefined\r\n    })()\r\n    if (ui.color) {\r\n        const { red, green, blue, alpha } = ui.color\r\n        return {\r\n            worldSpace,\r\n            vertices: [\r\n                x0, y0,\r\n                x0, y1,\r\n                x1, y0,\r\n                x1, y1,\r\n            ],\r\n            colors: [\r\n                red, green, blue, alpha,\r\n                red, green, blue, alpha,\r\n                red, green, blue, alpha,\r\n                red, green, blue, alpha,\r\n            ],\r\n            vertexIndices: [\r\n                0, 1, 2,\r\n                1, 2, 3\r\n            ],\r\n            cameraIndex: Array(4).fill(activeCamera(cameraStack)),\r\n            textureIndex: 0,\r\n            textureCoordinates: Array(8).fill(0),\r\n            child: childGeometry\r\n        }\r\n    }\r\n    return {\r\n        worldSpace,\r\n        vertices: [],\r\n        colors: [],\r\n        vertexIndices: [],\r\n        cameraIndex: [],\r\n        textureIndex: 0,\r\n        textureCoordinates: [],\r\n        child: childGeometry\r\n    }\r\n}\r\n\r\nexport function* containerTraverse<AppEvent>(ui: Container<AppEvent>, layout: ContainerLayout, geometry: ContainerGeometry, z: number): Generator<Entry<AppEvent>> {\r\n    yield { ui, layout, geometry, z }\r\n    if (ui.child) {\r\n        const childLayout = layout.child!\r\n        const childGeometry = geometry.child!\r\n        yield* traverse(ui.child, childLayout, childGeometry, z + 1)\r\n    }\r\n}","import { Constraints, Layout, MeasureText, Size, UI, UIKind, layout, Geometry, Offset, geometry, WorldSpace, Entry, traverse } from \".\"\r\nimport { CrossAxisAlignment, MainAxisAlignment } from \"./alignment\"\r\nimport { CameraStack, transformWorldSpace } from \"./camera_stack\"\r\n\r\nexport interface RowLayout {\r\n    readonly size: Size\r\n    readonly totalChildWidth: number\r\n    readonly children: Layout[]\r\n}\r\n\r\nexport interface RowGeometry {\r\n    readonly worldSpace: WorldSpace\r\n    readonly children: Geometry[]\r\n}\r\n\r\nexport interface Row<AppEvent> {\r\n    readonly id?: string\r\n    readonly onClick?: AppEvent\r\n    readonly kind: UIKind.ROW,\r\n    readonly mainAxisAlignment: MainAxisAlignment\r\n    readonly crossAxisAlignment: CrossAxisAlignment\r\n    readonly children: UI<AppEvent>[]\r\n}\r\n\r\n\r\ninterface Properties {\r\n    readonly mainAxisAlignment?: MainAxisAlignment\r\n    readonly crossAxisAlignment?: CrossAxisAlignment\r\n}\r\n\r\nexport function row<AppEvent>(children: UI<AppEvent>[]): Row<AppEvent>\r\nexport function row<AppEvent>(properties: Properties, children: UI<AppEvent>[]): Row<AppEvent>\r\nexport function row<AppEvent>(...args: any[]): Row<AppEvent> {\r\n    const [properties, children]: [Properties, UI<AppEvent>[]] = (() =>\r\n        args[0] instanceof Array ? [{}, args[0]] : [args[0], args[1]]\r\n    )()\r\n    return {\r\n        kind: UIKind.ROW,\r\n        mainAxisAlignment: properties.mainAxisAlignment ?? MainAxisAlignment.START,\r\n        crossAxisAlignment: properties.crossAxisAlignment ?? CrossAxisAlignment.START,\r\n        children\r\n    }\r\n}\r\n\r\nexport const rowLayout = <AppEvent>(ui: Row<AppEvent>, constraints: Constraints, measureText: MeasureText): RowLayout => {\r\n    const initialChildren: Layout[] = []\r\n    const initial = {\r\n        children: initialChildren,\r\n        totalChildWidth: 0,\r\n        height: 0\r\n    }\r\n    const result = ui.children.reduce((acc, child) => {\r\n        const childLayout = layout(child, constraints, measureText)\r\n        acc.children.push(childLayout)\r\n        acc.totalChildWidth += childLayout.size.width\r\n        acc.height = Math.max(acc.height, childLayout.size.height)\r\n        return acc\r\n    }, initial)\r\n    const { children, totalChildWidth, height } = result\r\n    const width = ui.mainAxisAlignment == MainAxisAlignment.START ? totalChildWidth : constraints.maxWidth\r\n    return { size: { width, height }, totalChildWidth, children }\r\n}\r\n\r\nexport const rowGeometry = <AppEvent>(ui: Row<AppEvent>, layout: RowLayout, offset: Offset, cameraStack: CameraStack): RowGeometry => {\r\n    const initialChildren: Geometry[] = []\r\n    const freeSpaceX = layout.size.width - layout.totalChildWidth\r\n    const initial = {\r\n        children: initialChildren,\r\n        x: (() => {\r\n            switch (ui.mainAxisAlignment) {\r\n                case MainAxisAlignment.START: return offset.x\r\n                case MainAxisAlignment.CENTER: return offset.x + freeSpaceX / 2\r\n                case MainAxisAlignment.END: return offset.x + freeSpaceX\r\n                case MainAxisAlignment.SPACE_EVENLY: return offset.x + freeSpaceX / (ui.children.length + 1)\r\n                case MainAxisAlignment.SPACE_BETWEEN: return offset.x\r\n            }\r\n        })(),\r\n    }\r\n    const addXStart = (childLayout: Layout) => childLayout.size.width\r\n    const addXCenter = (childLayout: Layout) => childLayout.size.width\r\n    const addXEnd = (childLayout: Layout) => childLayout.size.width\r\n    const addXSpaceEvenly = (childLayout: Layout) => childLayout.size.width + freeSpaceX / (ui.children.length + 1)\r\n    const addXSpaceBetween = (childLayout: Layout) => childLayout.size.width + freeSpaceX / (ui.children.length - 1)\r\n    const addX = (() => {\r\n        switch (ui.mainAxisAlignment) {\r\n            case MainAxisAlignment.START: return addXStart\r\n            case MainAxisAlignment.CENTER: return addXCenter\r\n            case MainAxisAlignment.END: return addXEnd\r\n            case MainAxisAlignment.SPACE_EVENLY: return addXSpaceEvenly\r\n            case MainAxisAlignment.SPACE_BETWEEN: return addXSpaceBetween\r\n        }\r\n    })()\r\n    const offsetYStart = (_: Layout) => offset.y\r\n    const offsetYCenter = (childLayout: Layout) => offset.y + layout.size.height / 2 - childLayout.size.height / 2\r\n    const offsetYEnd = (childLayout: Layout) => offset.y + layout.size.height - childLayout.size.height\r\n    const offsetY = (() => {\r\n        switch (ui.crossAxisAlignment) {\r\n            case CrossAxisAlignment.START: return offsetYStart\r\n            case CrossAxisAlignment.CENTER: return offsetYCenter\r\n            case CrossAxisAlignment.END: return offsetYEnd\r\n        }\r\n    })()\r\n    const result = ui.children.reduce((acc, child, i) => {\r\n        const childLayout = layout.children[i]\r\n        const childOffset = { x: acc.x, y: offsetY(childLayout) }\r\n        const childGeometry = geometry(child, childLayout, childOffset, cameraStack)\r\n        acc.children.push(childGeometry)\r\n        acc.x += addX(childLayout)\r\n        return acc\r\n    }, initial)\r\n    const worldSpace = transformWorldSpace(cameraStack, {\r\n        x0: offset.x,\r\n        y0: offset.y,\r\n        x1: offset.x + layout.size.width,\r\n        y1: offset.y + layout.size.height,\r\n    })\r\n    return { worldSpace, children: result.children }\r\n}\r\n\r\nexport function* rowTraverse<AppEvent>(ui: Row<AppEvent>, layout: RowLayout, geometry: RowGeometry, z: number): Generator<Entry<AppEvent>> {\r\n    yield { ui, layout, geometry, z }\r\n    const nextZ = z + 1\r\n    let i = 0\r\n    for (const child of ui.children) {\r\n        yield* traverse(child, layout.children[i], geometry.children[i], nextZ)\r\n        i += 1\r\n    }\r\n}","import { Connection, Constraints, Entry, geometry, Geometry, layout, Layout, MeasureText, Offset, Size, traverse, UI, UIKind, WorldSpace } from \".\"\r\nimport { Matrix3x3 } from \"../linear_algebra/matrix3x3\"\r\nimport { CameraStack, popCamera, pushCamera, transformWorldSpace } from \"./camera_stack\"\r\n\r\nexport interface SceneLayout {\r\n    readonly size: Size\r\n    readonly children: Layout[]\r\n}\r\n\r\nexport interface SceneGeometry {\r\n    readonly worldSpace: WorldSpace\r\n    readonly children: Geometry[]\r\n}\r\n\r\nexport interface Scene<AppEvent> {\r\n    readonly id?: string\r\n    readonly onClick?: AppEvent\r\n    readonly kind: UIKind.SCENE\r\n    readonly camera: Matrix3x3\r\n    readonly children: UI<AppEvent>[]\r\n    readonly connections: Connection[]\r\n}\r\n\r\nexport interface Properties<AppEvent> {\r\n    readonly id?: string\r\n    readonly onClick?: AppEvent\r\n    readonly camera: Matrix3x3\r\n    readonly children: UI<AppEvent>[]\r\n    readonly connections?: Connection[]\r\n}\r\n\r\nexport const scene = <AppEvent>({ id, onClick, camera, children, connections }: Properties<AppEvent>): Scene<AppEvent> => ({\r\n    id, onClick, kind: UIKind.SCENE, camera, children, connections: connections ?? []\r\n})\r\n\r\nexport const sceneLayout = <AppEvent>(ui: Scene<AppEvent>, constraints: Constraints, measureText: MeasureText): SceneLayout => {\r\n    const children = ui.children.map(c => layout(c, constraints, measureText))\r\n    const width = constraints.maxWidth\r\n    const height = constraints.maxHeight\r\n    return { size: { width, height }, children }\r\n}\r\n\r\nexport const sceneGeometry = <AppEvent>(ui: Scene<AppEvent>, layout: SceneLayout, offset: Offset, cameraStack: CameraStack): SceneGeometry => {\r\n    const worldSpace = transformWorldSpace(cameraStack, {\r\n        x0: offset.x,\r\n        y0: offset.y,\r\n        x1: offset.x + layout.size.width,\r\n        y1: offset.y + layout.size.height\r\n    })\r\n    pushCamera(cameraStack, ui.camera)\r\n    const children = ui.children.map((c, i) => geometry(c, layout.children[i], offset, cameraStack))\r\n    popCamera(cameraStack)\r\n    return { worldSpace, children }\r\n}\r\n\r\nexport function* sceneTraverse<AppEvent>(ui: Scene<AppEvent>, layout: SceneLayout, geometry: SceneGeometry, z: number): Generator<Entry<AppEvent>> {\r\n    yield { ui, layout, geometry, z }\r\n    let i = 0\r\n    for (const child of ui.children) {\r\n        for (const entry of traverse(child, layout.children[i], geometry.children[i], z)) {\r\n            yield entry\r\n            z = Math.max(z, entry.z)\r\n        }\r\n        i++\r\n        z++\r\n    }\r\n}\r\n","import { Constraints, Geometry, layout, Layout, MeasureText, Offset, Size, UI, UIKind, WorldSpace, geometry, Entry, traverse } from \".\";\r\nimport { CameraStack, transformWorldSpace } from \"./camera_stack\";\r\n\r\nexport interface StackLayout {\r\n    readonly size: Size\r\n    readonly children: Layout[]\r\n}\r\n\r\nexport interface StackGeometry {\r\n    readonly worldSpace: WorldSpace\r\n    readonly children: Geometry[]\r\n}\r\n\r\nexport interface Stack<AppEvent> {\r\n    readonly id?: string\r\n    readonly onClick?: AppEvent\r\n    kind: UIKind.STACK\r\n    children: UI<AppEvent>[]\r\n}\r\n\r\nexport const stack = <AppEvent>(children: UI<AppEvent>[]): Stack<AppEvent> => ({\r\n    kind: UIKind.STACK,\r\n    children\r\n})\r\n\r\nexport const stackLayout = <AppEvent>(ui: Stack<AppEvent>, constraints: Constraints, measureText: MeasureText): StackLayout => {\r\n    const children = ui.children.map(c => layout(c, constraints, measureText))\r\n    const width = constraints.maxWidth\r\n    const height = constraints.maxHeight\r\n    return { size: { width, height }, children }\r\n}\r\n\r\nexport const stackGeometry = <AppEvent>(ui: Stack<AppEvent>, layout: StackLayout, offset: Offset, cameraStack: CameraStack): StackGeometry => {\r\n    const children = ui.children.map((c, i) => geometry(c, layout.children[i], offset, cameraStack))\r\n    const worldSpace = transformWorldSpace(cameraStack, {\r\n        x0: offset.x,\r\n        y0: offset.y,\r\n        x1: offset.x + layout.size.width,\r\n        y1: offset.y + layout.size.height,\r\n    })\r\n    return { worldSpace, children }\r\n}\r\n\r\nexport function* stackTraverse<AppEvent>(ui: Stack<AppEvent>, layout: StackLayout, geometry: StackGeometry, z: number): Generator<Entry<AppEvent>> {\r\n    yield { ui, layout, geometry, z }\r\n    let i = 0\r\n    for (const child of ui.children) {\r\n        for (const entry of traverse(child, layout.children[i], geometry.children[i], z)) {\r\n            yield entry\r\n            z = Math.max(z, entry.z)\r\n        }\r\n        i += 1\r\n        z += 1\r\n    }\r\n}","import { Color, Constraints, Entry, Font, MeasureText, Offset, Size, TextMeasurements, UIKind, WorldSpace } from \".\";\r\nimport { activeCamera, CameraStack, transformWorldSpace } from \"./camera_stack\";\r\n\r\nexport interface TextLayout {\r\n    readonly measurements: TextMeasurements\r\n    readonly size: Size\r\n}\r\n\r\nexport interface TextGeometry {\r\n    readonly worldSpace: WorldSpace\r\n    readonly textureIndex: number\r\n    readonly textureCoordinates: number[]\r\n    readonly colors: number[]\r\n    readonly vertices: number[]\r\n    readonly vertexIndices: number[]\r\n    readonly cameraIndex: number[]\r\n}\r\n\r\nexport interface Text<AppEvent> {\r\n    readonly id?: string\r\n    readonly onClick?: AppEvent\r\n    readonly kind: UIKind.TEXT\r\n    readonly font: Font\r\n    readonly color: Color\r\n    readonly str: string\r\n}\r\n\r\ninterface Properties {\r\n    readonly font?: string\r\n    readonly size?: number\r\n    readonly color?: Color\r\n}\r\n\r\nexport function text<AppEvent>(str: string): Text<AppEvent>\r\nexport function text<AppEvent>(properties: Properties, str: string): Text<AppEvent>\r\nexport function text<AppEvent>(...args: any[]): Text<AppEvent> {\r\n    const [properties, str]: [Properties, string] = (() =>\r\n        typeof args[0] == 'string' ? [{}, args[0]] : [args[0], args[1]]\r\n    )()\r\n    return {\r\n        kind: UIKind.TEXT,\r\n        font: {\r\n            family: properties.font ?? \"monospace\",\r\n            size: properties.size ?? 14\r\n        },\r\n        color: properties.color ?? { red: 255, green: 255, blue: 255, alpha: 255 },\r\n        str\r\n    }\r\n}\r\n\r\nexport const textLayout = <AppEvent>({ font, str }: Text<AppEvent>, _: Constraints, measureText: MeasureText): TextLayout => {\r\n    const measurements = measureText(font, str)\r\n    const width = measurements.widths.reduce((acc, width) => acc + width)\r\n    const size = { width, height: font.size }\r\n    return { measurements, size }\r\n}\r\n\r\nconst vertices = (widths: number[], height: number, offset: Offset) => {\r\n    const result = []\r\n    let offsetX = offset.x\r\n    const y0 = offset.y\r\n    const y1 = offset.y + height\r\n    for (const width of widths) {\r\n        const x0 = offsetX\r\n        const x1 = offsetX + width\r\n        result.push(\r\n            x0, y0,\r\n            x0, y1,\r\n            x1, y0,\r\n            x1, y1\r\n        )\r\n        offsetX += width\r\n    }\r\n    return result\r\n}\r\n\r\nconst colors = (n: number, { red, green, blue, alpha }: Color) => {\r\n    const result = []\r\n    for (let i = 0; i < n; ++i) {\r\n        result.push(\r\n            red, green, blue, alpha,\r\n            red, green, blue, alpha,\r\n            red, green, blue, alpha,\r\n            red, green, blue, alpha,\r\n        )\r\n    }\r\n    return result\r\n}\r\n\r\nconst vertexIndices = (n: number) => {\r\n    const result = []\r\n    let offset = 0\r\n    for (let i = 0; i < n; ++i) {\r\n        result.push(\r\n            offset, offset + 1, offset + 2,\r\n            offset + 1, offset + 2, offset + 3\r\n        )\r\n        offset += 4\r\n    }\r\n    return result\r\n}\r\n\r\nexport const textGeometry = <AppEvent>(ui: Text<AppEvent>, layout: TextLayout, offset: Offset, cameraStack: CameraStack): TextGeometry => {\r\n    const textLayout = layout as TextLayout\r\n    const { measurements } = textLayout\r\n    const { textureIndex, textureCoordinates, widths } = measurements\r\n    return {\r\n        worldSpace: transformWorldSpace(cameraStack, {\r\n            x0: offset.x,\r\n            y0: offset.y,\r\n            x1: offset.x + layout.size.width,\r\n            y1: offset.y + layout.size.height\r\n        }),\r\n        textureIndex,\r\n        textureCoordinates: textureCoordinates.flat(),\r\n        colors: colors(widths.length, ui.color),\r\n        vertices: vertices(widths, ui.font.size, offset),\r\n        vertexIndices: vertexIndices(widths.length),\r\n        cameraIndex: Array(widths.length * 4).fill(activeCamera(cameraStack))\r\n    }\r\n}\r\n\r\nexport function* textTraverse<AppEvent>(ui: Text<AppEvent>, layout: TextLayout, geometry: TextGeometry, z: number): Generator<Entry<AppEvent>> {\r\n    yield { ui, layout, geometry, z }\r\n}","import { Entry } from \".\"\r\nimport { ClickHandlers } from \"./gather_on_click_handlers\"\r\nimport * as gatherOnClickHandlers from \"./gather_on_click_handlers\"\r\nimport { IdToWorldSpace } from \"./id_to_world_space\"\r\nimport * as buildIdToWorldSpace from \"./id_to_world_space\"\r\nimport { Layers } from \"./layer_geometry\"\r\nimport * as layerGeometry from \"./layer_geometry\"\r\nimport { Connections } from \"./gather_connections\"\r\nimport * as gatherConnections from \"./gather_connections\"\r\n\r\nexport interface Accumulator<AppEvent> {\r\n    layers: Layers,\r\n    clickHandlers: ClickHandlers<AppEvent>,\r\n    idToWorldSpace: IdToWorldSpace\r\n    connections: Connections\r\n}\r\n\r\nexport const initial = <AppEvent>(): Accumulator<AppEvent> => ({\r\n    layers: layerGeometry.initial(),\r\n    clickHandlers: gatherOnClickHandlers.initial(),\r\n    idToWorldSpace: buildIdToWorldSpace.initial(),\r\n    connections: gatherConnections.initial()\r\n})\r\n\r\nexport const combine = <AppEvent>(acc: Accumulator<AppEvent>, entry: Entry<AppEvent>): Accumulator<AppEvent> => ({\r\n    layers: layerGeometry.combine(acc.layers, entry),\r\n    clickHandlers: gatherOnClickHandlers.combine(acc.clickHandlers, entry),\r\n    idToWorldSpace: buildIdToWorldSpace.combine(acc.idToWorldSpace, entry),\r\n    connections: gatherConnections.combine(acc.connections, entry)\r\n})\r\n","import { Entry, WorldSpace } from \".\"\r\n\r\nexport interface ClickHandler<AppEvent> {\r\n    onClick: AppEvent\r\n    worldSpace: WorldSpace\r\n}\r\n\r\nexport type ClickHandlers<AppEvent> = ClickHandler<AppEvent>[][]\r\n\r\nexport const initial = <AppEvent>(): ClickHandlers<AppEvent> => []\r\n\r\nexport const combine = <AppEvent>(handlers: ClickHandlers<AppEvent>, entry: Entry<AppEvent>): ClickHandlers<AppEvent> => {\r\n    if (entry.ui.onClick === undefined) return handlers\r\n    const needed = entry.z - handlers.length + 1\r\n    for (let i = 0; i < needed; ++i) handlers.push([])\r\n    handlers[entry.z].push({\r\n        onClick: entry.ui.onClick,\r\n        worldSpace: entry.geometry.worldSpace\r\n    })\r\n    return handlers\r\n}\r\n","import { Entry, WorldSpace } from \".\"\r\n\r\nexport type IdToWorldSpace = { [id: string]: WorldSpace }\r\n\r\nexport const initial = (): IdToWorldSpace => ({})\r\n\r\nexport const combine = <AppEvent>(lookup: IdToWorldSpace, entry: Entry<AppEvent>): IdToWorldSpace => {\r\n    if (!entry.ui.id) return lookup\r\n    lookup[entry.ui.id] = entry.geometry.worldSpace\r\n    return lookup\r\n}","import { Entry, UIKind } from \".\"\r\nimport { ContainerGeometry } from \"./container\"\r\nimport { TextGeometry } from \"./text\"\r\n\r\ntype Geometry = ContainerGeometry | TextGeometry\r\nexport type Layer = { [textureIndex: number]: Geometry[] }\r\nexport type Layers = Layer[]\r\n\r\nexport const initial = (): Layers => []\r\n\r\nexport const combine = <AppEvent>(layers: Layers, entry: Entry<AppEvent>): Layers => {\r\n    switch (entry.ui.kind) {\r\n        case UIKind.CONTAINER:\r\n        case UIKind.TEXT:\r\n            const entryGeometry = entry.geometry as Geometry\r\n            if (entryGeometry.vertices.length == 0) return layers\r\n            const needed = entry.z - layers.length + 1\r\n            for (let i = 0; i < needed; ++i) layers.push({})\r\n            const layer = layers[entry.z]\r\n            const geometry = (() => {\r\n                const geometry = layer[entryGeometry.textureIndex]\r\n                if (geometry) return geometry\r\n                const newGeometry: Geometry[] = []\r\n                layer[entryGeometry.textureIndex] = newGeometry\r\n                return newGeometry\r\n            })()\r\n            geometry.push(entryGeometry)\r\n            return layers\r\n        default:\r\n            return layers\r\n    }\r\n}\r\n","import { Entry, Connection, UIKind } from \".\"\r\nimport { inverse, multiplyMatrixVector } from \"../linear_algebra/matrix3x3\"\r\nimport { length } from \"../linear_algebra/vector3\"\r\n\r\nexport interface ConnectionsAndScale {\r\n    connections: Connection[]\r\n    scale: number\r\n}\r\n\r\nexport type Connections = ConnectionsAndScale[][]\r\n\r\nexport const initial = (): Connections => []\r\n\r\nexport const combine = <AppEvent>(connections: Connections, entry: Entry<AppEvent>): Connections => {\r\n    if (entry.ui.kind == UIKind.SCENE) {\r\n        if (entry.ui.connections.length === 0) return connections\r\n        const needed = entry.z - connections.length + 1\r\n        for (let i = 0; i < needed; ++i) connections.push([])\r\n        const layer = connections[entry.z]\r\n        layer.push({\r\n            connections: entry.ui.connections,\r\n            scale: length(multiplyMatrixVector(inverse(entry.ui.camera), [0, 1, 0]))\r\n        })\r\n        return connections\r\n    }\r\n    return connections\r\n}\r\n","import { Batch } from \"./batch_geometry\";\r\nimport { Font, TextMeasurements, Size } from \".\";\r\nimport { Matrix3x3, projection } from \"../linear_algebra/matrix3x3\";\r\nimport { Document, WebGL2Context, Buffer, UniformLocation, Shader, Program, Canvas, Texture, Window } from \"./dom\";\r\nimport { ClickHandlers } from \"./gather_on_click_handlers\";\r\n\r\ninterface Attribute {\r\n    location: number\r\n    buffer: Buffer\r\n}\r\n\r\ninterface Attributes {\r\n    vertices: Attribute\r\n    vertexIndices: Buffer\r\n    colors: Attribute\r\n    textureCoordinates: Attribute\r\n    cameraIndex: Attribute\r\n}\r\n\r\ninterface Uniforms {\r\n    projection: UniformLocation\r\n    texture: UniformLocation\r\n    cameras: UniformLocation\r\n}\r\n\r\nexport enum ProgramKind { DATA, ERROR }\r\n\r\ninterface ProgramData {\r\n    kind: ProgramKind.DATA\r\n    vertexShader: Shader\r\n    fragmentShader: Shader\r\n    program: Program\r\n    attributes: Attributes\r\n    uniforms: Uniforms\r\n}\r\n\r\nexport interface ProgramError {\r\n    kind: ProgramKind.ERROR\r\n    vertexInfoLog: string | null\r\n    fragmentInfoLog: string | null\r\n}\r\n\r\n\r\ntype DevicePixelRatio = number\r\n\r\nconst nearestPowerOfTwo = (x: number): number => {\r\n    let current = 1\r\n    while (current < x) {\r\n        current <<= 1\r\n    }\r\n    return current\r\n}\r\n\r\nconst createTextMeasurements = (document: Document, gl: WebGL2Context, font: Font, dpr: DevicePixelRatio) => {\r\n    const canvas = document.createElement('canvas')\r\n    const ctx = canvas.getContext('2d')!\r\n    const totalCells = 256\r\n    const rows = Math.sqrt(totalCells)\r\n    const size = nearestPowerOfTwo(font.size * rows)\r\n    const cellSize = size / rows\r\n    canvas.width = size * dpr\r\n    canvas.height = size * dpr\r\n    canvas.style.width = `${size}px`\r\n    canvas.style.height = `${size}px`\r\n    ctx.scale(dpr, dpr)\r\n    ctx.textAlign = 'left'\r\n    ctx.textBaseline = 'top'\r\n    ctx.font = `${font.size}px ${font.family}`\r\n    ctx.fillStyle = 'white'\r\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n    const height = font.size\r\n    const widths: number[] = []\r\n    const textureCoordinates: number[][] = []\r\n    for (let i = 0; i < totalCells; ++i) {\r\n        const c = String.fromCharCode(i)\r\n        const metric = ctx.measureText(c)\r\n        const width = Math.ceil(metric.width)\r\n        const x = i % rows * cellSize\r\n        const y = Math.floor(i / rows) * cellSize\r\n        ctx.fillText(c, x, y)\r\n        widths.push(width)\r\n        const x0 = x / size\r\n        const x1 = (x + width) / size\r\n        const y0 = y / size\r\n        const y1 = (y + height) / size\r\n        textureCoordinates.push([\r\n            x0, y0,\r\n            x0, y1,\r\n            x1, y0,\r\n            x1, y1\r\n        ])\r\n    }\r\n    const texture = gl.createTexture()!\r\n    gl.bindTexture(gl.TEXTURE_2D, texture)\r\n    gl.texImage2D(\r\n        gl.TEXTURE_2D,\r\n      /*mipLevel*/0,\r\n      /*internalformat*/gl.RGBA,\r\n      /*srcFormat*/gl.RGBA,\r\n      /*srcType*/gl.UNSIGNED_BYTE,\r\n      /*source*/canvas\r\n    )\r\n    gl.generateMipmap(gl.TEXTURE_2D)\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE)\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE)\r\n    return { widths, textureCoordinates, texture }\r\n}\r\n\r\nconst mapString = <T>(str: string, f: (c: string, i: number) => T): Array<T> => {\r\n    let result = []\r\n    for (let i = 0; i < str.length; ++i) {\r\n        result.push(f(str[i], i))\r\n    }\r\n    return result\r\n}\r\n\r\nexport class WebGL2Renderer<AppEvent> {\r\n    _size: Size\r\n    _cameras: Matrix3x3[]\r\n    kind: ProgramKind.DATA = ProgramKind.DATA\r\n\r\n    constructor(\r\n        public window: Window,\r\n        public document: Document,\r\n        public canvas: Canvas,\r\n        public gl: WebGL2Context,\r\n        public program: ProgramData,\r\n        public textures: Texture[],\r\n        public textMeasurementsCache: Map<string, TextMeasurements>,\r\n        public clickHandlers: ClickHandlers<AppEvent>,\r\n        public dispatch: (event: AppEvent) => void\r\n    ) {\r\n    }\r\n\r\n    clear = () => {\r\n        const { gl } = this\r\n        gl.clear(gl.COLOR_BUFFER_BIT)\r\n    }\r\n\r\n    set size(size: Size) {\r\n        const { gl, program, window } = this\r\n        const { uniforms } = program\r\n        const { canvas } = gl\r\n        gl.uniformMatrix3fv(uniforms.projection, /*transpose*/true, projection(size))\r\n        canvas.width = size.width * window.devicePixelRatio\r\n        canvas.height = size.height * window.devicePixelRatio\r\n        canvas.style.width = `${size.width}px`\r\n        canvas.style.height = `${size.height}px`\r\n        canvas.style.display = 'block'\r\n        gl.viewport(0, 0, canvas.width, canvas.height)\r\n        this._size = size\r\n    }\r\n\r\n    get size() { return this._size }\r\n\r\n    set cameras(cameras: Matrix3x3[]) {\r\n        const { gl, program } = this\r\n        const { uniforms } = program\r\n        const data: number[] = []\r\n        for (const camera of cameras) data.push(...camera)\r\n        gl.uniformMatrix3fv(uniforms.cameras, /*transpose*/true, data)\r\n        this._cameras = cameras\r\n    }\r\n\r\n    get cameras() { return this._cameras }\r\n\r\n    draw = ({ triangles, lines }: Batch) => {\r\n        const { gl, program, textures } = this\r\n        const { attributes } = program\r\n        {\r\n            const { vertices, colors, vertexIndices, textureCoordinates, textureIndex, cameraIndex } = triangles\r\n            if (vertices.length !== 0) {\r\n                const texture = textures[textureIndex]\r\n                gl.bindTexture(gl.TEXTURE_2D, texture)\r\n                gl.bindBuffer(gl.ARRAY_BUFFER, attributes.vertices.buffer)\r\n                gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW)\r\n                gl.bindBuffer(gl.ARRAY_BUFFER, attributes.colors.buffer)\r\n                gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(colors), gl.STATIC_DRAW)\r\n                gl.bindBuffer(gl.ARRAY_BUFFER, attributes.textureCoordinates.buffer)\r\n                gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(textureCoordinates), gl.STATIC_DRAW)\r\n                gl.bindBuffer(gl.ARRAY_BUFFER, attributes.cameraIndex.buffer)\r\n                gl.bufferData(gl.ARRAY_BUFFER, new Uint8Array(cameraIndex), gl.STATIC_DRAW)\r\n                gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, attributes.vertexIndices)\r\n                gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(vertexIndices), gl.STATIC_DRAW)\r\n                gl.drawElements(gl.TRIANGLES, /*count*/vertexIndices.length, /*type*/gl.UNSIGNED_SHORT, /*offset*/0)\r\n            }\r\n        }\r\n        {\r\n            const { vertices, colors } = lines\r\n            if (vertices.length !== 0) {\r\n                const texture = textures[0]\r\n                const count = vertices.length / 2\r\n                gl.bindTexture(gl.TEXTURE_2D, texture)\r\n                gl.bindBuffer(gl.ARRAY_BUFFER, attributes.vertices.buffer)\r\n                gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW)\r\n                gl.bindBuffer(gl.ARRAY_BUFFER, attributes.colors.buffer)\r\n                gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(colors), gl.STATIC_DRAW)\r\n                gl.bindBuffer(gl.ARRAY_BUFFER, attributes.textureCoordinates.buffer)\r\n                gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(Array(count * 2).fill(0)), gl.STATIC_DRAW)\r\n                gl.bindBuffer(gl.ARRAY_BUFFER, attributes.cameraIndex.buffer)\r\n                gl.bufferData(gl.ARRAY_BUFFER, new Uint8Array(Array(count).fill(0)), gl.STATIC_DRAW)\r\n                gl.drawArrays(gl.LINES, /*first*/0, count)\r\n            }\r\n        }\r\n    }\r\n\r\n    getTextureMeasurements = (font: Font, dpr: DevicePixelRatio) => {\r\n        const { document, gl } = this\r\n        const key = `${dpr} ${font.size} ${font.family}`\r\n        const measurements = this.textMeasurementsCache.get(key)\r\n        if (measurements) return measurements\r\n        const { texture, widths, textureCoordinates } = createTextMeasurements(document, gl, font, dpr)\r\n        const textureIndex = this.textures.length\r\n        this.textures.push(texture)\r\n        const newMeasurements = { widths, textureIndex, textureCoordinates }\r\n        this.textMeasurementsCache.set(key, newMeasurements)\r\n        return newMeasurements\r\n    }\r\n\r\n    measureText = (font: Font, str: string) => {\r\n        const { window } = this\r\n        const dpr = window.devicePixelRatio\r\n        const { widths, textureIndex, textureCoordinates } = this.getTextureMeasurements(font, dpr)\r\n        const indices = mapString(str, c => c.charCodeAt(0))\r\n        return {\r\n            widths: indices.map(i => widths[i]),\r\n            textureIndex,\r\n            textureCoordinates: indices.map(i => textureCoordinates[i]),\r\n        }\r\n    }\r\n}\r\n\r\nconst createVertexShader = (gl: WebGL2Context, attributes: Attributes): Shader => {\r\n    const { vertices, colors, textureCoordinates, cameraIndex } = attributes\r\n    const vertexShaderSource = `#version 300 es\r\n  uniform mat3 u_projection;\r\n  uniform mat3 u_cameras[8];\r\n\r\n  layout(location = ${vertices.location}) in vec2 a_vertex;\r\n  layout(location = ${colors.location}) in vec4 a_color;\r\n  layout(location = ${textureCoordinates.location}) in vec2 a_textureCoordinates;\r\n  layout(location = ${cameraIndex.location}) in uint a_cameraIndex;\r\n\r\n  out vec4 v_color;\r\n  out vec2 v_textureCoordinates;\r\n\r\n  void main() {\r\n    mat3 camera = u_cameras[a_cameraIndex];\r\n    mat3 transform = u_projection * inverse(camera);\r\n    gl_Position = vec4((transform * vec3(a_vertex, 1)).xy, 0, 1);\r\n    v_color = a_color / 255.0;\r\n    v_textureCoordinates = a_textureCoordinates;\r\n  }\r\n  `\r\n    const vertexShader = gl.createShader(gl.VERTEX_SHADER)!\r\n    gl.shaderSource(vertexShader, vertexShaderSource)\r\n    gl.compileShader(vertexShader)\r\n    return vertexShader\r\n}\r\n\r\nconst createFragmentShader = (gl: WebGL2Context): Shader => {\r\n    const fragmentShaderSource = `#version 300 es\r\n  precision highp float;\r\n\r\n  uniform sampler2D u_texture;\r\n\r\n  in vec4 v_color;\r\n  in vec2 v_textureCoordinates;\r\n\r\n  out vec4 fragColor;\r\n  \r\n  void main() {\r\n    fragColor = texture(u_texture, v_textureCoordinates) * v_color;\r\n  }\r\n  `\r\n    const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER)!\r\n    gl.shaderSource(fragmentShader, fragmentShaderSource)\r\n    gl.compileShader(fragmentShader)\r\n    return fragmentShader\r\n}\r\n\r\nconst bindVertices = (gl: WebGL2Context, program: Program, { location, buffer }: Attribute) => {\r\n    gl.bindAttribLocation(program, location, 'a_vertex')\r\n    gl.enableVertexAttribArray(location)\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer)\r\n    gl.vertexAttribPointer(\r\n        location,\r\n        /*size*/2,\r\n        /*type*/gl.FLOAT,\r\n        /*normalize*/false,\r\n        /*stride*/0,\r\n        /*offset*/0\r\n    )\r\n}\r\n\r\nconst bindColors = (gl: WebGL2Context, program: Program, { location, buffer }: Attribute) => {\r\n    gl.bindAttribLocation(program, location, 'a_color')\r\n    gl.enableVertexAttribArray(location)\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer)\r\n    gl.vertexAttribPointer(\r\n        location,\r\n        /*size*/4,\r\n        /*type*/gl.FLOAT,\r\n        /*normalize*/false,\r\n        /*stride*/0,\r\n        /*offset*/0\r\n    )\r\n}\r\n\r\nconst bindTextureCoordinates = (gl: WebGL2Context, program: Program, { location, buffer }: Attribute) => {\r\n    gl.bindAttribLocation(program, location, 'a_textureCoordinates')\r\n    gl.enableVertexAttribArray(location)\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer)\r\n    gl.vertexAttribPointer(\r\n        location,\r\n        /*size*/2,\r\n        /*type*/gl.FLOAT,\r\n        /*normalize*/false,\r\n        /*stride*/0,\r\n        /*offset*/0\r\n    )\r\n}\r\n\r\nconst bindCameraIndex = (gl: WebGL2Context, program: Program, { location, buffer }: Attribute) => {\r\n    gl.bindAttribLocation(program, location, 'a_cameraIndex')\r\n    gl.enableVertexAttribArray(location)\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer)\r\n    gl.vertexAttribIPointer(\r\n        location,\r\n        /*size*/1,\r\n        /*type*/gl.UNSIGNED_BYTE,\r\n        /*stride*/0,\r\n        /*offset*/0\r\n    )\r\n}\r\n\r\nconst createProgram = (gl: WebGL2Context): ProgramData | ProgramError => {\r\n    const attributes: Attributes = {\r\n        vertices: {\r\n            location: 0,\r\n            buffer: gl.createBuffer()!\r\n        },\r\n        colors: {\r\n            location: 1,\r\n            buffer: gl.createBuffer()!\r\n        },\r\n        textureCoordinates: {\r\n            location: 2,\r\n            buffer: gl.createBuffer()!\r\n        },\r\n        cameraIndex: {\r\n            location: 3,\r\n            buffer: gl.createBuffer()!\r\n        },\r\n        vertexIndices: gl.createBuffer()!\r\n    }\r\n    const vertexShader = createVertexShader(gl, attributes)\r\n    const fragmentShader = createFragmentShader(gl)\r\n    const program = gl.createProgram()!\r\n    gl.attachShader(program, vertexShader)\r\n    gl.attachShader(program, fragmentShader)\r\n    gl.linkProgram(program)\r\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\r\n        return {\r\n            kind: ProgramKind.ERROR,\r\n            vertexInfoLog: gl.getShaderInfoLog(vertexShader),\r\n            fragmentInfoLog: gl.getShaderInfoLog(fragmentShader),\r\n        }\r\n    }\r\n    gl.useProgram(program)\r\n    const vertexArrayObject = gl.createVertexArray()!\r\n    gl.bindVertexArray(vertexArrayObject)\r\n    bindVertices(gl, program, attributes.vertices)\r\n    bindColors(gl, program, attributes.colors)\r\n    bindTextureCoordinates(gl, program, attributes.textureCoordinates)\r\n    bindCameraIndex(gl, program, attributes.cameraIndex)\r\n    const uniforms: Uniforms = {\r\n        projection: gl.getUniformLocation(program, 'u_projection')!,\r\n        texture: gl.getUniformLocation(program, 'u_texture')!,\r\n        cameras: gl.getUniformLocation(program, 'u_cameras')!\r\n    }\r\n    return {\r\n        kind: ProgramKind.DATA,\r\n        vertexShader,\r\n        fragmentShader,\r\n        program,\r\n        attributes,\r\n        uniforms\r\n    }\r\n}\r\n\r\ninterface Parameters<AppEvent> {\r\n    width: number\r\n    height: number\r\n    document: Document\r\n    window: Window\r\n    dispatch?: (event: AppEvent) => void\r\n}\r\n\r\nexport const webGL2Renderer = <AppEvent>({ width, height, document, window, dispatch }: Parameters<AppEvent>): WebGL2Renderer<AppEvent> | ProgramError => {\r\n    const canvas = document.createElement('canvas')\r\n    canvas.style.touchAction = 'none'\r\n    const gl = canvas.getContext('webgl2')!\r\n    gl.enable(gl.BLEND)\r\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA)\r\n    gl.depthMask(false)\r\n    gl.activeTexture(gl.TEXTURE0)\r\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true)\r\n    gl.clearColor(0, 0, 0, 1)\r\n    const program = createProgram(gl)\r\n    if (program.kind == ProgramKind.ERROR) return program\r\n    const texture = gl.createTexture()!\r\n    gl.bindTexture(gl.TEXTURE_2D, texture)\r\n    gl.texImage2D(\r\n        gl.TEXTURE_2D,\r\n      /*mipLevel*/0,\r\n      /*internalformat*/gl.RGBA,\r\n      /*width*/1,\r\n      /*height*/1,\r\n      /*border*/0,\r\n      /*srcFormat*/gl.RGBA,\r\n      /*srcType*/gl.UNSIGNED_BYTE,\r\n      /*data*/new Uint8Array([255, 255, 255, 255])\r\n    )\r\n    const renderer = new WebGL2Renderer<AppEvent>(\r\n        window,\r\n        document,\r\n        canvas,\r\n        gl,\r\n        program,\r\n        [texture],\r\n        new Map(),\r\n        [],\r\n        dispatch ?? (() => { })\r\n    )\r\n    renderer.size = { width, height }\r\n    return renderer\r\n}","import { CrossAxisAlignment, MainAxisAlignment } from \"../ui/alignment\"\r\nimport { AppEvent, EventKind } from \"../update\"\r\nimport { Model } from \"../model\"\r\nimport { Theme } from '../model/theme'\r\nimport { Focus, FocusFinder, FocusKind } from \"../model/focus\"\r\nimport { text, stack, scene, row, container, column, Connection, UI } from '../ui'\r\nimport { Body, Graph, Input, Output, UUID } from \"../model/graph\"\r\nimport { contextMenu } from \"./context_menu\"\r\nimport { QuickSelectKind } from \"../model/quick_select\"\r\nimport { identity } from \"../linear_algebra/matrix3x3\"\r\n\r\n\r\nexport const spacer = (size: number): UI<AppEvent> =>\r\n    container({ width: size, height: size })\r\n\r\n\r\nexport const intersperse = <T>(array: T[], seperator: T): T[] => {\r\n    const result = [array[0]]\r\n    for (const element of array.slice(1)) {\r\n        result.push(seperator, element)\r\n    }\r\n    return result\r\n}\r\n\r\nexport const isFocused = (focus: Focus, uuid: UUID): boolean => {\r\n    switch (focus.kind) {\r\n        case FocusKind.BODY: return focus.body === uuid\r\n        case FocusKind.INPUT: return focus.input === uuid\r\n        case FocusKind.NODE: return focus.node === uuid\r\n        case FocusKind.OUTPUT: return focus.output === uuid\r\n        default: return false\r\n    }\r\n}\r\n\r\nexport const inputUi = (theme: Theme, { name, uuid }: Input, focus: Focus): UI<AppEvent> =>\r\n    container({\r\n        onClick: {\r\n            kind: EventKind.CLICKED_INPUT,\r\n            input: uuid\r\n        }\r\n    },\r\n        row({ crossAxisAlignment: CrossAxisAlignment.CENTER }, [\r\n            container({\r\n                id: uuid,\r\n                color: isFocused(focus, uuid) ? theme.focusInput : theme.input,\r\n                padding: { top: 2, right: 4, bottom: 2, left: 4 }\r\n            }, text({ color: theme.background }, focus.quickSelect.kind === QuickSelectKind.INPUT ? focus.quickSelect.hotkeys[uuid] : ' ')),\r\n            spacer(4),\r\n            text(name)\r\n        ])\r\n    )\r\n\r\n\r\nexport const inputsUi = (theme: Theme, inputs: Input[], focus: Focus) =>\r\n    column(\r\n        intersperse(\r\n            inputs.map(input => inputUi(theme, input, focus)),\r\n            spacer(4)\r\n        )\r\n    )\r\n\r\n\r\nexport const outputUi = (theme: Theme, { name, uuid }: Output, focus: Focus): UI<AppEvent> =>\r\n    container({\r\n        onClick: {\r\n            kind: EventKind.CLICKED_OUTPUT,\r\n            output: uuid\r\n        }\r\n    },\r\n        row({ crossAxisAlignment: CrossAxisAlignment.CENTER }, [\r\n            text(name),\r\n            spacer(4),\r\n            container({\r\n                id: uuid,\r\n                color: isFocused(focus, uuid) ? theme.focusInput : theme.input,\r\n                padding: { top: 2, right: 4, bottom: 2, left: 4 }\r\n            }, text({ color: theme.background }, focus.quickSelect.kind === QuickSelectKind.OUTPUT ? focus.quickSelect.hotkeys[uuid] : ' ')),\r\n        ])\r\n    )\r\n\r\n\r\nexport const outputsUi = (theme: Theme, outputs: Output[], focus: Focus) =>\r\n    column(\r\n        intersperse(\r\n            outputs.map(output => outputUi(theme, output, focus)),\r\n            spacer(4)\r\n        )\r\n    )\r\n\r\n\r\nexport const numberUi = (theme: Theme, body: Body, focus: Focus): UI<AppEvent> => {\r\n    const value = focus.quickSelect.kind === QuickSelectKind.BODY ?\r\n        focus.quickSelect.hotkeys[body.uuid] :\r\n        body.value.toString()\r\n    return container({\r\n        color: isFocused(focus, body.uuid) ? theme.focusInput : theme.background,\r\n        padding: 5,\r\n        onClick: {\r\n            kind: EventKind.CLICKED_BODY,\r\n            body: body.uuid\r\n        }\r\n    },\r\n        text(value))\r\n}\r\n\r\n\r\nexport const nodeUi = (theme: Theme, nodeUUID: UUID, graph: Graph, focus: Focus): UI<AppEvent> => {\r\n    const node = graph.nodes[nodeUUID]\r\n    const rowEntries: UI<AppEvent>[] = []\r\n    if (node.inputs.length) {\r\n        rowEntries.push(inputsUi(theme, node.inputs.map(i => graph.inputs[i]), focus))\r\n    }\r\n    if (node.inputs.length && node.outputs.length) {\r\n        rowEntries.push(spacer(15))\r\n    }\r\n    if (node.body) {\r\n        rowEntries.push(numberUi(theme, graph.bodys[node.body], focus), spacer(15))\r\n    }\r\n    if (node.outputs.length) {\r\n        rowEntries.push(outputsUi(theme, node.outputs.map(o => graph.outputs[o]), focus))\r\n    }\r\n    const name = focus.quickSelect.kind === QuickSelectKind.NODE ?\r\n        focus.quickSelect.hotkeys[node.uuid] :\r\n        node.name\r\n    return container(\r\n        {\r\n            color: isFocused(focus, node.uuid) ? theme.focusNode : theme.node,\r\n            padding: 4,\r\n            x: node.position.x,\r\n            y: node.position.y,\r\n            onClick: {\r\n                kind: EventKind.CLICKED_NODE,\r\n                node: node.uuid\r\n            }\r\n        },\r\n        column({ crossAxisAlignment: CrossAxisAlignment.CENTER }, [\r\n            text(name),\r\n            spacer(4),\r\n            row(rowEntries)\r\n        ])\r\n    )\r\n}\r\n\r\n\r\nexport const finder = ({ search, options }: FocusFinder, theme: Theme): UI<AppEvent> =>\r\n    column({ crossAxisAlignment: CrossAxisAlignment.CENTER }, [\r\n        container({ height: 10 }),\r\n        container({ color: theme.node, padding: 4 },\r\n            column([\r\n                container({ color: theme.background, width: 300, padding: 4 },\r\n                    text({ color: theme.input, size: 24 }, search.length ? search : \"Search ...\")),\r\n                container({ width: 10, height: 10 }),\r\n                ...options.map((option, i) =>\r\n                    container<AppEvent>({\r\n                        padding: 4,\r\n                        onClick: {\r\n                            kind: EventKind.CLICKED_FINDER_OPTION,\r\n                            option\r\n                        }\r\n                    },\r\n                        text({\r\n                            size: 18,\r\n                            color: i == 0 ? theme.input : { red: 255, green: 255, blue: 255, alpha: 255 }\r\n                        }, option)\r\n                    )\r\n                )\r\n            ])\r\n        )\r\n    ])\r\n\r\n\r\nexport const virtualKey = (key: string): UI<AppEvent> =>\r\n    container({\r\n        padding: 10,\r\n        onClick: {\r\n            kind: EventKind.VIRTUAL_KEYDOWN,\r\n            key\r\n        }\r\n    }, text({ size: 24 }, key))\r\n\r\n\r\nexport const virtualKeys = (keys: string[]) =>\r\n    row(keys.map(c => virtualKey(c)))\r\n\r\n\r\nexport const alphabeticVirtualKeyboard = (theme: Theme) =>\r\n    column({ mainAxisAlignment: MainAxisAlignment.END }, [\r\n        row({ mainAxisAlignment: MainAxisAlignment.SPACE_BETWEEN }, [\r\n            container({ padding: 4, color: theme.node },\r\n                column([\r\n                    virtualKeys(['1', '2', '3', '4', '5']),\r\n                    virtualKeys(['q', 'w', 'e', 'r', 't']),\r\n                    virtualKeys(['a', 's', 'd', 'f', 'g']),\r\n                    virtualKeys(['z', 'x', 'c', 'v']),\r\n                    virtualKeys(['sft', 'space']),\r\n                ])\r\n            ),\r\n            container({ padding: 4, color: theme.node },\r\n                column({ crossAxisAlignment: CrossAxisAlignment.END }, [\r\n                    virtualKeys(['6', '7', '8', '9', '0']),\r\n                    virtualKeys(['y', 'u', 'i', 'o', 'p']),\r\n                    virtualKeys(['h', 'j', 'k', 'l']),\r\n                    virtualKeys(['b', 'n', 'm', 'del']),\r\n                    virtualKeys(['space', 'ret']),\r\n                ])\r\n            ),\r\n        ]),\r\n    ])\r\n\r\n\r\nexport const numericVirtualKeyboard = (theme: Theme) =>\r\n    column({ mainAxisAlignment: MainAxisAlignment.END }, [\r\n        row({ mainAxisAlignment: MainAxisAlignment.END }, [\r\n            container({ padding: 4, color: theme.node },\r\n                column({ crossAxisAlignment: CrossAxisAlignment.END }, [\r\n                    virtualKeys(['1', '2', '3', '4']),\r\n                    virtualKeys(['5', '6', '7', '8']),\r\n                    virtualKeys(['9', '0', 'del']),\r\n                    virtualKeys(['.', 'ret']),\r\n                ])\r\n            ),\r\n        ]),\r\n    ])\r\n\r\nconst identityCamera = identity()\r\n\r\nexport const view = (model: Model): UI<AppEvent> => {\r\n    const nodes = model.nodeOrder\r\n        .map(node =>\r\n            nodeUi(\r\n                model.theme,\r\n                node,\r\n                model.graph,\r\n                model.focus\r\n            )\r\n        )\r\n    const connections: Connection[] = Object.values(model.graph.edges).map(({ input, output }) => ({\r\n        from: output,\r\n        to: input,\r\n        color: model.theme.connection\r\n    }))\r\n    const stacked: UI<AppEvent>[] = [\r\n        container({ color: model.theme.background, onClick: { kind: EventKind.CLICKED_BACKGROUND } }),\r\n        scene({ camera: model.camera, children: nodes, connections }),\r\n    ]\r\n    if (model.nodePlacementLocation.show) {\r\n        stacked.push(\r\n            scene({\r\n                camera: identityCamera,\r\n                children: [\r\n                    container({\r\n                        color: model.theme.nodePlacementLocation,\r\n                        width: 10,\r\n                        height: 10,\r\n                        x: model.nodePlacementLocation.x,\r\n                        y: model.nodePlacementLocation.y,\r\n                    })\r\n                ],\r\n                connections: []\r\n            })\r\n        )\r\n    }\r\n    switch (model.focus.kind) {\r\n        case FocusKind.FINDER:\r\n            stacked.push(\r\n                finder(model.focus, model.theme),\r\n                alphabeticVirtualKeyboard(model.theme)\r\n            )\r\n            break\r\n        case FocusKind.BODY:\r\n            stacked.push(numericVirtualKeyboard(model.theme))\r\n            break\r\n        case FocusKind.NODE:\r\n            stacked.push(contextMenu({\r\n                items: [{\r\n                    name: 'Delete Node',\r\n                    shortcut: 'd',\r\n                    onClick: {\r\n                        kind: EventKind.DELETE_NODE,\r\n                        node: model.focus.node\r\n                    }\r\n                }],\r\n                backgroundColor: model.theme.node\r\n            }))\r\n            break\r\n        case FocusKind.INPUT:\r\n            if (model.graph.inputs[model.focus.input].edge) {\r\n                stacked.push(contextMenu({\r\n                    items: [{\r\n                        name: 'Delete Edge',\r\n                        shortcut: 'd',\r\n                        onClick: {\r\n                            kind: EventKind.DELETE_INPUT_EDGE,\r\n                            input: model.focus.input\r\n                        }\r\n                    }],\r\n                    backgroundColor: model.theme.node\r\n                }))\r\n            }\r\n            break\r\n        case FocusKind.OUTPUT:\r\n            if (model.graph.outputs[model.focus.output].edges.length > 0) {\r\n                stacked.push(contextMenu({\r\n                    items: [\r\n                        {\r\n                            name: 'Delete Edge',\r\n                            shortcut: 'd',\r\n                            onClick: {\r\n                                kind: EventKind.DELETE_OUTPUT_EDGES,\r\n                                output: model.focus.output\r\n                            }\r\n                        }\r\n                    ],\r\n                    backgroundColor: model.theme.node\r\n                }))\r\n            }\r\n            break\r\n    }\r\n    return stack(stacked)\r\n}","import { UI, row, column, container, Color, text } from \"../ui\"\r\nimport { MainAxisAlignment } from \"../ui/alignment\"\r\n\r\nexport interface ContextMenuItem<AppEvent> {\r\n    name: string\r\n    shortcut: string\r\n    onClick: AppEvent\r\n}\r\n\r\ninterface Properties<AppEvent> {\r\n    items: ContextMenuItem<AppEvent>[]\r\n    backgroundColor: Color\r\n}\r\n\r\nexport const contextMenu = <AppEvent>({ items, backgroundColor }: Properties<AppEvent>): UI<AppEvent> =>\r\n    column({ mainAxisAlignment: MainAxisAlignment.END }, [\r\n        row({ mainAxisAlignment: MainAxisAlignment.END }, [\r\n            container({ padding: 4, color: backgroundColor },\r\n                column(items.map(({ name, shortcut, onClick }) =>\r\n                    container({\r\n                        padding: 10,\r\n                        onClick\r\n                    }, text({ size: 18 }, `(${shortcut}) ${name}`))\r\n                )))\r\n        ])\r\n    ])","import { GenerateUUID } from './graph'\r\nimport { addEdge, addNode, changeBodyValue } from \"../update/graph\"\r\nimport { Model, Window } from '.'\r\nimport { emptyModel } from './empty'\r\n\r\nexport const demoModel = (window: Window, generateUUID: GenerateUUID): Model => {\r\n    const model = {\r\n        ...emptyModel(window),\r\n        operations: {\r\n            \"Number\": {\r\n                name: \"Number\",\r\n                inputs: [],\r\n                body: 0,\r\n                outputs: [\"out\"]\r\n            },\r\n            \"Add\": {\r\n                name: \"Add\",\r\n                inputs: [\"x\", \"y\"],\r\n                outputs: [\"out\"]\r\n            },\r\n            \"Subtract\": {\r\n                name: \"Subtract\",\r\n                inputs: [\"x\", \"y\"],\r\n                outputs: [\"out\"]\r\n            },\r\n            \"Multiply\": {\r\n                name: \"Multiply\",\r\n                inputs: [\"x\", \"y\"],\r\n                outputs: [\"out\"]\r\n            },\r\n            \"Divide\": {\r\n                name: \"Divide\",\r\n                inputs: [\"x\", \"y\"],\r\n                outputs: [\"out\"]\r\n            },\r\n            \"Equal\": {\r\n                name: \"Equal\",\r\n                inputs: [\"x\", \"y\"],\r\n                outputs: [\"out\"]\r\n            },\r\n            \"Less Than\": {\r\n                name: \"Less Than\",\r\n                inputs: [\"x\", \"y\"],\r\n                outputs: [\"out\"]\r\n            },\r\n            \"Print\": {\r\n                name: \"Print\",\r\n                inputs: [\"value\"],\r\n                outputs: []\r\n            }\r\n        }\r\n    }\r\n    const { graph: graph0, node: number0 } = addNode({\r\n        graph: model.graph,\r\n        operation: model.operations[\"Number\"],\r\n        position: { x: 25, y: 20 },\r\n        generateUUID\r\n    })\r\n    const graph1 = changeBodyValue(graph0, graph0.nodes[number0].body!, () => 10)\r\n    const { graph: graph2, node: number1 } = addNode({\r\n        graph: graph1,\r\n        operation: model.operations[\"Number\"],\r\n        position: { x: 55, y: 105 },\r\n        generateUUID\r\n    })\r\n    const graph3 = changeBodyValue(graph2, graph2.nodes[number1].body!, () => 25)\r\n    const { graph: graph4, node: add } = addNode({\r\n        graph: graph3,\r\n        operation: model.operations[\"Add\"],\r\n        position: { x: 175, y: 55 },\r\n        generateUUID\r\n    })\r\n    const { graph: graph5 } = addEdge({\r\n        graph: graph4,\r\n        input: graph4.nodes[add].inputs[0],\r\n        output: graph4.nodes[number0].outputs[0],\r\n        generateUUID\r\n    })\r\n    const { graph: graph6 } = addEdge({\r\n        graph: graph5,\r\n        input: graph5.nodes[add].inputs[1],\r\n        output: graph5.nodes[number1].outputs[0],\r\n        generateUUID\r\n    })\r\n    const { graph: graph7, node: number2 } = addNode({\r\n        graph: graph6,\r\n        operation: model.operations[\"Number\"],\r\n        position: { x: 225, y: 145 },\r\n        generateUUID\r\n    })\r\n    const graph8 = changeBodyValue(graph7, graph7.nodes[number2].body!, () => 5)\r\n    const { graph: graph9, node: div } = addNode({\r\n        graph: graph8,\r\n        operation: model.operations[\"Divide\"],\r\n        position: { x: 355, y: 75 },\r\n        generateUUID\r\n    })\r\n    const { graph: graph10 } = addEdge({\r\n        graph: graph9,\r\n        input: graph9.nodes[div].inputs[0],\r\n        output: graph9.nodes[add].outputs[0],\r\n        generateUUID\r\n    })\r\n    const { graph: graph11 } = addEdge({\r\n        graph: graph10,\r\n        input: graph10.nodes[div].inputs[1],\r\n        output: graph10.nodes[number2].outputs[0],\r\n        generateUUID\r\n    })\r\n    const { graph: graph12, node: print } = addNode({\r\n        graph: graph11,\r\n        operation: model.operations[\"Print\"],\r\n        position: { x: 535, y: 85 },\r\n        generateUUID\r\n    })\r\n    const { graph: graph13 } = addEdge({\r\n        graph: graph12,\r\n        input: graph12.nodes[print].inputs[0],\r\n        output: graph12.nodes[div].outputs[0],\r\n        generateUUID\r\n    })\r\n    return {\r\n        ...model,\r\n        graph: graph13,\r\n        nodeOrder: [number0, number1, add, number2, div, print]\r\n    }\r\n}","import { Model, Window } from \".\"\r\nimport { FocusKind } from \"./focus\"\r\nimport { PointerActionKind } from \"./pointer_action\"\r\nimport { identity } from \"../linear_algebra/matrix3x3\"\r\nimport { emptyGraph } from './graph'\r\nimport { QuickSelectKind } from \"./quick_select\"\r\n\r\nexport const emptyModel = (window: Window): Model => ({\r\n    graph: emptyGraph(),\r\n    nodeOrder: [],\r\n    pointers: [],\r\n    camera: identity(),\r\n    focus: {\r\n        kind: FocusKind.NONE,\r\n        pointerAction: { kind: PointerActionKind.NONE },\r\n        quickSelect: { kind: QuickSelectKind.NONE }\r\n    },\r\n    openFinderFirstClick: false,\r\n    nodePlacementLocation: { x: window.width / 2, y: window.height / 2, show: false },\r\n    window,\r\n    operations: {},\r\n    panCamera: { left: false, down: false, up: false, right: false, now: 0 },\r\n    zoomCamera: { in: false, out: false, now: 0 },\r\n    theme: {\r\n        background: { red: 2, green: 22, blue: 39, alpha: 255 },\r\n        node: { red: 41, green: 95, blue: 120, alpha: 255 },\r\n        nodePlacementLocation: { red: 41, green: 95, blue: 120, alpha: 50 },\r\n        focusNode: { red: 23, green: 54, blue: 69, alpha: 255 },\r\n        input: { red: 188, green: 240, blue: 192, alpha: 255 },\r\n        focusInput: { red: 175, green: 122, blue: 208, alpha: 255 },\r\n        connection: { red: 255, green: 255, blue: 255, alpha: 255 },\r\n    },\r\n})","export type UUID = string\r\n\r\nexport type GenerateUUID = () => UUID\r\n\r\nexport interface Input {\r\n    readonly uuid: UUID\r\n    readonly node: UUID\r\n    readonly name: string\r\n    readonly edge?: UUID\r\n}\r\n\r\nexport interface Output {\r\n    readonly uuid: UUID\r\n    readonly node: UUID\r\n    readonly name: string\r\n    readonly edges: Readonly<UUID[]>\r\n}\r\n\r\nexport interface Body {\r\n    readonly uuid: UUID\r\n    readonly node: UUID\r\n    readonly value: number\r\n}\r\n\r\nexport interface Position {\r\n    readonly x: number\r\n    readonly y: number\r\n}\r\n\r\nexport interface Node {\r\n    readonly uuid: UUID\r\n    readonly name: string\r\n    readonly inputs: Readonly<UUID[]>\r\n    readonly body?: UUID\r\n    readonly outputs: Readonly<UUID[]>\r\n    readonly position: Position\r\n}\r\n\r\nexport interface Edge {\r\n    readonly uuid: UUID\r\n    readonly input: UUID\r\n    readonly output: UUID\r\n}\r\n\r\nexport type Nodes = { [uuid: UUID]: Node }\r\nexport type Edges = { [uuid: UUID]: Edge }\r\nexport type Inputs = { [uuid: UUID]: Input }\r\nexport type Bodys = { [uuid: UUID]: Body }\r\nexport type Outputs = { [uuid: UUID]: Output }\r\n\r\nexport interface Graph {\r\n    readonly nodes: Readonly<Nodes>\r\n    readonly edges: Readonly<Edges>\r\n    readonly inputs: Readonly<Inputs>\r\n    readonly bodys: Readonly<Bodys>\r\n    readonly outputs: Readonly<Outputs>\r\n}\r\n\r\nexport interface Operation {\r\n    readonly name: string\r\n    readonly inputs: Readonly<string[]>\r\n    readonly body?: number\r\n    readonly outputs: Readonly<string[]>\r\n}\r\n\r\nexport type Operations = { [name: string]: Operation }\r\n\r\nexport const emptyGraph = (): Graph => ({\r\n    nodes: {},\r\n    edges: {},\r\n    inputs: {},\r\n    bodys: {},\r\n    outputs: {},\r\n})","module.exports = require('./helpers/bundle-url').getBundleURL('7UhFu') + \"service_worker.js\" + \"?\" + Date.now();","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;"],"names":[],"version":3,"file":"index.b71e74eb.js.map","sourceRoot":"/__parcel_source_root/"}